
/*
 * This file is part of Jkop
 * Copyright (c) 2016-2017 Job and Esther Technologies, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

"use strict";var CapexBase64Decoder = function() {{} };var P = CapexBase64Decoder.prototype;P.constructor = CapexBase64Decoder;P._t = {}; P._t["CapexBase64Decoder"] = true;CapexBase64Decoder.createInstance = function() {var _v = new CapexBase64Decoder();return(_v._construct());};P._construct = function() {return(this);};CapexBase64Decoder.appendByte = function(buffer, _byte) {var nbyte = CapeBuffer.allocate(1);CapeBuffer.setByte(nbyte, 0, _byte);return(CapeBuffer.append(buffer, nbyte, CapeBuffer.getSize(nbyte)));};CapexBase64Decoder.fromLookupChar = function(ascii) {var c = 0;if((ascii) === (43)) {(c) = (62);}else {if((ascii) === (47)) {(c) = (63);}else {if((ascii).charCodeAt() >= (48) && (ascii).charCodeAt() <= (57)) {(c) = ((ascii).charCodeAt() + (4));}else {if((ascii).charCodeAt() >= (65) && (ascii).charCodeAt() <= (90)) {(c) = ((ascii).charCodeAt() - (65));}else {if((ascii).charCodeAt() >= (97) && (ascii).charCodeAt() <= (122)) {(c) = ((ascii).charCodeAt() - (71));}}}}}return(c);};CapexBase64Decoder.decode = function(text) {if((text) == (null)) {return(null);}var data = new ArrayBuffer(0);var iter = CapeString.iterate(text);var done = false;if((iter) !== (null)) {var ch = String.fromCharCode(0);while(((ch) = iter.getNextChar()).charCodeAt() > (0)) {var c1 = 0;var c2 = 0;var c3 = 0;var c4 = 0;var byte1 = 0;var byte2 = 0;var byte3 = 0;(c1) = CapexBase64Decoder.fromLookupChar(ch);(c2) = CapexBase64Decoder.fromLookupChar((ch) = iter.getNextChar());(byte1) = (((c1) << (2)) + ((c2) >> (4)));(data) = CapexBase64Decoder.appendByte(data, byte1);(ch) = iter.getNextChar();if((ch) === ('=')) {(done) = (true);}else {(c3) = CapexBase64Decoder.fromLookupChar(ch);}(byte2) = (((c2) & (15)) << (4)) + ((c3) >> (2));(data) = CapexBase64Decoder.appendByte(data, byte2);if(!(done)) {(ch) = iter.getNextChar();if((ch) === ('=')) {(done) = (true);}else {(c4) = CapexBase64Decoder.fromLookupChar(ch);}(byte3) = (((c3) & (3)) << (6)) + (c4);(data) = CapexBase64Decoder.appendByte(data, byte3);}if(done) {break;}}}return(data);};var CapexBase64Encoder = function() {{} };var P = CapexBase64Encoder.prototype;P.constructor = CapexBase64Encoder;P._t = {}; P._t["CapexBase64Encoder"] = true;CapexBase64Encoder.createInstance = function() {var _v = new CapexBase64Encoder();return(_v._construct());};P._construct = function() {return(this);};CapexBase64Encoder.encodeString = function(str) {if((str) == (null)) {return(null);}return(CapexBase64Encoder.encode(CapeString.toUTF8Buffer(str)));};CapexBase64Encoder.encode = function(buffer) {if((buffer) == (null)) {return(null);}var sb = CapeStringBuilder.createInstance();var i = 0;var b64i = 0;var size = CapeBuffer.getSize(buffer);while((i) < (size)) {(b64i) = (CapeBuffer.getByte(buffer, i) >> (2));sb.appendCharacter(CapexBase64Encoder.toASCIIChar(b64i));(b64i) = ((CapeBuffer.getByte(buffer, i) & (3)) << (4));if((i) + (1) < (size)) {(b64i) += (CapeBuffer.getByte(buffer, (i) + (1)) >> (4));sb.appendCharacter(CapexBase64Encoder.toASCIIChar(b64i));(b64i) = ((CapeBuffer.getByte(buffer, (i) + (1)) & (15)) << (2));if((i) + (2) < (size)) {(b64i) += (CapeBuffer.getByte(buffer, (i) + (2)) >> (6));sb.appendCharacter(CapexBase64Encoder.toASCIIChar(b64i));(b64i) = (CapeBuffer.getByte(buffer, (i) + (2)) & (63));sb.appendCharacter(CapexBase64Encoder.toASCIIChar(b64i));}else {sb.appendCharacter(CapexBase64Encoder.toASCIIChar(b64i));sb.appendString("=");}}else {sb.appendCharacter(CapexBase64Encoder.toASCIIChar(b64i));sb.appendString("==");}(i) += (3);}if((sb) !== (null)) {return(sb.toString());}return(null);};CapexBase64Encoder.toASCIIChar = function(lookup) {var c = 0;if((lookup) < (0) || (lookup) > (63)) {return(String.fromCharCode(c));}if((lookup) <= (25)) {(c) = (lookup) + (65);}else {if((lookup) <= (51)) {(c) = (lookup) + (71);}else {if((lookup) <= (61)) {(c) = (lookup) - (4);}else {if((lookup) === (62)) {(c) = ('+'.charCodeAt());}else {if((lookup) === (63)) {(c) = ('/'.charCodeAt());}}}}}return(String.fromCharCode(c));};var CapexBitmapBuffer = function() {this.buffer = null;this.width = null;this.height = null;{} };var P = CapexBitmapBuffer.prototype;P.constructor = CapexBitmapBuffer;P._t = {}; P._t["CapexBitmapBuffer"] = true;CapexBitmapBuffer.createInstance = function() {var _v = new CapexBitmapBuffer();return(_v._construct());};P._construct = function() {(this.height) = (0);(this.width) = (0);(this.buffer) = (null);return(this);};CapexBitmapBuffer.create = function(b, w, h) {if((b) == (null) || CapeBuffer.getSize(b) < (4) || (w) < (1) || (h) < (1)) {return(null);}return(CapexBitmapBuffer.createInstance().setBuffer(b).setWidth(w).setHeight(h));};P.getBuffer = function() {return(this.buffer);};P.setBuffer = function(v) {(this.buffer) = (v);return(this);};P.getWidth = function() {return(this.width);};P.setWidth = function(v) {(this.width) = (v);return(this);};P.getHeight = function() {return(this.height);};P.setHeight = function(v) {(this.height) = (v);return(this);};var CapexBlockCipher = function() {{} };var P = CapexBlockCipher.prototype;P.constructor = CapexBlockCipher;P._t = {}; P._t["CapexBlockCipher"] = true;CapexBlockCipher.createInstance = function() {var _v = new CapexBlockCipher();return(_v._construct());};P._construct = function() {return(this);};CapexBlockCipher.encryptString = function(data, cipher) {if((data) == (null)) {return(null);}return(CapexBlockCipher.encryptBuffer(CapeString.toUTF8Buffer(data), cipher));};CapexBlockCipher.decryptString = function(data, cipher) {var db = CapexBlockCipher.decryptBuffer(data, cipher);if((db) == (null)) {return(null);}return(CapeString.forUTF8Buffer(db));};CapexBlockCipher.encryptBuffer = function(data, cipher) {if((cipher) == (null) || (data) == (null)) {return(null);}var bw = CapeBufferWriter.createInstance();if((bw) == (null)) {return(null);}var ww = CapexBlockCipherWriter.create(bw, cipher);if((ww) == (null)) {return(null);}var r = ww.write(data, -(1));ww.close();if((r) < CapeBuffer.getSize(data)) {return(null);}return(bw.getBuffer());};CapexBlockCipher.decryptBuffer = function(data, cipher) {if((cipher) == (null) || (data) == (null)) {return(null);}var br = CapeBufferReader.forBuffer(data);if((br) == (null)) {return(null);}var rr = CapexBlockCipherReader.create(br, cipher);if((rr) == (null)) {return(null);}var db = CapeBuffer.allocate(CapeBuffer.getSize(data));if((db) == (null)) {return(null);}var ll = rr.read(db);if((ll) < (0)) {return(null);}if((ll) < CapeBuffer.getSize(db)) {CapeBuffer.allocate(ll);}return(db);};P.getBlockSize = function() {};P.encryptBlock = function(src, dest) {};P.decryptBlock = function(src, dest) {};var CapexBlockCipherReader = function() {this.cipher = null;this.reader = null;this.bcurrent = null;this.csize = null;this.cindex = null;this.bnext = null;this.nsize = null;this.ddata = null;{} };var P = CapexBlockCipherReader.prototype;P.constructor = CapexBlockCipherReader;P._t = {}; P._t["CapexBlockCipherReader"] = true;P._t["CapeReader"] = true;P._t["CapeSizedReader"] = true;P._t["CapeReader"] = true;P._t["CapeSeekableReader"] = true;P._t["CapeReader"] = true;CapexBlockCipherReader.createInstance = function() {var _v = new CapexBlockCipherReader();return(_v._construct());};P._construct = function() {(this.ddata) = (null);(this.nsize) = (0);(this.bnext) = (null);(this.cindex) = (0);(this.csize) = (0);(this.bcurrent) = (null);(this.reader) = (null);(this.cipher) = (null);return(this);};CapexBlockCipherReader.create = function(reader, cipher) {if((reader) == (null)) {return(null);}if((cipher) == (null)) {return(reader);}var v = CapexBlockCipherReader.createInstance();v.reader = (reader);v.cipher = (cipher);v.bcurrent = CapeBuffer.allocate(cipher.getBlockSize());v.bnext = CapeBuffer.allocate(cipher.getBlockSize());v.ddata = CapeBuffer.allocate(cipher.getBlockSize());v.csize = (0);v.cindex = (0);v.nsize = (0);return(v);};P.getSize = function() {if((this.reader) !== (null)) {return(this.reader.getSize());}return(0);};P.setCurrentPosition = function(n) {var rem = (n) % this.cipher.getBlockSize();var ss = (n) - (rem);(this.csize) = (0);(this.cindex) = (0);(this.nsize) = (0);var v = false;if((this.reader) !== (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (this.reader, "CapeSeekableReader"))) {(v) = this.reader.setCurrentPosition(ss);}if((v) && (rem) > (0)) {var bb = CapeBuffer.allocate(rem);if(this.read(bb) !== (rem)) {(v) = (false);}}return(v);};P.getCurrentPosition = function() {if((this.reader) !== (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (this.reader, "CapeSeekableReader"))) {return(this.reader.getCurrentPosition());}return(-(1));};P.read = function(buf) {if((buf) == (null) || CapeBuffer.getSize(buf) < (1)) {return(0);}var ptr = buf;if((ptr) == (null)) {return(0);}var v = 0;var bs = this.cipher.getBlockSize();while((v) < CapeBuffer.getSize(buf)) {var x = bs;if((v) + (x) > CapeBuffer.getSize(buf)) {(x) = CapeBuffer.getSize(buf) - (v);}var r = this.readBlock(ptr, v, x);if((r) < (1)) {break;}(v) += (r);}return(v);};P.readAndDecrypt = function(buf) {var v = this.reader.read(this.ddata);if((v) === this.cipher.getBlockSize()) {this.cipher.decryptBlock(this.ddata, buf);}else {CapeBuffer.copyFrom(this.ddata, buf, 0, 0, v);}return(v);};P.readBlock = function(ptr, offset, size) {if((this.cindex) >= (this.csize)) {(this.csize) = (0);}if((this.nsize) < (1)) {(this.nsize) = this.readAndDecrypt(this.bnext);}if((this.csize) < (1)) {if((this.nsize) < this.cipher.getBlockSize()) {return(0);}var nn = this.bcurrent;(this.bcurrent) = (this.bnext);(this.csize) = (this.nsize);(this.cindex) = (0);(this.bnext) = (nn);(this.nsize) = this.readAndDecrypt(this.bnext);}var data = this.cipher.getBlockSize();if((this.nsize) < this.cipher.getBlockSize()) {var ptr2 = this.bnext;if((ptr2) !== (null)) {(data) -= CapeBuffer.getByte(ptr2, 0);}}(data) -= (this.cindex);if((data) < (1)) {(this.csize) = (0);return(this.readBlock(ptr, offset, size));}if((data) < (size)) {CapeBuffer.copyFrom(this.bcurrent, ptr, this.cindex, offset, data);(this.cindex) += (data);return(data);}CapeBuffer.copyFrom(this.bcurrent, ptr, this.cindex, offset, size);(this.cindex) += (size);return(size);};var CapexBlockCipherWriter = function() {this.cipher = null;this.writer = null;this.bsize = null;this.bcurr = null;this.bdata = null;this.outbuf = null;{} };var P = CapexBlockCipherWriter.prototype;P.constructor = CapexBlockCipherWriter;P._t = {}; P._t["CapexBlockCipherWriter"] = true;P._t["CapeWriter"] = true;P._t["CapeSeekableWriter"] = true;P._t["CapeWriter"] = true;CapexBlockCipherWriter.createInstance = function() {var _v = new CapexBlockCipherWriter();return(_v._construct());};P._construct = function() {(this.outbuf) = (null);(this.bdata) = (null);(this.bcurr) = (0);(this.bsize) = (0);(this.writer) = (null);(this.cipher) = (null);return(this);};CapexBlockCipherWriter.create = function(writer, cipher) {if((writer) == (null) || (cipher) == (null)) {return(null);}var v = CapexBlockCipherWriter.createInstance();v.writer = (writer);v.cipher = (cipher);v.bsize = cipher.getBlockSize();v.bcurr = (0);v.bdata = CapeBuffer.allocate(cipher.getBlockSize());v.outbuf = CapeBuffer.allocate(cipher.getBlockSize());return(v);};P.close = function() {if((this.writer) !== (null) && (this.bdata) !== (null)) {var bb = CapeBuffer.allocate(1);var bbptr = bb;if((this.bcurr) > (0)) {var n = 0;for((n) = (this.bcurr) ; (n) < (this.bsize) ; (n)++) {CapeBuffer.setByte(this.bdata, n, 0);}this.writeCompleteBlock(this.bdata);CapeBuffer.setByte(bbptr, 0, (this.bsize) - (this.bcurr));this.writer.write(bb, -(1));}else {CapeBuffer.setByte(bbptr, 0, 0);this.writer.write(bb, -(1));}}(this.writer) = (null);(this.cipher) = (null);(this.bdata) = (null);};P.setCurrentPosition = function(n) {if((this.writer) !== (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (this.writer, "CapeSeekableWriter"))) {return(this.writer.setCurrentPosition(n));}return(false);};P.getCurrentPosition = function() {if((this.writer) !== (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (this.writer, "CapeSeekableWriter"))) {return(this.writer.getCurrentPosition());}return(-(1));};P.writeCompleteBlock = function(buf) {this.cipher.encryptBlock(buf, this.outbuf);if(this.writer.write(this.outbuf, -(1)) === CapeBuffer.getSize(this.outbuf)) {return(true);}return(false);};P.writeBlock = function(buf) {var size = CapeBuffer.getSize(buf);if((this.bcurr) + (size) < (this.bsize)) {var bufptr = buf;CapeBuffer.copyFrom(bufptr, this.bdata, 0, this.bcurr, size);(this.bcurr) += (size);return(size);}if((this.bcurr) > (0)) {var bufptr = buf;var x = (this.bsize) - (this.bcurr);CapeBuffer.copyFrom(bufptr, this.bdata, 0, this.bcurr, x);if(this.writeCompleteBlock(this.bdata) === (false)) {return(0);}(this.bcurr) = (0);if((x) === (size)) {return(x);}return((x) + this.writeBlock(CapeBuffer.getSubBuffer(buf, x, (size) - (x), false)));}if(this.writeCompleteBlock(buf) === (false)) {return(0);}return(this.bsize);};P.write = function(buf, asize) {if((buf) == (null)) {return(0);}var bufptr = buf;if((bufptr) == (null)) {return(0);}var size = asize;if((size) < (0)) {(size) = CapeBuffer.getSize(buf);}if((size) < (1)) {return(0);}var v = 0;var n = 0;for((n) = (0) ; (n) < (size) ; (n) += (this.bsize)) {var x = this.bsize;if((n) + (x) > (size)) {(x) = (size) - (n);}(v) += this.writeBlock(CapeBuffer.getSubBuffer(buf, n, x, false));}return(v);};var CapexGeoLocation = function() {this.latitude = null;this.longitude = null;{} };var P = CapexGeoLocation.prototype;P.constructor = CapexGeoLocation;P._t = {}; P._t["CapexGeoLocation"] = true;CapexGeoLocation.createInstance = function() {var _v = new CapexGeoLocation();return(_v._construct());};P._construct = function() {(this.longitude) = (0.0);(this.latitude) = (0.0);return(this);};P.getLatitude = function() {return(this.latitude);};P.setLatitude = function(v) {(this.latitude) = (v);return(this);};P.getLongitude = function() {return(this.longitude);};P.setLongitude = function(v) {(this.longitude) = (v);return(this);};var CapexGeoLocationManager = function() {this.listeners = null;{} };var P = CapexGeoLocationManager.prototype;P.constructor = CapexGeoLocationManager;P._t = {}; P._t["CapexGeoLocationManager"] = true;CapexGeoLocationManager.forApplicationContext = function(context) {return(null);};CapexGeoLocationManager.createInstance = function() {var _v = new CapexGeoLocationManager();return(_v._construct());};P._construct = function() {(this.listeners) = (null);(this.listeners) = (new Array());return(this);};P.addListener = function(l) {this.listeners.push(l);};P.removeListener = function(l) {CapeVector.removeValue(this.listeners, l);};P.removeAllListeners = function() {CapeVector.clear(this.listeners);};P.notifyListeners = function(location) {if((this.listeners) !== (null)) {var n = 0;var m = this.listeners.length;for((n) = (0) ; (n) < (m) ; (n)++) {var listener = this.listeners[n];if((listener) !== (null)) {if((listener) !== (null)) {listener(location);}}}}};P.startLocationUpdates = function(callback) {};P.stopLocationUpdates = function() {};var CapexGreyscaleImage = function() {{} };var P = CapexGreyscaleImage.prototype;P.constructor = CapexGreyscaleImage;P._t = {}; P._t["CapexGreyscaleImage"] = true;CapexGreyscaleImage.createInstance = function() {var _v = new CapexGreyscaleImage();return(_v._construct());};P._construct = function() {return(this);};CapexGreyscaleImage.createGreyscale = function(bmpbuf, rf, gf, bf, af) {var w = bmpbuf.getWidth();var h = bmpbuf.getHeight();var srcbuf = bmpbuf.getBuffer();if((srcbuf) == (null) || (w) < (1) || (h) < (1)) {return(null);}var desbuf = new ArrayBuffer((w) * (h) * (4));if((desbuf) == (null)) {return(null);}var ss = CapeBuffer.getSize(srcbuf);var srcptr = srcbuf;var desptr = desbuf;var x = 0;var y = 0;for((y) = (0) ; (y) < (h) ; (y)++) {for((x) = (0) ; (x) < (w) ; (x)++) {var sr = CapexImageFilterUtil.getSafeByte(srcptr, ss, ((y) * (w) + (x)) * (4) + (0)) * (0.2126);var sg = CapexImageFilterUtil.getSafeByte(srcptr, ss, ((y) * (w) + (x)) * (4) + (1)) * (0.7152);var sb = CapexImageFilterUtil.getSafeByte(srcptr, ss, ((y) * (w) + (x)) * (4) + (2)) * (0.0722);var sa = CapexImageFilterUtil.getSafeByte(srcptr, ss, ((y) * (w) + (x)) * (4) + (3));var sbnw = ~~((sr) + (sg) + (sb));CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (0), CapexImageFilterUtil.clamp((sbnw) * (rf)));CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (1), CapexImageFilterUtil.clamp((sbnw) * (gf)));CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (2), CapexImageFilterUtil.clamp((sbnw) * (bf)));CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (3), CapexImageFilterUtil.clamp((sa) * (af)));}}return(CapexBitmapBuffer.create(desbuf, w, h));};CapexGreyscaleImage.createRedSepia = function(imgbuf) {return(CapexGreyscaleImage.createGreyscale(imgbuf, (110.0) / (255.0) + (1.0), (66.0) / (255.0) + (1.0), (20.0) / (255.0) + (1.0), 1.0));};var CapexHTMLString = function() {{} };var P = CapexHTMLString.prototype;P.constructor = CapexHTMLString;P._t = {}; P._t["CapexHTMLString"] = true;CapexHTMLString.createInstance = function() {var _v = new CapexHTMLString();return(_v._construct());};P._construct = function() {return(this);};CapexHTMLString.sanitize = function(str) {if((str) == (null)) {return(null);}if(CapeString.indexOfWithStringAndCharacterAndSignedInteger(str, '<', 0) < (0) && CapeString.indexOfWithStringAndCharacterAndSignedInteger(str, '>', 0) < (0) && CapeString.indexOfWithStringAndCharacterAndSignedInteger(str, '&', 0) < (0)) {return(str);}var it = CapeString.iterate(str);if((it) == (null)) {return(null);}var sb = CapeStringBuilder.createInstance();var c = ' ';while(((c) = it.getNextChar()).charCodeAt() > (0)) {if((c) === ('<')) {sb.appendString("&lt;");}else {if((c) === ('>')) {sb.appendString("&gt;");}else {if((c) === ('&')) {sb.appendString("&amp;");}else {sb.appendCharacter(c);}}}}return(sb.toString());};CapexHTMLString.toQuotedString = function(str) {var sb = CapeStringBuilder.createInstance();sb.appendCharacter('\"');if(!((str) == (null))) {var it = CapeString.iterate(str);while((it) !== (null)) {var c = it.getNextChar();if((c).charCodeAt() < (1)) {break;}if((c) === ('\"')) {sb.appendCharacter('\\');sb.appendCharacter('\"');}else {sb.appendCharacter(c);}}}sb.appendCharacter('\"');return(sb.toString());};var CapexImageFilter = function() {{} };var P = CapexImageFilter.prototype;P.constructor = CapexImageFilter;CapexImageFilter.RESIZE_TYPE_BILINEAR = 0;CapexImageFilter.RESIZE_TYPE_BICUBIC = 1;P._t = {}; P._t["CapexImageFilter"] = true;CapexImageFilter.createInstance = function() {var _v = new CapexImageFilter();return(_v._construct());};P._construct = function() {return(this);};CapexImageFilter.resizeImage = function(bmpbuf, nw, nh, type) {if((bmpbuf) == (null)) {return(null);}if((type) === (CapexImageFilter.RESIZE_TYPE_BICUBIC)) {return(CapexImageResizer.resizeBicubic(bmpbuf, nw, nh));}return(CapexImageResizer.resizeBilinear(bmpbuf, nw, nh));};CapexImageFilter.filterGreyscale = function(bmpbuf) {if((bmpbuf) == (null)) {return(null);}return(CapexGreyscaleImage.createGreyscale(bmpbuf, 1.0, 1.0, 1.0, 1.0));};CapexImageFilter.filterRedSepia = function(bmpbuf) {if((bmpbuf) == (null)) {return(null);}return(CapexGreyscaleImage.createRedSepia(bmpbuf));};CapexImageFilter.filterBlur = function(bmpbuf) {if((bmpbuf) == (null)) {return(null);}var array = [0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0];return(CapexImageFilterUtil.createForArrayFilter(bmpbuf, array, 5, 5, (1.0) / (13.0), 1.0));};CapexImageFilter.filterSharpen = function(bmpbuf) {if((bmpbuf) == (null)) {return(null);}var array = [-(1.0), -(1.0), -(1.0), -(1.0), 9.0, -(1.0), -(1.0), -(1.0), -(1.0)];return(CapexImageFilterUtil.createForArrayFilter(bmpbuf, array, 3, 3, 1.0, 1.0));};CapexImageFilter.filterEmboss = function(bmpbuf) {if((bmpbuf) == (null)) {return(null);}var array = [-(2.0), -(1.0), 0.0, -(1.0), 1.0, 1.0, 0.0, 1.0, 2.0];return(CapexImageFilterUtil.createForArrayFilter(bmpbuf, array, 3, 3, 2.0, 0.0));};CapexImageFilter.filterMotionBlur = function(bmpbuf) {if((bmpbuf) == (null)) {return(null);}var array = [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0];return(CapexImageFilterUtil.createForArrayFilter(bmpbuf, array, 9, 9, (1.0) / (9.0), 1.0));};var CapexImageFilterUtil = function() {{} };var P = CapexImageFilterUtil.prototype;P.constructor = CapexImageFilterUtil;P._t = {}; P._t["CapexImageFilterUtil"] = true;CapexImageFilterUtil.createInstance = function() {var _v = new CapexImageFilterUtil();return(_v._construct());};P._construct = function() {return(this);};CapexImageFilterUtil.clamp = function(v) {if((v) > (255)) {return(255);}if((v) < (0)) {return(0);}return(~~(v));};CapexImageFilterUtil.getSafeByte = function(p, sz, idx) {var i = idx;if((i) >= (sz)) {(i) = (sz) - (1);}else {if((i) < (0)) {(i) = (0);}}return(CapeBuffer.getByte(p, i));};CapexImageFilterUtil.createForArrayFilter = function(bmpbuf, filterArray, fw, fh, factor, bias) {var srcbuf = bmpbuf.getBuffer();var w = bmpbuf.getWidth();var h = bmpbuf.getHeight();if((w) < (1) || (h) < (1)) {return(null);}var desbuf = new ArrayBuffer((w) * (h) * (4));var x = 0;var y = 0;var srcptr = srcbuf;var desptr = desbuf;var sz = CapeBuffer.getSize(srcbuf);for((x) = (0) ; (x) < (w) ; (x)++) {for((y) = (0) ; (y) < (h) ; (y)++) {var sr = 0.0;var sg = 0.0;var sb = 0.0;var sa = 0.0;var fx = 0;var fy = 0;for((fy) = (0) ; (fy) < (fh) ; (fy)++) {for((fx) = (0) ; (fx) < (fw) ; (fx)++) {var ix = (x) - (fw) / (2) + (fx);var iy = (y) - (fh) / (2) + (fy);(sr) += CapexImageFilterUtil.getSafeByte(srcptr, sz, ((iy) * (w) + (ix)) * (4) + (0)) * (filterArray[(fy) * (fw) + (fx)]);(sg) += CapexImageFilterUtil.getSafeByte(srcptr, sz, ((iy) * (w) + (ix)) * (4) + (1)) * (filterArray[(fy) * (fw) + (fx)]);(sb) += CapexImageFilterUtil.getSafeByte(srcptr, sz, ((iy) * (w) + (ix)) * (4) + (2)) * (filterArray[(fy) * (fw) + (fx)]);(sa) += CapexImageFilterUtil.getSafeByte(srcptr, sz, ((iy) * (w) + (ix)) * (4) + (3)) * (filterArray[(fy) * (fw) + (fx)]);}}CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (0), CapexImageFilterUtil.clamp((factor) * (sr) + (bias)));CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (1), CapexImageFilterUtil.clamp((factor) * (sg) + (bias)));CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (2), CapexImageFilterUtil.clamp((factor) * (sb) + (bias)));CapeBuffer.setByte(desptr, ((y) * (w) + (x)) * (4) + (3), CapexImageFilterUtil.clamp((factor) * (sa) + (bias)));}}return(CapexBitmapBuffer.create(desbuf, w, h));};var CapexImageResizer = function() {{} };var P = CapexImageResizer.prototype;P.constructor = CapexImageResizer;CapexImageResizer.FIXED_SHIFT = 10;CapexImageResizer.unit = 0;P._t = {}; P._t["CapexImageResizer"] = true;CapexImageResizer.createInstance = function() {var _v = new CapexImageResizer();return(_v._construct());};P._construct = function() {return(this);};CapexImageResizer.li = function(src1, src2, a) {return(~~((a) * (src2) + ((1) - (a)) * (src1)));};CapexImageResizer.bilinearInterpolation = function(q11, q21, q12, q22, tx, ty) {return(CapexImageResizer.li(CapexImageResizer.li(q11, q21, tx), CapexImageResizer.li(q12, q22, tx), ty));};CapexImageResizer.resizeBilinear = function(bmpbuf, anw, anh) {if((anw) === (0) || (anh) === (0)) {return(null);}if((anw) < (0) && (anh) < (0)) {return(bmpbuf);}var src = bmpbuf.getBuffer();if((src) == (null)) {return(null);}var sz = CapeBuffer.getSize(src);var ow = bmpbuf.getWidth();var oh = bmpbuf.getHeight();if((ow) === (anw) && (oh) === (anh)) {return(bmpbuf);}if((sz) !== (ow) * (oh) * (4)) {return(null);}var nw = anw;var nh = anh;var scaler = 1.0;if((nw) < (0)) {(scaler) = (nh) / (oh);}else {if((nh) < (0)) {(scaler) = (nw) / (ow);}}if((scaler) !== (1.0)) {(nw) = (~~((ow) * (scaler)));(nh) = (~~((oh) * (scaler)));}var dest = new ArrayBuffer((nw) * (nh) * (4));if((dest) == (null)) {return(null);}var desp = dest;var srcp = src;var dx = 0;var dy = 0;var stepx = ((ow) - (1.0)) / ((nw) - (1.0));var stepy = ((oh) - (1.0)) / ((nh) - (1.0));for((dy) = (0) ; (dy) < (nh) ; (dy)++) {for((dx) = (0) ; (dx) < (nw) ; (dx)++) {var ptx = (dx) * (stepx);var pty = (dy) * (stepy);var ix = ~~(ptx);var iy = ~~(pty);var q11i = ((iy) * (ow) + (ix)) * (4);var q21i = ((iy) * (ow) + (ix) + (1)) * (4);var q12i = (((iy) + (1)) * (ow) + (ix)) * (4);var q22i = (((iy) + (1)) * (ow) + (ix) + (1)) * (4);var rq11 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q11i) + (0));var gq11 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q11i) + (1));var bq11 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q11i) + (2));var aq11 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q11i) + (3));var rq21 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q21i) + (0));var gq21 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q21i) + (1));var bq21 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q21i) + (2));var aq21 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q21i) + (3));var rq12 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q12i) + (0));var gq12 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q12i) + (1));var bq12 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q12i) + (2));var aq12 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q12i) + (3));var rq22 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q22i) + (0));var gq22 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q22i) + (1));var bq22 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q22i) + (2));var aq22 = CapexImageFilterUtil.getSafeByte(srcp, sz, (q22i) + (3));var resr = ~~(CapexImageResizer.bilinearInterpolation(rq11, rq21, rq12, rq22, (ptx) - (ix), (pty) - (iy)));var resg = ~~(CapexImageResizer.bilinearInterpolation(gq11, gq21, gq12, gq22, (ptx) - (ix), (pty) - (iy)));var resb = ~~(CapexImageResizer.bilinearInterpolation(bq11, bq21, bq12, bq22, (ptx) - (ix), (pty) - (iy)));var resa = ~~(CapexImageResizer.bilinearInterpolation(aq11, aq21, aq12, aq22, (ptx) - (ix), (pty) - (iy)));CapeBuffer.setByte(desp, ((dy) * (nw) + (dx)) * (4) + (0), resr);CapeBuffer.setByte(desp, ((dy) * (nw) + (dx)) * (4) + (1), resg);CapeBuffer.setByte(desp, ((dy) * (nw) + (dx)) * (4) + (2), resb);CapeBuffer.setByte(desp, ((dy) * (nw) + (dx)) * (4) + (3), resa);}}return(CapexBitmapBuffer.create(dest, nw, nh));};CapexImageResizer.untransformCoords = function(m, ix, iy, tu, tv, tw) {var x = (ix) + (0.5);var y = (iy) + (0.5);(tu[0]) = (m.v[0]) * ((x) + (0)) + (m.v[3]) * ((y) + (0)) + (m.v[6]);(tv[0]) = (m.v[1]) * ((x) + (0)) + (m.v[4]) * ((y) + (0)) + (m.v[7]);(tw[0]) = (m.v[2]) * ((x) + (0)) + (m.v[5]) * ((y) + (0)) + (m.v[8]);(tu[1]) = (m.v[0]) * ((x) - (1)) + (m.v[3]) * ((y) + (0)) + (m.v[6]);(tv[1]) = (m.v[1]) * ((x) - (1)) + (m.v[4]) * ((y) + (0)) + (m.v[7]);(tw[1]) = (m.v[2]) * ((x) - (1)) + (m.v[5]) * ((y) + (0)) + (m.v[8]);(tu[2]) = (m.v[0]) * ((x) + (0)) + (m.v[3]) * ((y) - (1)) + (m.v[6]);(tv[2]) = (m.v[1]) * ((x) + (0)) + (m.v[4]) * ((y) - (1)) + (m.v[7]);(tw[2]) = (m.v[2]) * ((x) + (0)) + (m.v[5]) * ((y) - (1)) + (m.v[8]);(tu[3]) = (m.v[0]) * ((x) + (1)) + (m.v[3]) * ((y) + (0)) + (m.v[6]);(tv[3]) = (m.v[1]) * ((x) + (1)) + (m.v[4]) * ((y) + (0)) + (m.v[7]);(tw[3]) = (m.v[2]) * ((x) + (1)) + (m.v[5]) * ((y) + (0)) + (m.v[8]);(tu[4]) = (m.v[0]) * ((x) + (0)) + (m.v[3]) * ((y) + (1)) + (m.v[6]);(tv[4]) = (m.v[1]) * ((x) + (0)) + (m.v[4]) * ((y) + (1)) + (m.v[7]);(tw[4]) = (m.v[2]) * ((x) + (0)) + (m.v[5]) * ((y) + (1)) + (m.v[8]);};CapexImageResizer.normalizeCoords = function(count, tu, tv, tw, su, sv) {var i = 0;for((i) = (0) ; (i) < (count) ; (i)++) {if((tw[i]) !== (0.0)) {(su[i]) = (tu[i]) / (tw[i]) - (0.5);(sv[i]) = (tv[i]) / (tw[i]) - (0.5);}else {(su[i]) = (tu[i]);(sv[i]) = (tv[i]);}}};CapexImageResizer.initFixedUnit = function() {(CapexImageResizer.unit) = (1) << (CapexImageResizer.FIXED_SHIFT);};CapexImageResizer.double2Fixed = function(val) {CapexImageResizer.initFixedUnit();return(~~((val) * (CapexImageResizer.unit)));};CapexImageResizer.fixed2Double = function(val) {CapexImageResizer.initFixedUnit();return((val) / (CapexImageResizer.unit));};CapexImageResizer.superSampleDtest = function(x0, y0, x1, y1, x2, y2, x3, y3) {return(CapeMath.absDouble((x0) - (x1)) > (CapeMath.M_SQRT2) || CapeMath.absDouble((x1) - (x2)) > (CapeMath.M_SQRT2) || CapeMath.absDouble((x2) - (x3)) > (CapeMath.M_SQRT2) || CapeMath.absDouble((x3) - (x0)) > (CapeMath.M_SQRT2) || CapeMath.absDouble((y0) - (y1)) > (CapeMath.M_SQRT2) || CapeMath.absDouble((y1) - (y2)) > (CapeMath.M_SQRT2) || CapeMath.absDouble((y2) - (y3)) > (CapeMath.M_SQRT2) || CapeMath.absDouble((y3) - (y0)) > (CapeMath.M_SQRT2));};CapexImageResizer.supersampleTest = function(x0, y0, x1, y1, x2, y2, x3, y3) {CapexImageResizer.initFixedUnit();return(CapeMath.absDouble((x0) - (x1)) > (CapexImageResizer.unit) || CapeMath.absDouble((x1) - (x2)) > (CapexImageResizer.unit) || CapeMath.absDouble((x2) - (x3)) > (CapexImageResizer.unit) || CapeMath.absDouble((x3) - (x0)) > (CapexImageResizer.unit) || CapeMath.absDouble((y0) - (y1)) > (CapexImageResizer.unit) || CapeMath.absDouble((y1) - (y2)) > (CapexImageResizer.unit) || CapeMath.absDouble((y2) - (y3)) > (CapexImageResizer.unit) || CapeMath.absDouble((y3) - (y0)) > (CapexImageResizer.unit));};CapexImageResizer.lerp = function(v1, v2, r) {CapexImageResizer.initFixedUnit();return((v1) * ((CapexImageResizer.unit) - (r)) + (v2) * (r) >> (CapexImageResizer.FIXED_SHIFT));};CapexImageResizer.sampleBi = function(pixels, x, y, color) {CapexImageResizer.initFixedUnit();var xscale = (x) & (CapexImageResizer.unit) - (1);var yscale = (y) & (CapexImageResizer.unit) - (1);var x0 = (x) >> (CapexImageResizer.FIXED_SHIFT);var y0 = (y) >> (CapexImageResizer.FIXED_SHIFT);var x1 = (x0) + (1);var y1 = (y0) + (1);var i = 0;var c0 = pixels.getRgbaPixel(x0, y0, true);var c1 = pixels.getRgbaPixel(x1, y0, true);var c2 = pixels.getRgbaPixel(x0, y1, true);var c3 = pixels.getRgbaPixel(x1, y1, true);(color[3]) = CapexImageResizer.lerp(CapexImageResizer.lerp(c0[3], c1[3], yscale), CapexImageResizer.lerp(c2[3], c3[3], yscale), xscale);if((color[3]) !== (0)) {for((i) = (0) ; (i) < (3) ; (i)++) {(color[i]) = CapexImageResizer.lerp(CapexImageResizer.lerp((c0[i]) * (c0[3]) / (255), (c1[i]) * (c1[3]) / (255), yscale), CapexImageResizer.lerp((c2[i]) * (c2[3]) / (255), (c3[i]) * (c3[3]) / (255), yscale), xscale);}}else {for((i) = (0) ; (i) < (3) ; (i)++) {(color[i]) = (0);}}};CapexImageResizer.getSample = function(pixels, xc, yc, x0, y0, x1, y1, x2, y2, x3, y3, cciv, level, color) {if((level) === (0) || CapexImageResizer.supersampleTest(x0, y0, x1, y1, x2, y2, x3, y3) === (false)) {var i = 0;var c = [];CapexImageResizer.sampleBi(pixels, xc, yc, c);for((i) = (0) ; (i) < (4) ; (i)++) {(color[i]) = (color[i]) + (c[i]);}}else {var tx = 0;var lx = 0;var rx = 0;var bx = 0;var tlx = 0;var trx = 0;var blx = 0;var brx = 0;var ty = 0;var ly = 0;var ry = 0;var by = 0;var tly = 0;var trz = 0;var bly = 0;var bry = 0;(tx) = ((x0) + (x1)) / (2);(tlx) = ((x0) + (xc)) / (2);(trx) = ((x1) + (xc)) / (2);(lx) = ((x0) + (x3)) / (2);(rx) = ((x1) + (x2)) / (2);(blx) = ((x2) + (xc)) / (2);(brx) = ((x3) + (xc)) / (2);(bx) = ((x3) + (x2)) / (2);(ty) = ((y0) + (y1)) / (2);(tly) = ((y0) + (yc)) / (2);(trz) = ((y1) + (yc)) / (2);(ly) = ((y0) + (y3)) / (2);(ry) = ((y1) + (y2)) / (2);(bly) = ((y3) + (yc)) / (2);(bry) = ((y2) + (yc)) / (2);(by) = ((y3) + (y2)) / (2);CapexImageResizer.getSample(pixels, tlx, tly, x0, y0, tx, ty, xc, yc, lx, ly, cciv, (level) - (1), color);CapexImageResizer.getSample(pixels, trx, trz, tx, ty, x1, y1, rx, ry, xc, yc, cciv, (level) - (1), color);CapexImageResizer.getSample(pixels, brx, bry, xc, yc, rx, ry, x2, y2, bx, by, cciv, (level) - (1), color);CapexImageResizer.getSample(pixels, blx, bly, lx, ly, xc, yc, bx, by, x3, y3, cciv, (level) - (1), color);}};CapexImageResizer.sampleAdapt = function(src, xc, yc, x0, y0, x1, y1, x2, y2, x3, y3, dest) {var cc = 0;var i = 0;var c = [];var cciv = 0;CapexImageResizer.getSample(src, CapexImageResizer.double2Fixed(xc), CapexImageResizer.double2Fixed(yc), CapexImageResizer.double2Fixed(x0), CapexImageResizer.double2Fixed(y0), CapexImageResizer.double2Fixed(x1), CapexImageResizer.double2Fixed(y1), CapexImageResizer.double2Fixed(x2), CapexImageResizer.double2Fixed(y2), CapexImageResizer.double2Fixed(x3), CapexImageResizer.double2Fixed(y3), cciv, 3, c);(cc) = (cciv);if((cc) === (0)) {(cc) = (1);}var aa = (c[3]) / (cc);CapeBuffer.setByte(dest.getBuf(), 3, aa);if((aa) !== (0)) {for((i) = (0) ; (i) < (3) ; (i)++) {CapeBuffer.setByte(dest.getBuf(), i, (c[i]) / (cc) * (255) / (aa));}}else {for((i) = (0) ; (i) < (3) ; (i)++) {CapeBuffer.setByte(dest.getBuf(), i, 0);}}};CapexImageResizer.drawableTransformCubic = function(x, jm1, j, jp1, jp2) {return((j) + (0.5) * (x) * ((jp1) - (jm1) + (x) * ((2.0) * (jm1) - (5.0) * (j) + (4.0) * (jp1) - (jp2) + (x) * ((3.0) * ((j) - (jp1)) + (jp2) - (jm1)))));};CapexImageResizer.cubicRow = function(dx, row) {return(~~(CapexImageResizer.drawableTransformCubic(dx, CapeBuffer.getByte(row.getBuf(), 0), CapeBuffer.getByte(row.getBuf(), 4), CapeBuffer.getByte(row.getBuf(), 8), CapeBuffer.getByte(row.getBuf(), 12))));};CapexImageResizer.cubicScaledRow = function(dx, row, arow) {return(~~(CapexImageResizer.drawableTransformCubic(dx, CapeBuffer.getByte(row.getBuf(), 0) * CapeBuffer.getByte(arow.getBuf(), 0), CapeBuffer.getByte(row.getBuf(), 4) * CapeBuffer.getByte(arow.getBuf(), 4), CapeBuffer.getByte(row.getBuf(), 8) * CapeBuffer.getByte(arow.getBuf(), 8), CapeBuffer.getByte(row.getBuf(), 12) * CapeBuffer.getByte(arow.getBuf(), 12))));};CapexImageResizer.sampleCubic = function(src, su, sv, dest) {var aval = 0.0;var arecip = 0.0;var i = 0;var iu = ~~(CapeMath.floor(su));var iv = ~~(CapeMath.floor(sv));var stride = src.getStride();var du = 0.0;var dv = 0.0;var br = src.getBufferRegion((iu) - (1), (iv) - (1), false);if((br) == (null)) {return;}dest.setBuf(br);(du) = (su) - (iu);(dv) = (sv) - (iv);(aval) = CapexImageResizer.drawableTransformCubic(dv, CapexImageResizer.cubicRow(du, dest.move((3) + (stride) * (0))), CapexImageResizer.cubicRow(du, dest.move((3) + (stride) * (1))), CapexImageResizer.cubicRow(du, dest.move((3) + (stride) * (2))), CapexImageResizer.cubicRow(du, dest.move((3) + (stride) * (3))));if((aval) <= (0)) {(arecip) = (0.0);CapeBuffer.setByte(dest.getBuf(), 3, 0);}else {if((aval) > (255.0)) {(arecip) = (1.0) / (aval);CapeBuffer.setByte(dest.getBuf(), 3, 255);}else {(arecip) = (1.0) / (aval);CapeBuffer.setByte(dest.getBuf(), 3, ~~(CapeMath.rint(aval)));}}for((i) = (0) ; (i) < (3) ; (i)++) {var v = ~~(CapeMath.rint((arecip) * CapexImageResizer.drawableTransformCubic(dv, CapexImageResizer.cubicScaledRow(du, dest.move((i) + (stride) * (0)), dest.move((3) + (stride) * (0))), CapexImageResizer.cubicScaledRow(du, dest.move((i) + (stride) * (1)), dest.move((3) + (stride) * (1))), CapexImageResizer.cubicScaledRow(du, dest.move((i) + (stride) * (2)), dest.move((3) + (stride) * (2))), CapexImageResizer.cubicScaledRow(du, dest.move((i) + (stride) * (3)), dest.move((3) + (stride) * (3))))));CapeBuffer.setByte(dest.getBuf(), i, CapexImageFilterUtil.clamp(v));}};CapexImageResizer.resizeBicubic = function(bb, anw, anh) {if((anw) === (0) || (anh) === (0)) {return(null);}if((anw) < (0) && (anh) < (0)) {return(bb);}var sb = bb.getBuffer();if((sb) == (null)) {return(null);}var w = bb.getWidth();var h = bb.getHeight();var scaler = 1.0;var nw = anw;var nh = anh;if((nw) < (0)) {(scaler) = (nh) / (h);}else {if((nh) < (0)) {(scaler) = (nw) / (w);}}if((scaler) !== (1.0)) {(nw) = (~~((w) * (scaler)));(nh) = (~~((h) * (scaler)));}var v = new ArrayBuffer((nw) * (nh) * (4));var destp = null;destp.setBuf(v);var y = 0;var sx = (nw) / (w);var sy = (nh) / (h);var matrix = CapexMatrix33.forScale(sx, sy);(matrix) = CapexMatrix33.invertMatrix(matrix);var uinc = matrix.v[0];var vinc = matrix.v[1];var winc = matrix.v[2];var pixels = CapexRGBAPixelIntegerBuffer.create(sb, w, h);var pixrgn = CapexPixelRegionBuffer.forRgbaPixels(pixels, 4, 4);var tu = [];var tv = [];var tw = [];var su = [];var sv = [];for((y) = (0) ; (y) < (nh) ; (y)++) {CapexImageResizer.untransformCoords(matrix, 0, y, tu, tv, tw);var width = nw;while((width)-- > (0)) {var i = 0;CapexImageResizer.normalizeCoords(5, tu, tv, tw, su, sv);if(CapexImageResizer.superSampleDtest(su[1], sv[1], su[2], sv[2], su[3], sv[3], su[4], sv[4])) {CapexImageResizer.sampleAdapt(pixels, su[0], sv[0], su[1], sv[1], su[2], sv[2], su[3], sv[3], su[4], sv[4], destp);}else {CapexImageResizer.sampleCubic(pixrgn, su[0], sv[0], destp);}(destp) = destp.move(4);for((i) = (0) ; (i) < (5) ; (i)++) {(tu[i]) = (tu[i]) + (uinc);(tv[i]) = (tv[i]) + (vinc);(tw[i]) = (tw[i]) + (winc);}}}return(CapexBitmapBuffer.create(v, nw, nh));};var P2 = P;CapexImageResizer.IndexMovingBuffer = function() {this.buf = null;this.index = null;{} };var P = CapexImageResizer.IndexMovingBuffer.prototype;P.constructor = CapexImageResizer.IndexMovingBuffer;P._t = {}; P._t["CapexImageResizer.IndexMovingBuffer"] = true;CapexImageResizer.IndexMovingBuffer.createInstance = function() {var _v = new CapexImageResizer.IndexMovingBuffer();return(_v._construct());};P._construct = function() {(this.index) = (0);(this.buf) = (null);return(this);};P.move = function(n) {var v = CapexImageResizer.IndexMovingBuffer.createInstance();v.setBuf(this.buf);v.setIndex(v.getIndex() + (n));return(v);};P.getBuf = function() {return(this.buf);};P.setBuf = function(v) {(this.buf) = (v);return(this);};P.getIndex = function() {return(this.index);};P.setIndex = function(v) {(this.index) = (v);return(this);};P = P2;P2 = null;var CapexJSONAPIClient = function() {this.apiUrl = null;{} };var P = CapexJSONAPIClient.prototype;P.constructor = CapexJSONAPIClient;P._t = {}; P._t["CapexJSONAPIClient"] = true;CapexJSONAPIClient.createInstance = function() {var _v = new CapexJSONAPIClient();return(_v._construct());};P._construct = function() {(this.apiUrl) = (null);return(this);};P.getFullURL = function(api) {var url = this.apiUrl;if(CapeString.isEmpty(url)) {(url) = ("/");}if((url) === ("/")) {if(CapeString.startsWithWithStringAndStringAndSignedInteger(api, "/", 0)) {return(api);}return(url + api);}if(CapeString.endsWithWithStringAndString(url, "/")) {if(CapeString.startsWithWithStringAndStringAndSignedInteger(api, "/", 0)) {return(url + CapeString.getSubStringWithStringAndSignedInteger(api, 1));}return(url + api);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(api, "/", 0)) {return(url + api);}return(url + "/" + api);};P.toUTF8Buffer = function(data) {if((data) == (null)) {return(null);}return(CapeString.toUTF8Buffer(CapeJSONEncoder.encode(data, true)));};P.customizeRequestHeaders = function(headers) {};P.onStartSendRequest = function() {};P.onEndSendRequest = function() {};P.onDefaultErrorHandler = function(error) {};P.handleAsError = function(response, callback) {var error = this.toError(response);if((error) !== (null)) {this.onErrorWithErrorAndFunction(error, callback);return(true);}return(false);};P.toError = function(response) {if((response) == (null)) {return(CapeError.forCode("noServerResponse", null));}if(response.getString("status", null) === ("error")) {var v = CapeError.createInstance();v.setCode(response.getString("code", null));v.setMessage(response.getString("message", null));v.setDetail(response.getString("detail", null));return(v);}return(null);};P.onErrorWithErrorAndFunction = function(error, callback) {if((callback) !== (null)) {callback(error);}else {this.onDefaultErrorHandler(error);}};P.onErrorWithError = function(error) {this.onErrorWithErrorAndFunction(error, null);};P.sendRequest = function(method, url, headers, data, callback, errorCallback) {if((callback) == (null)) {return;}var hrs = headers;if((headers) == (null)) {(hrs) = CapeKeyValueList.createInstance();hrs.addKAndV("Content-Type", "application/json");}var webClient = CapexNativeWebClient.instance();if((webClient) == (null)) {this.onErrorWithErrorAndFunction(CapeError.forCode("noWebClient", null), errorCallback);return;}var ll = callback;this.customizeRequestHeaders(hrs);this.onStartSendRequest();var ecb = errorCallback;webClient.query(method, url, hrs, data, function(status, responseHeaders, data){this.onEndSendRequest();if((data) == (null)) {this.onErrorWithErrorAndFunction(CapeError.forCode("failedToConnect", null), ecb);return;}var tjsonResponseBody = CapeJSONParser.parseString(CapeString.forUTF8Buffer(data));var jsonResponseBody = null;if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (tjsonResponseBody, "CapeDynamicMap"))) {(jsonResponseBody) = (tjsonResponseBody);}if((jsonResponseBody) == (null)) {this.onErrorWithErrorAndFunction(CapeError.forCode("invalidServerResponse", null), ecb);return;}if(this.handleAsError(jsonResponseBody, ecb) === (false)) {ll(jsonResponseBody);}}.bind(this));};P.doGet = function(url, callback, errorCallback) {this.sendRequest("GET", this.getFullURL(url), null, null, callback, errorCallback);};P.doPost = function(url, data, callback, errorCallback) {this.sendRequest("POST", this.getFullURL(url), null, this.toUTF8Buffer(data), callback, errorCallback);};P.doPut = function(url, data, callback, errorCallback) {this.sendRequest("PUT", this.getFullURL(url), null, this.toUTF8Buffer(data), callback, errorCallback);};P.doDelete = function(url, callback, errorCallback) {this.sendRequest("DELETE", this.getFullURL(url), null, null, callback, errorCallback);};P.uploadFile = function(url, data, mimeType, callback, errorCallback) {var mt = mimeType;if(CapeString.isEmpty(mt)) {(mt) = ("application/octet-stream");}var hdrs = CapeKeyValueList.createInstance();hdrs.addKAndV("content-type", mt);this.sendRequest("POST", this.getFullURL(url), hdrs, data, callback, errorCallback);};P.getApiUrl = function() {return(this.apiUrl);};P.setApiUrl = function(v) {(this.apiUrl) = (v);return(this);};var CapexMatrix33 = function() {this.v = null;{} };var P = CapexMatrix33.prototype;P.constructor = CapexMatrix33;P._t = {}; P._t["CapexMatrix33"] = true;CapexMatrix33.createInstance = function() {var _v = new CapexMatrix33();return(_v._construct());};P._construct = function() {(this.v) = ([]);return(this);};CapexMatrix33.forZero = function() {return(CapexMatrix33.forValues([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]));};CapexMatrix33.forIdentity = function() {return(CapexMatrix33.forValues([1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix33.invertMatrix = function(m) {var d = (m.v[0]) * (m.v[4]) * (m.v[8]) + (m.v[3]) * (m.v[7]) * (m.v[2]) + (m.v[6]) * (m.v[1]) * (m.v[5]) - (m.v[0]) * (m.v[7]) * (m.v[5]) - (m.v[3]) * (m.v[1]) * (m.v[8]) - (m.v[6]) * (m.v[4]) * (m.v[2]);var v = CapexMatrix33.createInstance();(v.v[0]) = ((m.v[4]) * (m.v[8]) - (m.v[7]) * (m.v[5])) / (d);(v.v[3]) = ((m.v[6]) * (m.v[5]) - (m.v[3]) * (m.v[8])) / (d);(v.v[6]) = ((m.v[3]) * (m.v[7]) - (m.v[6]) * (m.v[4])) / (d);(v.v[1]) = ((m.v[7]) * (m.v[2]) - (m.v[1]) * (m.v[8])) / (d);(v.v[4]) = ((m.v[0]) * (m.v[8]) - (m.v[6]) * (m.v[2])) / (d);(v.v[7]) = ((m.v[6]) * (m.v[1]) - (m.v[0]) * (m.v[7])) / (d);(v.v[2]) = ((m.v[1]) * (m.v[5]) - (m.v[4]) * (m.v[2])) / (d);(v.v[5]) = ((m.v[3]) * (m.v[2]) - (m.v[0]) * (m.v[5])) / (d);(v.v[8]) = ((m.v[0]) * (m.v[4]) - (m.v[3]) * (m.v[1])) / (d);return(v);};CapexMatrix33.forTranslate = function(translateX, translateY) {return(CapexMatrix33.forValues([1.0, 0.0, translateX, 0.0, 1.0, translateY, 0.0, 0.0, 1.0]));};CapexMatrix33.forRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexMatrix33.forValues([c, s, 0.0, -(s), c, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix33.forRotationWithCenter = function(angle, centerX, centerY) {var translate = CapexMatrix33.forTranslate(centerX, centerY);var rotate = CapexMatrix33.forRotation(angle);var translateBack = CapexMatrix33.forTranslate(-(centerX), -(centerY));var translatedRotated = CapexMatrix33.multiplyMatrix(translate, rotate);return(CapexMatrix33.multiplyMatrix(translatedRotated, translateBack));};CapexMatrix33.forSkew = function(skewX, skewY) {return(CapexMatrix33.forValues([1.0, skewX, 0.0, skewY, 1.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix33.forScale = function(scaleX, scaleY) {return(CapexMatrix33.forValues([scaleX, 0.0, 0.0, 0.0, scaleY, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix33.forFlip = function(flipX, flipY) {var xmat33 = CapexMatrix33.forValues([1.0, 0.0, 0.0, 0.0, -(1.0), 0.0, 0.0, 0.0, 1.0]);var ymat33 = CapexMatrix33.forValues([-(1.0), 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]);if((flipX) && (flipY)) {return(CapexMatrix33.multiplyMatrix(xmat33, ymat33));}else {if(flipX) {return(xmat33);}else {if(flipY) {return(ymat33);}}}return(CapexMatrix33.forIdentity());};CapexMatrix33.forValues = function(mv) {var v = CapexMatrix33.createInstance();var i = 0;for((i) = (0) ; (i) < (9) ; (i)++) {if((i) >= (mv.length)) {(v.v[i]) = (0.0);}else {(v.v[i]) = (mv[i]);}}return(v);};CapexMatrix33.multiplyScalar = function(v, mm) {var mat33 = CapexMatrix33.forZero();(mat33.v[0]) = (mm.v[0]) * (v);(mat33.v[1]) = (mm.v[1]) * (v);(mat33.v[2]) = (mm.v[2]) * (v);(mat33.v[3]) = (mm.v[3]) * (v);(mat33.v[4]) = (mm.v[4]) * (v);(mat33.v[5]) = (mm.v[5]) * (v);(mat33.v[6]) = (mm.v[6]) * (v);(mat33.v[7]) = (mm.v[7]) * (v);(mat33.v[8]) = (mm.v[8]) * (v);return(mat33);};CapexMatrix33.multiplyMatrix = function(a, b) {var matrix33 = CapexMatrix33.createInstance();(matrix33.v[0]) = (a.v[0]) * (b.v[0]) + (a.v[1]) * (b.v[3]) + (a.v[2]) * (b.v[6]);(matrix33.v[1]) = (a.v[0]) * (b.v[1]) + (a.v[1]) * (b.v[4]) + (a.v[2]) * (b.v[7]);(matrix33.v[2]) = (a.v[0]) * (b.v[2]) + (a.v[1]) * (b.v[5]) + (a.v[2]) * (b.v[8]);(matrix33.v[3]) = (a.v[3]) * (b.v[0]) + (a.v[4]) * (b.v[3]) + (a.v[5]) * (b.v[6]);(matrix33.v[4]) = (a.v[3]) * (b.v[1]) + (a.v[4]) * (b.v[4]) + (a.v[5]) * (b.v[7]);(matrix33.v[5]) = (a.v[3]) * (b.v[2]) + (a.v[4]) * (b.v[5]) + (a.v[5]) * (b.v[8]);(matrix33.v[6]) = (a.v[6]) * (b.v[0]) + (a.v[7]) * (b.v[3]) + (a.v[8]) * (b.v[6]);(matrix33.v[7]) = (a.v[6]) * (b.v[1]) + (a.v[7]) * (b.v[4]) + (a.v[8]) * (b.v[7]);(matrix33.v[8]) = (a.v[6]) * (b.v[2]) + (a.v[7]) * (b.v[5]) + (a.v[8]) * (b.v[8]);return(matrix33);};CapexMatrix33.multiplyVector = function(a, b) {var x = (a.v[0]) * b.x + (a.v[1]) * b.y + (a.v[2]) * (1.0);var y = (a.v[3]) * b.x + (a.v[4]) * b.y + (a.v[5]) * (1.0);return(CapexVector2.create(x, y));};var CapexMatrix44 = function() {this.v = null;{} };var P = CapexMatrix44.prototype;P.constructor = CapexMatrix44;P._t = {}; P._t["CapexMatrix44"] = true;CapexMatrix44.createInstance = function() {var _v = new CapexMatrix44();return(_v._construct());};P._construct = function() {(this.v) = ([]);return(this);};CapexMatrix44.forZero = function() {return(CapexMatrix44.forValues([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]));};CapexMatrix44.forIdentity = function() {return(CapexMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix44.forTranslate = function(translateX, translateY, translateZ) {return(CapexMatrix44.forValues([1.0, 0.0, 0.0, translateX, 0.0, 1.0, 0.0, translateY, 0.0, 0.0, 1.0, translateZ, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix44.forXRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, c, -(s), 0.0, 0.0, s, c, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix44.forYRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexMatrix44.forValues([c, 0.0, s, 0.0, 0.0, 1.0, 0.0, 0.0, -(s), 0.0, c, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix44.forZRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexMatrix44.forValues([c, -(s), 0.0, 0.0, s, c, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix44.forSkew = function(vx, vy, vz) {return(CapexMatrix44.forValues([1.0, vx, vx, 0.0, vy, 1.0, vy, 0.0, vz, vz, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix44.forXRotationWithCenter = function(angle, centerX, centerY, centerZ) {var translate = CapexMatrix44.forTranslate(centerX, centerY, centerZ);var rotate = CapexMatrix44.forXRotation(angle);var translateBack = CapexMatrix44.forTranslate(-(centerX), -(centerY), -(centerZ));var translatedRotated = CapexMatrix44.multiplyMatrix(translate, rotate);return(CapexMatrix44.multiplyMatrix(translatedRotated, translateBack));};CapexMatrix44.forYRotationWithCenter = function(angle, centerX, centerY, centerZ) {var translate = CapexMatrix44.forTranslate(centerX, centerY, centerZ);var rotate = CapexMatrix44.forYRotation(angle);var translateBack = CapexMatrix44.forTranslate(-(centerX), -(centerY), -(centerZ));var translatedRotated = CapexMatrix44.multiplyMatrix(translate, rotate);return(CapexMatrix44.multiplyMatrix(translatedRotated, translateBack));};CapexMatrix44.forZRotationWithCenter = function(angle, centerX, centerY, centerZ) {var translate = CapexMatrix44.forTranslate(centerX, centerY, centerZ);var rotate = CapexMatrix44.forZRotation(angle);var translateBack = CapexMatrix44.forTranslate(-(centerX), -(centerY), -(centerZ));var translatedRotated = CapexMatrix44.multiplyMatrix(translate, rotate);return(CapexMatrix44.multiplyMatrix(translatedRotated, translateBack));};CapexMatrix44.forScale = function(scaleX, scaleY, scaleZ) {return(CapexMatrix44.forValues([scaleX, 0.0, 0.0, 0.0, 0.0, scaleY, 0.0, 0.0, 0.0, 0.0, scaleZ, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexMatrix44.forFlipXY = function(flipXY) {if(flipXY) {return(CapexMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, -(1.0), 0.0, 0.0, 0.0, 0.0, 1.0]));}return(CapexMatrix44.forIdentity());};CapexMatrix44.forFlipXZ = function(flipXZ) {if(flipXZ) {return(CapexMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, -(1.0), 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));}return(CapexMatrix44.forIdentity());};CapexMatrix44.forFlipYZ = function(flipYZ) {if(flipYZ) {return(CapexMatrix44.forValues([-(1.0), 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));}return(CapexMatrix44.forIdentity());};CapexMatrix44.forValues = function(mv) {var v = CapexMatrix44.createInstance();var i = 0;for((i) = (0) ; (i) < (16) ; (i)++) {if((i) >= (mv.length)) {(v.v[i]) = (0.0);}else {(v.v[i]) = (mv[i]);}}return(v);};CapexMatrix44.multiplyScalar = function(v, mm) {return(CapexMatrix44.forValues([(mm.v[0]) * (v), (mm.v[1]) * (v), (mm.v[2]) * (v), (mm.v[3]) * (v), (mm.v[4]) * (v), (mm.v[5]) * (v), (mm.v[6]) * (v), (mm.v[7]) * (v), (mm.v[8]) * (v), (mm.v[9]) * (v), (mm.v[10]) * (v), (mm.v[11]) * (v), (mm.v[12]) * (v), (mm.v[3]) * (v), (mm.v[14]) * (v), (mm.v[15]) * (v)]));};CapexMatrix44.multiplyMatrix = function(a, b) {var matrix44 = CapexMatrix44.createInstance();(matrix44.v[0]) = (a.v[0]) * (b.v[0]) + (a.v[1]) * (b.v[4]) + (a.v[2]) * (b.v[8]) + (a.v[3]) * (b.v[12]);(matrix44.v[1]) = (a.v[0]) * (b.v[1]) + (a.v[1]) * (b.v[5]) + (a.v[2]) * (b.v[9]) + (a.v[3]) * (b.v[13]);(matrix44.v[2]) = (a.v[0]) * (b.v[2]) + (a.v[1]) * (b.v[6]) + (a.v[2]) * (b.v[10]) + (a.v[3]) * (b.v[14]);(matrix44.v[3]) = (a.v[0]) * (b.v[3]) + (a.v[1]) * (b.v[7]) + (a.v[2]) * (b.v[11]) + (a.v[3]) * (b.v[15]);(matrix44.v[4]) = (a.v[4]) * (b.v[0]) + (a.v[5]) * (b.v[4]) + (a.v[6]) * (b.v[8]) + (a.v[7]) * (b.v[12]);(matrix44.v[5]) = (a.v[4]) * (b.v[1]) + (a.v[5]) * (b.v[5]) + (a.v[6]) * (b.v[9]) + (a.v[7]) * (b.v[13]);(matrix44.v[6]) = (a.v[4]) * (b.v[2]) + (a.v[5]) * (b.v[6]) + (a.v[6]) * (b.v[10]) + (a.v[7]) * (b.v[14]);(matrix44.v[7]) = (a.v[4]) * (b.v[3]) + (a.v[5]) * (b.v[7]) + (a.v[6]) * (b.v[11]) + (a.v[7]) * (b.v[15]);(matrix44.v[8]) = (a.v[8]) * (b.v[0]) + (a.v[9]) * (b.v[4]) + (a.v[10]) * (b.v[8]) + (a.v[11]) * (b.v[12]);(matrix44.v[9]) = (a.v[8]) * (b.v[1]) + (a.v[9]) * (b.v[5]) + (a.v[10]) * (b.v[9]) + (a.v[11]) * (b.v[13]);(matrix44.v[10]) = (a.v[8]) * (b.v[2]) + (a.v[9]) * (b.v[6]) + (a.v[10]) * (b.v[10]) + (a.v[11]) * (b.v[14]);(matrix44.v[11]) = (a.v[8]) * (b.v[3]) + (a.v[9]) * (b.v[7]) + (a.v[10]) * (b.v[11]) + (a.v[11]) * (b.v[15]);(matrix44.v[12]) = (a.v[12]) * (b.v[0]) + (a.v[13]) * (b.v[4]) + (a.v[14]) * (b.v[8]) + (a.v[15]) * (b.v[12]);(matrix44.v[13]) = (a.v[12]) * (b.v[1]) + (a.v[13]) * (b.v[5]) + (a.v[14]) * (b.v[9]) + (a.v[15]) * (b.v[13]);(matrix44.v[14]) = (a.v[12]) * (b.v[2]) + (a.v[13]) * (b.v[6]) + (a.v[14]) * (b.v[10]) + (a.v[15]) * (b.v[14]);(matrix44.v[15]) = (a.v[12]) * (b.v[3]) + (a.v[13]) * (b.v[7]) + (a.v[14]) * (b.v[11]) + (a.v[15]) * (b.v[15]);return(matrix44);};CapexMatrix44.multiplyVector = function(a, b) {var x = (a.v[0]) * b.x + (a.v[1]) * b.y + (a.v[2]) * b.z + (a.v[3]) * (1.0);var y = (a.v[4]) * b.x + (a.v[5]) * b.y + (a.v[6]) * b.z + (a.v[7]) * (1.0);var z = (a.v[8]) * b.x + (a.v[9]) * b.y + (a.v[10]) * b.z + (a.v[11]) * (1.0);return(CapexVector3.create(x, y, z));};var CapexMD5Encoder = function() {{} };var P = CapexMD5Encoder.prototype;P.constructor = CapexMD5Encoder;P._t = {}; P._t["CapexMD5Encoder"] = true;CapexMD5Encoder.createInstance = function() {var _v = new CapexMD5Encoder();return(_v._construct());};P._construct = function() {return(this);};CapexMD5Encoder.encodeBuffer = function(buffer) {if((buffer) == (null) || CapeBuffer.getSize(buffer) < (1)) {return(null);}return(CapexMD5EncoderForJavaScript.encode(buffer));};CapexMD5Encoder.encodeString = function(string) {return(CapexMD5Encoder.encodeBuffer(CapeString.toUTF8Buffer(string)));};CapexMD5Encoder.encodeObject = function(obj) {var bb = CapeBuffer.asBuffer(obj);if((bb) !== (null)) {return(CapexMD5Encoder.encodeBuffer(bb));}var ss = CapeString.asStringWithObject(obj);if(!((ss) == (null))) {return(CapexMD5Encoder.encodeObject(ss));}return(null);};var CapexMD5EncoderForJavaScript = function() {{} };var P = CapexMD5EncoderForJavaScript.prototype;P.constructor = CapexMD5EncoderForJavaScript;P._t = {}; P._t["CapexMD5EncoderForJavaScript"] = true;CapexMD5EncoderForJavaScript.createInstance = function() {var _v = new CapexMD5EncoderForJavaScript();return(_v._construct());};P._construct = function() {return(this);};CapexMD5EncoderForJavaScript.encode = function(buffer) {return(CapexMD5EncoderForJavaScript.md5(CapeString.forUTF8Buffer(buffer)));};CapexMD5EncoderForJavaScript.md5 = function(o) {if((o) == (null)) {return(null);}var x = CapexMD5EncoderForJavaScript.getWordArray(o);var a = 1732584193;var b = -271733879;var c = -1732584194;var d = 271733878;var s11 = 7;var s12 = 12;var s13 = 17;var s14 = 22;var s21 = 5;var s22 = 9;var s23 = 14;var s24 = 20;var s31 = 4;var s32 = 11;var s33 = 16;var s34 = 23;var s41 = 6;var s42 = 10;var s43 = 15;var s44 = 21;var k = 0;var aa = 0;var bb = 0;var cc = 0;var dd = 0;for((k) = (0) ; (k) < (x.length) ; (k) += (16)) {(aa) = (a);(bb) = (b);(cc) = (c);(dd) = (d);(a) = CapexMD5EncoderForJavaScript.ff(a, b, c, d, x[(k) + (0)], s11, -680876936);(d) = CapexMD5EncoderForJavaScript.ff(d, a, b, c, x[(k) + (1)], s12, -389564586);(c) = CapexMD5EncoderForJavaScript.ff(c, d, a, b, x[(k) + (2)], s13, 606105819);(b) = CapexMD5EncoderForJavaScript.ff(b, c, d, a, x[(k) + (3)], s14, -1044525330);(a) = CapexMD5EncoderForJavaScript.ff(a, b, c, d, x[(k) + (4)], s11, -176418897);(d) = CapexMD5EncoderForJavaScript.ff(d, a, b, c, x[(k) + (5)], s12, 1200080426);(c) = CapexMD5EncoderForJavaScript.ff(c, d, a, b, x[(k) + (6)], s13, -1473231341);(b) = CapexMD5EncoderForJavaScript.ff(b, c, d, a, x[(k) + (7)], s14, -45705983);(a) = CapexMD5EncoderForJavaScript.ff(a, b, c, d, x[(k) + (8)], s11, 1770035416);(d) = CapexMD5EncoderForJavaScript.ff(d, a, b, c, x[(k) + (9)], s12, -1958414417);(c) = CapexMD5EncoderForJavaScript.ff(c, d, a, b, x[(k) + (10)], s13, -42063);(b) = CapexMD5EncoderForJavaScript.ff(b, c, d, a, x[(k) + (11)], s14, -1990404162);(a) = CapexMD5EncoderForJavaScript.ff(a, b, c, d, x[(k) + (12)], s11, 1804603682);(d) = CapexMD5EncoderForJavaScript.ff(d, a, b, c, x[(k) + (13)], s12, -40341101);(c) = CapexMD5EncoderForJavaScript.ff(c, d, a, b, x[(k) + (14)], s13, -1502002290);(b) = CapexMD5EncoderForJavaScript.ff(b, c, d, a, x[(k) + (15)], s14, 1236535329);(a) = CapexMD5EncoderForJavaScript.gg(a, b, c, d, x[(k) + (1)], s21, -165796510);(d) = CapexMD5EncoderForJavaScript.gg(d, a, b, c, x[(k) + (6)], s22, -1069501632);(c) = CapexMD5EncoderForJavaScript.gg(c, d, a, b, x[(k) + (11)], s23, 643717713);(b) = CapexMD5EncoderForJavaScript.gg(b, c, d, a, x[(k) + (0)], s24, -373897302);(a) = CapexMD5EncoderForJavaScript.gg(a, b, c, d, x[(k) + (5)], s21, -701558691);(d) = CapexMD5EncoderForJavaScript.gg(d, a, b, c, x[(k) + (10)], s22, 38016083);(c) = CapexMD5EncoderForJavaScript.gg(c, d, a, b, x[(k) + (15)], s23, -660478335);(b) = CapexMD5EncoderForJavaScript.gg(b, c, d, a, x[(k) + (4)], s24, -405537848);(a) = CapexMD5EncoderForJavaScript.gg(a, b, c, d, x[(k) + (9)], s21, 568446438);(d) = CapexMD5EncoderForJavaScript.gg(d, a, b, c, x[(k) + (14)], s22, -1019803690);(c) = CapexMD5EncoderForJavaScript.gg(c, d, a, b, x[(k) + (3)], s23, -187363961);(b) = CapexMD5EncoderForJavaScript.gg(b, c, d, a, x[(k) + (8)], s24, 1163531501);(a) = CapexMD5EncoderForJavaScript.gg(a, b, c, d, x[(k) + (13)], s21, -1444681467);(d) = CapexMD5EncoderForJavaScript.gg(d, a, b, c, x[(k) + (2)], s22, -51403784);(c) = CapexMD5EncoderForJavaScript.gg(c, d, a, b, x[(k) + (7)], s23, 1735328473);(b) = CapexMD5EncoderForJavaScript.gg(b, c, d, a, x[(k) + (12)], s24, -1926607734);(a) = CapexMD5EncoderForJavaScript.hh(a, b, c, d, x[(k) + (5)], s31, -378558);(d) = CapexMD5EncoderForJavaScript.hh(d, a, b, c, x[(k) + (8)], s32, -2022574463);(c) = CapexMD5EncoderForJavaScript.hh(c, d, a, b, x[(k) + (11)], s33, 1839030562);(b) = CapexMD5EncoderForJavaScript.hh(b, c, d, a, x[(k) + (14)], s34, -35309556);(a) = CapexMD5EncoderForJavaScript.hh(a, b, c, d, x[(k) + (1)], s31, -1530992060);(d) = CapexMD5EncoderForJavaScript.hh(d, a, b, c, x[(k) + (4)], s32, 1272893353);(c) = CapexMD5EncoderForJavaScript.hh(c, d, a, b, x[(k) + (7)], s33, -155497632);(b) = CapexMD5EncoderForJavaScript.hh(b, c, d, a, x[(k) + (10)], s34, -1094730640);(a) = CapexMD5EncoderForJavaScript.hh(a, b, c, d, x[(k) + (13)], s31, 681279174);(d) = CapexMD5EncoderForJavaScript.hh(d, a, b, c, x[(k) + (0)], s32, -358537222);(c) = CapexMD5EncoderForJavaScript.hh(c, d, a, b, x[(k) + (3)], s33, -722521979);(b) = CapexMD5EncoderForJavaScript.hh(b, c, d, a, x[(k) + (6)], s34, 76029189);(a) = CapexMD5EncoderForJavaScript.hh(a, b, c, d, x[(k) + (9)], s31, -640364487);(d) = CapexMD5EncoderForJavaScript.hh(d, a, b, c, x[(k) + (12)], s32, -421815835);(c) = CapexMD5EncoderForJavaScript.hh(c, d, a, b, x[(k) + (15)], s33, 530742520);(b) = CapexMD5EncoderForJavaScript.hh(b, c, d, a, x[(k) + (2)], s34, -995338651);(a) = CapexMD5EncoderForJavaScript.ii(a, b, c, d, x[(k) + (0)], s41, -198630844);(d) = CapexMD5EncoderForJavaScript.ii(d, a, b, c, x[(k) + (7)], s42, 1126891415);(c) = CapexMD5EncoderForJavaScript.ii(c, d, a, b, x[(k) + (14)], s43, -1416354905);(b) = CapexMD5EncoderForJavaScript.ii(b, c, d, a, x[(k) + (5)], s44, -57434055);(a) = CapexMD5EncoderForJavaScript.ii(a, b, c, d, x[(k) + (12)], s41, 1700485571);(d) = CapexMD5EncoderForJavaScript.ii(d, a, b, c, x[(k) + (3)], s42, -1894986606);(c) = CapexMD5EncoderForJavaScript.ii(c, d, a, b, x[(k) + (10)], s43, -1051523);(b) = CapexMD5EncoderForJavaScript.ii(b, c, d, a, x[(k) + (1)], s44, -2054922799);(a) = CapexMD5EncoderForJavaScript.ii(a, b, c, d, x[(k) + (8)], s41, 1873313359);(d) = CapexMD5EncoderForJavaScript.ii(d, a, b, c, x[(k) + (15)], s42, -30611744);(c) = CapexMD5EncoderForJavaScript.ii(c, d, a, b, x[(k) + (6)], s43, -1560198380);(b) = CapexMD5EncoderForJavaScript.ii(b, c, d, a, x[(k) + (13)], s44, 1309151649);(a) = CapexMD5EncoderForJavaScript.ii(a, b, c, d, x[(k) + (4)], s41, -145523070);(d) = CapexMD5EncoderForJavaScript.ii(d, a, b, c, x[(k) + (11)], s42, -1120210379);(c) = CapexMD5EncoderForJavaScript.ii(c, d, a, b, x[(k) + (2)], s43, 718787259);(b) = CapexMD5EncoderForJavaScript.ii(b, c, d, a, x[(k) + (9)], s44, -343485551);(a) = CapexMD5EncoderForJavaScript.addUnsigned(a, aa);(b) = CapexMD5EncoderForJavaScript.addUnsigned(b, bb);(c) = CapexMD5EncoderForJavaScript.addUnsigned(c, cc);(d) = CapexMD5EncoderForJavaScript.addUnsigned(d, dd);}var temp = CapexMD5EncoderForJavaScript.toStringHex(a) + CapexMD5EncoderForJavaScript.toStringHex(b) + CapexMD5EncoderForJavaScript.toStringHex(c) + CapexMD5EncoderForJavaScript.toStringHex(d);return(CapeString.toLowerCase(temp));};CapexMD5EncoderForJavaScript.getWordArray = function(str) {var strlength = CapeString.getLength(str);var n = ((strlength) + (8) - ((strlength) + (8)) % (64)) / (64);var numWords = ((n) + (1)) * (16);var array = [];var wordCount = 0;var byteCount = 0;var bytePos = 0;while((byteCount) < (strlength)) {(wordCount) = ((byteCount) - (byteCount) % (4)) / (4);(bytePos) = (byteCount) % (4) * (8);var temps = 0;var o = array[wordCount];if((o) !== (null)) {(temps) = (o);}var xs = (temps) | CapeString.charAt(str, byteCount) << (bytePos);(array[wordCount]) = (xs);(byteCount)++;}(wordCount) = ((byteCount) - (byteCount) % (4)) / (4);(bytePos) = (byteCount) % (4) * (8);var xx = 0;var xxo = array[wordCount];if((xxo) !== (null)) {(xx) = (xxo);}var vs = (xx) | (128) << (bytePos);(array[wordCount]) = (vs);(array[(numWords) - (2)]) = (strlength) << (3);var r = 0;r = strlength >>> 29;(array[(numWords) - (1)]) = (r);return(array);};CapexMD5EncoderForJavaScript.rotateLeft = function(val, bits) {var vr = 0;vr = (val << bits) | (val >>> (32 - bits));return(vr);};CapexMD5EncoderForJavaScript.addUnsigned = function(x, y) {var x4 = (x) & (1073741824);var y4 = (y) & (1073741824);var x8 = (x) & (-2147483648);var y8 = (y) & (-2147483648);var result = ((x) & (1073741823)) + ((y) & (1073741823));if(((x4) & (y4)) !== (0)) {return((result) ^ (-2147483648) ^ (x8) ^ (y8));}if(((x4) | (y4)) !== (0)) {if(((result) & (1073741824)) !== (0)) {return((result) ^ (-1073741824) ^ (x8) ^ (y8));}else {return((result) ^ (1073741824) ^ (x8) ^ (y8));}}else {return((result) ^ (x8) ^ (y8));}return(0);};CapexMD5EncoderForJavaScript.f = function(x, y, z) {var w = ~(x);return((x) & (y) | (w) & (z));};CapexMD5EncoderForJavaScript.g = function(x, y, z) {var w = ~(z);return((x) & (z) | (y) & (w));};CapexMD5EncoderForJavaScript.h = function(x, y, z) {return((x) ^ (y) ^ (z));};CapexMD5EncoderForJavaScript.i = function(x, y, z) {var w = ~(z);return((y) ^ ((x) | (w)));};CapexMD5EncoderForJavaScript.ff = function(a, b, c, d, o, s, ac) {var x = 0;if((o) !== (null)) {(x) = (o);}var v = CapexMD5EncoderForJavaScript.addUnsigned(a, CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.f(b, c, d), x), ac));return(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.rotateLeft(v, s), b));};CapexMD5EncoderForJavaScript.gg = function(a, b, c, d, o, s, ac) {var x = 0;if((o) !== (null)) {(x) = (o);}var v = CapexMD5EncoderForJavaScript.addUnsigned(a, CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.g(b, c, d), x), ac));return(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.rotateLeft(v, s), b));};CapexMD5EncoderForJavaScript.hh = function(a, b, c, d, o, s, ac) {var x = 0;if((o) !== (null)) {(x) = (o);}var v = CapexMD5EncoderForJavaScript.addUnsigned(a, CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.h(b, c, d), x), ac));return(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.rotateLeft(v, s), b));};CapexMD5EncoderForJavaScript.ii = function(a, b, c, d, o, s, ac) {var x = 0;if((o) !== (null)) {(x) = (o);}var v = CapexMD5EncoderForJavaScript.addUnsigned(a, CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.i(b, c, d), x), ac));return(CapexMD5EncoderForJavaScript.addUnsigned(CapexMD5EncoderForJavaScript.rotateLeft(v, s), b));};CapexMD5EncoderForJavaScript.toStringHex = function(val) {var result = "";var temp = "";var count = 0;var _byte = 0;for((count) = (0) ; (count) <= (3) ; (count)++) {var v = 0;v = val >>> (count * 8);(_byte) = (v) & (255);(temp) = ("00" + CapeString.forIntegerHex(_byte));(result) = CapeString.appendStringAndString(result, CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(temp, CapeString.getLength(temp), 2));}return(result);};var CapexMimeTypeRegistry = function() {{} };var P = CapexMimeTypeRegistry.prototype;P.constructor = CapexMimeTypeRegistry;CapexMimeTypeRegistry.myInstance = null;CapexMimeTypeRegistry.htMime = null;CapexMimeTypeRegistry.htExt = null;P._t = {}; P._t["CapexMimeTypeRegistry"] = true;CapexMimeTypeRegistry.instance = function() {if((CapexMimeTypeRegistry.myInstance) == (null)) {(CapexMimeTypeRegistry.myInstance) = CapexMimeTypeRegistry.createInstance();}return(CapexMimeTypeRegistry.myInstance);};CapexMimeTypeRegistry.typeForFile = function(f) {if((f) == (null)) {return("application/unknown");}var mtr = CapexMimeTypeRegistry.instance();var v = mtr.getMimetype(f.baseName());if(CapeString.isEmpty(v)) {return("application/unknown");}return(v);};CapexMimeTypeRegistry.createInstance = function() {var _v = new CapexMimeTypeRegistry();return(_v._construct());};P._construct = function() {(CapexMimeTypeRegistry.htMime) = (new Map());(CapexMimeTypeRegistry.htExt) = (new Map());this.add("*.cpp", "text/x-c++src");this.add("*.ogm", "video/x-ogm+ogg");this.add("*.epsf", "image/x-eps");this.add("*.mpeg", "video/mpeg");this.add("*.rmj", "application/vnd.rn-realmedia");this.add("*.nes", "application/x-nes-rom");this.add("*.rmm", "application/vnd.rn-realmedia");this.add("*.gb", "application/x-gameboy-rom");this.add("*.qtvr", "video/quicktime");this.add("*.ogv", "video/ogg");this.add("*.amr", "audio/AMR");this.add("*.ogx", "application/ogg");this.add("*.rms", "application/vnd.rn-realmedia");this.add("*.gf", "application/x-tex-gf");this.add("*.gg", "application/x-sms-rom");this.add("*.xslt", "application/xml");this.add("*.Z", "application/x-compress");this.add("*.mdb", "application/vnd.ms-access");this.add("*.rmx", "application/vnd.rn-realmedia");this.add("*.anim[1-9j]", "video/x-anim");this.add("*.gp", "application/x-gnuplot");this.add("*.a", "application/x-archive");this.add("*.a", "application/x-shared-library-la");this.add("*.mdi", "image/vnd.ms-modi");this.add("*.c", "text/x-csrc");this.add("*.gv", "text/vnd.graphviz");this.add("*.m3u8", "audio/x-mpegurl");this.add("*.e", "text/x-eiffel");this.add("*.pict1", "image/x-pict");this.add("*.pict2", "image/x-pict");this.add("*.spd", "application/x-font-speedo");this.add("*.spc", "application/x-pkcs7-certificates");this.add("*.gz", "application/x-gzip");this.add("*.dtd", "application/xml-dtd");this.add("*.dvi.gz", "application/x-gzdvi");this.add("*.h", "text/x-chdr");this.add("*.o", "application/x-object");this.add("*.spl", "application/x-shockwave-flash");this.add("*.etheme", "application/x-e-theme");this.add("*.d", "text/x-dsrc");this.add("*.sr2", "image/x-sony-sr2");this.add("*.t", "text/troff");this.add("*.hh", "text/x-c++hdr");this.add("*.m", "text/x-objcsrc");this.add("*.m", "text/x-matlab");this.add("*.ps.bz2", "application/x-bzpostscript");this.add("*.anx", "application/annodex");this.add("*.crt", "application/x-x509-ca-cert");this.add("*.med", "audio/x-mod");this.add("*.crw", "image/x-canon-crw");this.add("*.spx", "audio/ogg");this.add("*.spx", "audio/x-speex");this.add("*.xliff", "application/x-xliff");this.add("*.ani", "application/x-navi-animation");this.add("*.hp", "text/x-c++hdr");this.add("*.vhdl", "text/x-vhdl");this.add("*.f", "text/x-fortran");this.add("*.hs", "text/x-haskell");this.add("*.epub", "application/epub+zip");this.add("*.kar", "audio/midi");this.add("*.mpga", "audio/mpeg");this.add("*.dtx", "text/x-tex");this.add("*.pptx", "application/vnd.openxmlformats-officedocument.presentationml.presentation");this.add("*.dsl", "text/x-dsl");this.add("*.csh", "application/x-csh");this.add("*.nfo", "text/x-nfo");this.add("*.pkr", "application/pgp-keys");this.add("*.epsi.bz2", "image/x-bzeps");this.add("*.spec", "text/x-rpm-spec");this.add("*.f90", "text/x-fortran");this.add("*.sql", "text/x-sql");this.add("*.css", "text/css");this.add("*.f95", "text/x-fortran");this.add("*.csv", "text/csv");this.add("*.epsi", "image/x-eps");this.add("*.tsv", "text/tab-separated-values");this.add("*.pla", "audio/x-iriver-pla");this.add("*.it", "audio/x-it");this.add("*.ape", "audio/x-ape");this.add("*.src", "application/x-wais-source");this.add("*.tta", "audio/x-tta");this.add("*.ttc", "application/x-font-ttf");this.add("*.srf", "image/x-sony-srf");this.add("*.pln", "application/x-planperfect");this.add("*.ttf", "application/x-font-ttf");this.add("*.exe", "application/x-ms-dos-executable");this.add("*.abw.gz", "application/x-abiword");this.add("*.chrt", "application/x-kchart");this.add("*.dvi", "application/x-dvi");this.add("*.rpm", "application/x-rpm");this.add("*.epsf.gz", "image/x-gzeps");this.add("*.pls", "audio/x-scpls");this.add("*.gcrd", "text/directory");this.add("*.t2t", "text/x-txt2tags");this.add("*.srt", "application/x-subrip");this.add("*.exr", "image/x-exr");this.add("*.pntg", "image/x-macpaint");this.add("*.ttx", "application/x-font-ttx");this.add("*.jad", "text/vnd.sun.j2me.app-descriptor");this.add("*.js", "application/javascript");this.add("*.latex", "text/x-tex");this.add("*.jar", "application/x-java-archive");this.add("*.ssa", "text/x-ssa");this.add("*.xspf", "application/xspf+xml");this.add("*.mgp", "application/x-magicpoint");this.add("*.movie", "video/x-sgi-movie");this.add("*.cue", "application/x-cue");this.add("*.html", "text/html");this.add("*.smaf", "application/x-smaf");this.add("*.zabw", "application/x-abiword");this.add("*.dwg", "image/vnd.dwg");this.add("authors", "text/x-authors");this.add("*.msod", "image/x-msod");this.add("*.xslfo", "text/x-xslfo");this.add("*.mrml", "text/x-mrml");this.add("*.kdc", "image/x-kodak-kdc");this.add("*.cur", "image/x-win-bitmap");this.add("*.gnucash", "application/x-gnucash");this.add("*.pkipath", "application/pkix-pkipath");this.add("*.p", "text/x-pascal");this.add("*.patch", "text/x-patch");this.add("*.old", "application/x-trash");this.add("*.m4", "application/x-m4");this.add("*.mbox", "application/mbox");this.add("*.png", "image/png");this.add("*.stc", "application/vnd.sun.xml.calc.template");this.add("*.std", "application/vnd.sun.xml.draw.template");this.add("*.arj", "application/x-arj");this.add("*.pnm", "image/x-portable-anymap");this.add("*.dxf", "image/vnd.dxf");this.add("*.sti", "application/vnd.sun.xml.impress.template");this.add("*.gplt", "application/x-gnuplot");this.add("*.la", "application/x-shared-library-la");this.add("*.stm", "audio/x-stm");this.add("*.pcf.gz", "application/x-font-pcf");this.add("*.kexic", "application/x-kexi-connectiondata");this.add("*.arw", "image/x-sony-arw");this.add("*.mid", "audio/midi");this.add("*.stw", "application/vnd.sun.xml.writer.template");this.add("*.mif", "application/x-mif");this.add("*.sty", "text/x-tex");this.add("*.hpgl", "application/vnd.hp-hpgl");this.add("*.asc", "application/pgp-encrypted");this.add("*.asc", "application/pgp-keys");this.add("*.asc", "text/plain");this.add("*.sub", "text/x-microdvd");this.add("*.sub", "text/x-mpsub");this.add("*.sub", "text/x-subviewer");this.add("*.ly", "text/x-lilypond");this.add("*.lz", "application/x-lzip");this.add("*.kexis", "application/x-kexiproject-shortcut");this.add("*.asf", "video/x-ms-asf");this.add("*.wmls", "text/vnd.wap.wmlscript");this.add("*.s3m", "audio/x-s3m");this.add("*.por", "application/x-spss-por");this.add("*.asp", "application/x-asp");this.add("*.pot", "application/vnd.ms-powerpoint");this.add("*.pot", "text/x-gettext-translation-template");this.add("*.sun", "image/x-sun-raster");this.add("*.ass", "text/x-ssa");this.add("*.rss", "application/rss+xml");this.add("*.lha", "application/x-lha");this.add("*.md", "application/x-genesis-rom");this.add("*.me", "text/x-troff-me");this.add("*.sami", "application/x-sami");this.add("*.asx", "audio/x-ms-asx");this.add("*.mm", "text/x-troff-mm");this.add("*.mo", "application/x-gettext-translation");this.add("CMakeLists.txt", "text/x-cmake");this.add("*.ml", "text/x-ocaml");this.add("*.ms", "text/x-troff-ms");this.add("*.kfo", "application/x-kformula");this.add("*.rtf", "application/rtf");this.add("*.lhs", "text/x-literate-haskell");this.add("*.svg", "image/svg+xml");this.add("*.ppm", "image/x-portable-pixmap");this.add("*.nb", "application/mathematica");this.add("*.lhz", "application/x-lhz");this.add("*.pps", "application/vnd.ms-powerpoint");this.add("*.ppt", "application/vnd.ms-powerpoint");this.add("*.nc", "application/x-netcdf");this.add("*.icb", "image/x-tga");this.add("*.ica", "application/x-ica");this.add("*.mka", "audio/x-matroska");this.add("*.ppz", "application/vnd.ms-powerpoint");this.add("*.txt", "text/plain");this.add("*.rtx", "text/richtext");this.add("*.gedcom", "application/x-gedcom");this.add("*.cxx", "text/x-c++src");this.add("*.ico", "image/vnd.microsoft.icon");this.add("*.metalink", "application/metalink+xml");this.add("*.txz", "application/x-xz-compressed-tar");this.add("*.ics", "text/calendar");this.add("*.p10", "application/pkcs10");this.add("gnumakefile", "text/x-makefile");this.add("*.p12", "application/x-pkcs12");this.add("*.swf", "application/x-shockwave-flash");this.add("*.mkv", "video/x-matroska");this.add("*.idl", "text/x-idl");this.add("*.prc", "application/x-palm-database");this.add("*.mli", "text/x-ocaml");this.add("*.tar.lzo", "application/x-tzo");this.add("*.sxc", "application/vnd.sun.xml.calc");this.add("*.sxd", "application/vnd.sun.xml.draw");this.add("*.cert", "application/x-x509-ca-cert");this.add("*.avi", "video/x-msvideo");this.add("*.sxg", "application/vnd.sun.xml.writer.global");this.add("*.qtl", "application/x-quicktime-media-link");this.add("*.sxi", "application/vnd.sun.xml.impress");this.add("*.xac", "application/x-gnucash");this.add("*.djvu", "image/vnd.djvu");this.add("*.sxm", "application/vnd.sun.xml.math");this.add("winmail.dat", "application/vnd.ms-tnef");this.add("*.bz2", "application/x-bzip");this.add("*.ief", "image/ief");this.add("*.tzo", "application/x-tzo");this.add("*.pk", "application/x-tex-pk");this.add("*.pl", "application/x-perl");this.add("*.rvx", "video/vnd.rn-realvideo");this.add("*.sxw", "application/vnd.sun.xml.writer");this.add("*.php4", "application/x-php");this.add("*.mmf", "application/x-smaf");this.add("*.BLEND", "application/x-blender");this.add("*.kil", "application/x-killustrator");this.add("*.pm", "application/x-perl");this.add("*.ps", "application/postscript");this.add("*.awb", "audio/AMR-WB");this.add("*.psf", "application/x-font-linux-psf");this.add("*.psf", "audio/x-psf");this.add("*.pw", "application/x-pw");this.add("*.aifc", "audio/x-aiff");this.add("*.mml", "text/mathml");this.add("*.psd", "image/vnd.adobe.photoshop");this.add("*.mo3", "audio/x-mo3");this.add("*.aiff", "audio/x-aiff");this.add("*.gba", "application/x-gba-rom");this.add("*.awk", "application/x-awk");this.add("*.not", "text/x-mup");this.add("changelog", "text/x-changelog");this.add("*.sv4cpio", "application/x-sv4cpio");this.add("*%", "application/x-trash");this.add("*.po", "text/x-gettext-translation");this.add("*.hdf", "application/x-hdf");this.add("*.psw", "application/x-pocket-word");this.add("*.tar.bz", "application/x-bzip-compressed-tar");this.add("*.php3", "application/x-php");this.add("*.desktop", "application/x-desktop");this.add("*.fb2", "application/x-fictionbook+xml");this.add("*.wb1", "application/x-quattropro");this.add("*.wb2", "application/x-quattropro");this.add("*.ora", "image/openraster");this.add("*.wb3", "application/x-quattropro");this.add("*.iff", "image/x-iff");this.add("*.mp+", "audio/x-musepack");this.add("*.axa", "audio/annodex");this.add("*.orf", "image/x-olympus-orf");this.add("*.xbm", "image/x-xbitmap");this.add("copying", "text/x-copying");this.add("*.mp2", "audio/mp2");this.add("*.mp2", "video/mpeg");this.add("*.mp3", "audio/mpeg");this.add("*.mp4", "video/mp4");this.add("*.py", "text/x-python");this.add("*.kino", "application/smil");this.add("*.ra", "audio/vnd.rn-realaudio");this.add("*.rb", "application/x-ruby");this.add("*.icns", "image/x-icns");this.add("*.qt", "video/quicktime");this.add("*.xcf", "image/x-xcf");this.add("*.mng", "video/x-mng");this.add("*.xbl", "application/xml");this.add("*.axv", "video/annodex");this.add("*.cpio", "application/x-cpio");this.add("*.rm", "application/vnd.rn-realmedia");this.add("*.mod", "audio/x-mod");this.add("*.sv4crc", "application/x-sv4crc");this.add("*.rp", "image/vnd.rn-realpix");this.add("*.mof", "text/x-mof");this.add("*.wav", "audio/x-wav");this.add("*.rt", "text/vnd.rn-realtext");this.add("*.wax", "audio/x-ms-asx");this.add("*.rv", "video/vnd.rn-realvideo");this.add("*.moc", "text/x-moc");this.add("*.siag", "application/x-siag");this.add("*.pack", "application/x-java-pack200");this.add("*.gnumeric", "application/x-gnumeric");this.add("*.tnef", "application/vnd.ms-tnef");this.add("*.tpic", "image/x-tga");this.add("*.mov", "video/quicktime");this.add("*.smil", "application/smil");this.add("*.sh", "application/x-shellscript");this.add("*.divx", "video/x-msvideo");this.add("*.sk", "image/x-skencil");this.add("*.moov", "video/quicktime");this.add("*.mpc", "audio/x-musepack");this.add("*.so", "application/x-sharedlib");this.add("*.mpe", "video/mpeg");this.add("*.otc", "application/vnd.oasis.opendocument.chart-template");this.add("*.midi", "audio/midi");this.add("*.otf", "application/vnd.oasis.opendocument.formula-template");this.add("*.otf", "application/x-font-otf");this.add("*.otg", "application/vnd.oasis.opendocument.graphics-template");this.add("*.oth", "application/vnd.oasis.opendocument.text-web");this.add("*.mpg", "video/mpeg");this.add("*.mpp", "audio/x-musepack");this.add("*.otp", "application/vnd.oasis.opendocument.presentation-template");this.add("*~", "application/x-trash");this.add("*.ged", "application/x-gedcom");this.add("*.ots", "application/vnd.oasis.opendocument.spreadsheet-template");this.add("*.ott", "application/vnd.oasis.opendocument.text-template");this.add("*.tar.lzma", "application/x-lzma-compressed-tar");this.add("*.docm", "application/vnd.openxmlformats-officedocument.wordprocessingml.document");this.add("makefile", "text/x-makefile");this.add("*.wcm", "application/vnd.ms-works");this.add("*.tk", "text/x-tcl");this.add("*.gen", "application/x-genesis-rom");this.add("*.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document");this.add("*.log", "text/x-log");this.add("*.nsc", "application/x-netshow-channel");this.add("*.egon", "application/x-egon");this.add("*.tr", "text/troff");this.add("*.ts", "application/x-linguist");this.add("*.zip", "application/zip");this.add("*.kml", "application/vnd.google-earth.kml+xml");this.add("*.iptables", "text/x-iptables");this.add("*.m15", "audio/x-mod");this.add("*.wdb", "application/vnd.ms-works");this.add("*.kmz", "application/vnd.google-earth.kmz");this.add("*.shar", "application/x-shar");this.add("*.nsv", "video/x-nsv");this.add("*.texinfo", "text/x-texinfo");this.add("*.so.[0-9].*", "application/x-sharedlib");this.add("*.ui", "application/x-designer");this.add("*.ilbm", "image/x-ilbm");this.add("*.3ds", "image/x-3ds");this.add("*.vbs", "application/x-vbscript");this.add("*.mrl", "text/x-mrml");this.add("*.vcf", "text/directory");this.add("*.mrw", "image/x-minolta-mrw");this.add("*.jpeg", "image/jpeg");this.add("*.3g2", "video/3gpp");this.add("*.dar", "application/x-dar");this.add("*.tar.gz", "application/x-compressed-tar");this.add("*.p7b", "application/x-pkcs7-certificates");this.add("*.lzma", "application/x-lzma");this.add("*.vct", "text/directory");this.add("*.vcs", "text/calendar");this.add("*.msi", "application/x-msi");this.add("*.msi", "application/x-ms-win-installer");this.add("*.psid", "audio/prs.sid");this.add("*.kon", "application/x-kontour");this.add("*.blender", "application/x-blender");this.add("*.pyc", "application/x-python-bytecode");this.add("*.owl", "application/rdf+xml");this.add("*.vda", "image/x-tga");this.add("*.dbf", "application/x-dbf");this.add("*.p7s", "application/pkcs7-signature");this.add("*.pyo", "application/x-python-bytecode");this.add("*.msx", "application/x-msx-rom");this.add("*.epsf.bz2", "image/x-bzeps");this.add("*.cb7", "application/x-cb7");this.add("*.jng", "image/x-jng");this.add("*.texi", "text/x-texinfo");this.add("*.so.[0-9]", "application/x-sharedlib");this.add("*.wp", "application/vnd.wordperfect");this.add("*.kpm", "application/x-kpovmodeler");this.add("*.jp2", "image/jp2");this.add("*.wv", "audio/x-wavpack");this.add("*.cab", "application/vnd.ms-cab-compressed");this.add("*.kpr", "application/x-kpresenter");this.add("*.3ga", "video/3gpp");this.add("*.kpt", "application/x-kpresenter");this.add("*.n64", "application/x-n64-rom");this.add("*.mtm", "audio/x-mod");this.add("*.m2t", "video/mpeg");this.add("*.glade", "application/x-glade");this.add("*.oxt", "application/vnd.openofficeorg.extension");this.add("*.iso9660", "application/x-cd-image");this.add("*.gif", "image/gif");this.add("*.dcm", "application/dicom");this.add("*.ime", "text/x-iMelody");this.add("*.h++", "text/x-c++hdr");this.add("*.3gp", "video/3gpp");this.add("*.tar", "application/x-tar");this.add("*.dcr", "image/x-kodak-dcr");this.add("*.xi", "audio/x-xi");this.add("*.xm", "audio/x-xm");this.add("*.dcl", "text/x-dcl");this.add("*.3gpp", "video/3gpp");this.add("*.kdelnk", "application/x-desktop");this.add("*.vivo", "video/vivo");this.add("*.xz", "application/x-xz");this.add("*.imy", "text/x-iMelody");this.add("*.m3u", "audio/x-mpegurl");this.add("*.mup", "text/x-mup");this.add("*.kra", "application/x-krita");this.add("*.cbr", "application/x-cbr");this.add("*.m4b", "audio/x-m4b");this.add("*.cbt", "application/x-cbt");this.add("*.cpio.gz", "application/x-cpio-compressed");this.add("*.jpg", "image/jpeg");this.add("*.m4a", "audio/mp4");this.add("*.dds", "image/x-dds");this.add("*.jpe", "image/jpeg");this.add("*.cbz", "application/x-cbz");this.add("*.jpc", "image/jp2");this.add("*.tbz", "application/x-bzip-compressed-tar");this.add("*.eps.bz2", "image/x-bzeps");this.add("*.jpf", "image/jp2");this.add("*.k25", "image/x-kodak-k25");this.add("*.jpr", "application/x-jbuilder-project");this.add("*.7z", "application/x-7z-compressed");this.add("*.ins", "text/x-tex");this.add("*.deb", "application/x-deb");this.add("*.ini", "text/plain");this.add("*.psf.gz", "application/x-gz-font-linux-psf");this.add("*.jpx", "application/x-jbuilder-project");this.add("*.jpx", "image/jp2");this.add("*.m4v", "video/mp4");this.add("*.bak", "application/x-trash");this.add("*.rmvb", "application/vnd.rn-realmedia");this.add("gmon.out", "application/x-profile");this.add("*.perl", "application/x-perl");this.add("*.sam", "application/x-amipro");this.add("*.fig", "image/x-xfig");this.add("*.bcpio", "application/x-bcpio");this.add("*.gtar", "application/x-tar");this.add("*.ltx", "text/x-tex");this.add("*.lua", "text/x-lua");this.add("*.der", "application/x-x509-ca-cert");this.add("*.sav", "application/x-spss-sav");this.add("*.wk1", "application/vnd.lotus-1-2-3");this.add("*.tcl", "text/x-tcl");this.add("*.wk3", "application/vnd.lotus-1-2-3");this.add("*.wk4", "application/vnd.lotus-1-2-3");this.add("*.zoo", "application/x-zoo");this.add("*.xcf.gz", "image/x-compressed-xcf");this.add("*.qtif", "image/x-quicktime");this.add("*.oleo", "application/x-oleo");this.add("*.ksp", "application/x-kspread");this.add("*.ps.gz", "application/x-gzpostscript");this.add("*.opml", "text/x-opml+xml");this.add("*.cdf", "application/x-netcdf");this.add("*.vhd", "text/x-vhdl");this.add("*.xla", "application/vnd.ms-excel");this.add("*.inf", "text/plain");this.add("*.xlc", "application/vnd.ms-excel");this.add("*.xld", "application/vnd.ms-excel");this.add("*.xlf", "application/x-xliff");this.add("*.cdr", "application/vnd.corel-draw");this.add("*.xll", "application/vnd.ms-excel");this.add("*.xlm", "application/vnd.ms-excel");this.add("*.602", "application/x-t602");this.add("*.mxf", "application/mxf");this.add("*.xls", "application/vnd.ms-excel");this.add("*.xlt", "application/vnd.ms-excel");this.add("*.aac", "audio/mp4");this.add("*.xlsm", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");this.add("*.xlw", "application/vnd.ms-excel");this.add("*.docbook", "application/docbook+xml");this.add("*.raf", "image/x-fuji-raf");this.add("*.fits", "image/fits");this.add("*.epsi.gz", "image/x-gzeps");this.add("*.xlsx", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");this.add("*.rdfs", "application/rdf+xml");this.add("*.ram", "application/ram");this.add("*.eif", "text/x-eiffel");this.add("*.scm", "text/x-scheme");this.add("*.ac3", "audio/ac3");this.add("*.rar", "application/x-rar");this.add("*.xmf", "audio/x-xmf");this.add("*.ras", "image/x-cmu-raster");this.add("*.cer", "application/x-x509-ca-cert");this.add("*.ldif", "text/x-ldif");this.add("*.kud", "application/x-kugar");this.add("*.rax", "audio/vnd.rn-realaudio");this.add("*.xml", "application/xml");this.add("*.gmo", "application/x-gettext-translation");this.add("*.xmi", "text/x-xmi");this.add("*.CSSL", "text/css");this.add("*.wks", "application/vnd.lotus-1-2-3");this.add("*.wks", "application/vnd.ms-works");this.add("*.tbz2", "application/x-bzip-compressed-tar");this.add("*.tex", "text/x-tex");this.add("*.raw", "image/x-panasonic-raw");this.add("*.sda", "application/vnd.stardivision.draw");this.add("*.sdc", "application/vnd.stardivision.calc");this.add("*.sdd", "application/vnd.stardivision.impress");this.add("*.bdf", "application/x-font-bdf");this.add("*.lwo", "image/x-lwo");this.add("*.lws", "image/x-lws");this.add("*.minipsf", "audio/x-minipsf");this.add("*.flc", "video/x-flic");this.add("*.gnc", "application/x-gnucash");this.add("*.gnd", "application/gnunet-directory");this.add("*.theme", "application/x-theme");this.add("*.sdp", "application/vnd.stardivision.impress");this.add("*.sdp", "application/sdp");this.add("*.fli", "video/x-flic");this.add("install", "text/x-install");this.add("*.sds", "application/vnd.stardivision.chart");this.add("*.abw", "application/x-abiword");this.add("*.j2k", "image/jp2");this.add("core", "application/x-core");this.add("*.sdw", "application/vnd.stardivision.writer");this.add("*.viv", "video/vivo");this.add("*.pdf.gz", "application/x-gzpdf");this.add("*.hpp", "text/x-c++hdr");this.add("*.flv", "video/x-flv");this.add("*.tiff", "image/tiff");this.add("*.flw", "application/x-kivio");this.add("*.ace", "application/x-ace");this.add("*.dvi.bz2", "application/x-bzdvi");this.add("*.dia", "application/x-dia-diagram");this.add("*.pcf.Z", "application/x-font-pcf");this.add("*.gnuplot", "application/x-gnuplot");this.add("*.wma", "audio/x-ms-wma");this.add("*.tga", "image/x-tga");this.add("*.cgm", "image/cgm");this.add("*.wmf", "image/x-wmf");this.add("*.torrent", "application/x-bittorrent");this.add("*.uil", "text/x-uil");this.add("*.vala", "text/x-vala");this.add("*.lwob", "image/x-lwo");this.add("*.kwd", "application/x-kword");this.add("*.wml", "text/vnd.wap.wml");this.add("*.iso", "application/x-cd-image");this.add("*.tgz", "application/x-compressed-tar");this.add("*.adb", "text/x-adasrc");this.add("*.wmv", "video/x-ms-wmv");this.add("*.wmx", "audio/x-ms-asx");this.add("*.rdf", "application/rdf+xml");this.add("*.kwt", "application/x-kword");this.add("*.vlc", "audio/x-mpegurl");this.add("*.lyx", "application/x-lyx");this.add("*.pdf.bz2", "application/x-bzpdf");this.add("*.chm", "application/x-chm");this.add("*.ufraw", "application/x-ufraw");this.add("*.gpg", "application/pgp-encrypted");this.add("*.ads", "text/x-adasrc");this.add("*.tar.Z", "application/x-tarz");this.add("*.xpm", "image/x-xpixmap");this.add("*.djv", "image/vnd.djvu");this.add("*.wp4", "application/vnd.wordperfect");this.add("*.wp5", "application/vnd.wordperfect");this.add("*.wp6", "application/vnd.wordperfect");this.add("*.xps", "application/vnd.ms-xpsdocument");this.add("*.lzh", "application/x-lha");this.add("*.lzo", "application/x-lzop");this.add("*.pak", "application/x-pak");this.add("*.sgf", "application/x-go-sgf");this.add("*.sylk", "text/spreadsheet");this.add("*.tif", "image/tiff");this.add("*.par2", "application/x-par2");this.add("*.sgi", "image/x-sgi");this.add("*.rej", "application/x-reject");this.add("*.sgl", "application/vnd.stardivision.writer");this.add("*.sgm", "text/sgml");this.add("*.xcf.bz2", "image/x-compressed-xcf");this.add("*.reg", "text/x-ms-regedit");this.add("*.pas", "text/x-pascal");this.add("*.emf", "image/x-emf");this.add("*.emp", "application/vnd.emusic-emusic_package");this.add("*.for", "text/x-fortran");this.add("*.pbm", "image/x-portable-bitmap");this.add("*.xbel", "application/x-xbel");this.add("*.gra", "application/x-graphite");this.add("*.afm", "application/x-font-afm");this.add("*.wpd", "application/vnd.wordperfect");this.add("*.shn", "application/x-shorten");this.add("*.wpg", "application/x-wpg");this.add("*.svgz", "image/svg+xml-compressed");this.add("*.cmake", "text/x-cmake");this.add("*.tar.bz2", "application/x-bzip-compressed-tar");this.add("*.wpl", "application/vnd.ms-wpl");this.add("*.dll", "application/x-sharedlib");this.add("*.ult", "audio/x-mod");this.add("*.wpp", "application/vnd.wordperfect");this.add("*.ent", "application/xml-external-parsed-entity");this.add("*.wps", "application/vnd.ms-works");this.add("*.669", "audio/x-mod");this.add("*.jnlp", "application/x-java-jnlp-file");this.add("*.pcf", "application/x-font-pcf");this.add("*.pcf", "application/x-cisco-vpn-settings");this.add("*.pcd", "image/x-photo-cd");this.add("*.bib", "text/x-bibtex");this.add("*.rgb", "image/x-rgb");this.add("*.sid", "audio/prs.sid");this.add("*.pcl", "application/vnd.hp-pcl");this.add("*.c++", "text/x-c++src");this.add("*.htm", "text/html");this.add("*.voc", "audio/x-voc");this.add("*.sik", "application/x-trash");this.add("*.vapi", "text/x-vala");this.add("*.bin", "application/octet-stream");this.add("*.vob", "video/mpeg");this.add("*.gsf", "application/x-font-type1");this.add("*.sk1", "image/x-skencil");this.add("*.ag", "image/x-applix-graphics");this.add("*.ai", "application/illustrator");this.add("*.sis", "application/vnd.symbian.install");this.add("*.sit", "application/x-stuffit");this.add("*.al", "application/x-perl");this.add("*.gsm", "audio/x-gsm");this.add("*.siv", "application/sieve");this.add("*.vor", "application/vnd.stardivision.writer");this.add("*.xsl", "application/xml");this.add("*.diff", "text/x-patch");this.add("*.pdb", "application/x-aportisdoc");this.add("*.pdb", "application/x-palm-database");this.add("*.pdc", "application/x-aportisdoc");this.add("*.as", "application/x-applix-spreadsheet");this.add("*.au", "audio/basic");this.add("*.pdf", "application/pdf");this.add("*.aw", "application/x-applix-word");this.add("*.obj", "application/x-tgif");this.add("*.sgml", "text/sgml");this.add("*.pcx", "image/x-pcx");this.add("*.dng", "image/x-adobe-dng");this.add("*.uni", "audio/x-mod");this.add("*.wbmp", "image/vnd.wap.wbmp");this.add("*.wri", "application/x-mswrite");this.add("*.java", "text/x-java");this.add("*.wrl", "model/vrml");this.add("*.flac", "audio/x-flac");this.add("*.cls", "text/x-tex");this.add("*.eps", "image/x-eps");this.add("*.kexi", "application/x-kexiproject-sqlite2");this.add("*.kexi", "application/x-kexiproject-sqlite3");this.add("*.tlz", "application/x-lzma-compressed-tar");this.add("*.pef", "image/x-pentax-pef");this.add("*.aif", "audio/x-aiff");this.add("*.ocl", "text/x-ocl");this.add("*.class", "application/x-java");this.add("*.doc", "application/msword");this.add("*.pem", "application/x-x509-ca-cert");this.add("*.bz", "application/x-bzip");this.add("makefile", "text/x-makefile");this.add("*.x3f", "image/x-sigma-x3f");this.add("*.cc", "text/x-c++src");this.add("*.skr", "application/pgp-keys");this.add("*.xul", "application/vnd.mozilla.xul+xml");this.add("*.xul", "application/vnd.mozilla.xul+xml");this.add("*.dot", "application/msword-template");this.add("*.dot", "text/vnd.graphviz");this.add("*.oda", "application/oda");this.add("*.odb", "application/vnd.oasis.opendocument.database");this.add("*.odc", "application/vnd.oasis.opendocument.chart");this.add("*.pict", "image/x-pict");this.add("*.pfb", "application/x-font-type1");this.add("*.odf", "application/vnd.oasis.opendocument.formula");this.add("*.odg", "application/vnd.oasis.opendocument.graphics");this.add("*.karbon", "application/x-karbon");this.add("*.odi", "application/vnd.oasis.opendocument.image");this.add("*.hwp", "application/x-hwp");this.add("*.xhtml", "application/xhtml+xml");this.add("*.odm", "application/vnd.oasis.opendocument.text-master");this.add("*.hwt", "application/x-hwt");this.add("credits", "text/x-credits");this.add("*.odp", "application/vnd.oasis.opendocument.presentation");this.add("*.tnf", "application/vnd.ms-tnef");this.add("*.pfa", "application/x-font-type1");this.add("*.ods", "application/vnd.oasis.opendocument.spreadsheet");this.add("*.odt", "application/vnd.oasis.opendocument.text");this.add("*.dc", "application/x-dc-rom");this.add("*.slk", "text/spreadsheet");this.add("*.erl", "text/x-erlang");this.add("*.pfx", "application/x-pkcs12");this.add("*.mab", "application/x-markaby");this.add("*.sisx", "x-epoc/x-sisx-app");this.add("*.ustar", "application/x-ustar");this.add("*.gvp", "text/x-google-video-pointer");this.add("*.dv", "video/dv");this.add("*.man", "application/x-troff-man");this.add("*.qif", "application/x-qw");this.add("*.qif", "image/x-quicktime");this.add("*.smd", "application/vnd.stardivision.mail");this.add("*.toc", "application/x-cdrdao-toc");this.add("*.smf", "application/vnd.stardivision.math");this.add("*.pgm", "image/x-portable-graymap");this.add("*.pgn", "application/x-chess-pgn");this.add("*.smi", "application/smil");this.add("*.smi", "application/x-sami");this.add("*.pgp", "application/pgp-encrypted");this.add("*.cs", "text/x-csharp");this.add("*.cs", "text/x-csharp");this.add("*.sml", "application/smil");this.add("*.smc", "application/x-snes-rom");this.add("*.xwd", "image/x-xwindowdump");this.add("*.bmp", "image/bmp");this.add("*.blend", "application/x-blender");this.add("*.com", "application/x-ms-dos-executable");this.add("*.atom", "application/atom+xml");this.add("*.sms", "application/x-sms-rom");this.add("*.el", "text/x-emacs-lisp");this.add("*.hxx", "text/x-c++hdr");this.add("*.g3", "image/fax-g3");this.add("*.vst", "image/x-tga");this.add("*.es", "application/ecmascript");this.add("*.PAR2", "application/x-par2");this.add("*.eps.gz", "image/x-gzeps");this.add("*.rle", "image/rle");this.add("*.snd", "audio/basic");this.add("*.ez", "application/andrew-inset");this.add("*.psflib", "audio/x-psflib");this.add("*.nds", "application/x-nintendo-ds-rom");this.add("*.php", "application/x-php");this.add("*.wvc", "audio/x-wavpack-correction");this.add("*.123", "application/vnd.lotus-1-2-3");this.add("*.uri", "text/x-uri");this.add("*.url", "text/x-uri");this.add("*.abw.CRASHED", "application/x-abiword");this.add("*.cr2", "image/x-canon-cr2");this.add("*.tar.xz", "application/x-xz-compressed-tar");this.add("*.roff", "text/troff");this.add("*.fl", "application/x-fluid");this.add("*.alz", "application/x-alz");this.add("*.oga", "audio/ogg");this.add("*.wvp", "audio/x-wavpack");this.add("*.nef", "image/x-nikon-nef");this.add("*,v", "text/plain");this.add("*.C", "text/x-c++src");this.add("*.themepack", "application/x-windows-themepack");this.add("*.ogg", "audio/ogg");this.add("*.ogg", "audio/x-vorbis+ogg");this.add("*.ogg", "audio/x-flac+ogg");this.add("*.ogg", "audio/x-speex+ogg");this.add("*.ogg", "video/x-theora+ogg");this.add("*.wvx", "audio/x-ms-asx");this.add("*.fo", "text/x-xslfo");this.add("*.etx", "text/x-setext");this.add("*.pptm", "application/vnd.openxmlformats-officedocument.presentationml.presentation");this.add("readme", "text/x-readme");this.add("todo", "text/x-todo");this.add("license", "text/x-license");this.add("*.version", "text/x-version");this.add("Makefile.*", "text/x-makefile");this.add("*.dmg", "application/x-apple-diskimage");this.add("*.swp", "application/x-igelle-software-package");this.add("*.squashfs", "application/x-igelle-diskimage-squashfs");this.add("*.img", "application/x-igelle-diskimage");this.add("*.eq", "text/x-eqela-src");this.add("*.equity", "text/x-eqela-equity-src");this.add("*.eqic", "text/x-eqela-eqic-config");this.add("*.config", "text/x-config");this.add("*.eqlib", "application/x-eqela-library");this.add("*.eqlibx", "application/x-eqela-library-encrypted");this.add("*.apk", "application/vnd.android.package-archive");this.add("*.eo", "application/x-eqela-object");this.add("*.eo1", "application/x-eqela-object-level-1");this.add("*.eo2", "application/x-eqela-object-level-2");this.add("*.eo3", "application/x-eqela-object-level-3");this.add("*.eo4", "application/x-eqela-object-level-4");this.add("*.eo5", "application/x-eqela-object-level-5");this.add("*.iga", "application/x-igelle-archive");this.add("*.ipa", "application/octet-stream");this.add("*.xap", "application/x-silverlight-app");this.add("*.webapp", "application/x-web-app-manifest+json");this.add("*.json", "application/json");this.add("*.properties", "application/properties");return(this);};P.getMimetype = function(str) {var v = null;if(!((str) == (null))) {var mime = null;var ld = CapeString.lastIndexOfWithStringAndCharacterAndSignedInteger(str, '.', -(1));if((ld) >= (0)) {(mime) = CapeString.subStringWithStringAndSignedInteger(str, (ld) + (1));}(v) = CapeMap.getMapAndK(CapexMimeTypeRegistry.htMime, CapeString.toLowerCase(mime));}if((v) == (null) || CapeString.getLength(v) < (1)) {(v) = ("application/unknown");}return(v);};P.getExtension = function(mimetype) {return(CapeMap.getMapAndK(CapexMimeTypeRegistry.htExt, mimetype));};P.add = function(pattern, mimetype) {var v = false;if((pattern) == (null) || (mimetype) == (null)) {;}else {if(CapeString.startsWithWithStringAndStringAndSignedInteger(pattern, ".", 0) === (true)) {var key = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(pattern, 1, CapeString.getLength(pattern) - (1));CapeMap.set(CapexMimeTypeRegistry.htMime, key, mimetype);CapeMap.set(CapexMimeTypeRegistry.htExt, mimetype, key);(v) = (true);}else {if(CapeString.startsWithWithStringAndStringAndSignedInteger(pattern, "*.", 0) === (true)) {var key = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(pattern, 2, CapeString.getLength(pattern) - (2));CapeMap.set(CapexMimeTypeRegistry.htMime, key, mimetype);CapeMap.set(CapexMimeTypeRegistry.htExt, mimetype, key);(v) = (true);}else {if(CapeString.startsWithWithStringAndStringAndSignedInteger(pattern, "#", 0) === (true)) {;}else {CapeMap.set(CapexMimeTypeRegistry.htMime, pattern, mimetype);CapeMap.set(CapexMimeTypeRegistry.htExt, mimetype, pattern);(v) = (true);}}}}return(v);};P.read = function(file) {if((file) == (null)) {return(false);}var buf = CapePrintReader.createInstanceWithReader(file.read());if((buf) == (null)) {return(false);}else {var n = 0;while(true) {var line = buf.readLine();if((line) == (null)) {break;}var va = CapeString.split(line, ':', 0);var val = CapeVector.iterate(va);if((val) !== (null)) {var front = val.next();var back = val.next();if(!((front) == (null))) {(front) = CapeString.strip(front);}if(!((back) == (null))) {(back) = CapeString.strip(back);}if(this.add(front, back)) {(n)++;}}}}return(true);};var CapexNativeWebClient = function() {{} };var P = CapexNativeWebClient.prototype;P.constructor = CapexNativeWebClient;P._t = {}; P._t["CapexNativeWebClient"] = true;CapexNativeWebClient.createInstance = function() {var _v = new CapexNativeWebClient();return(_v._construct());};P._construct = function() {return(this);};CapexNativeWebClient.instance = function() {return(CapexWebClientForJavaScript.createInstance());};var CapexPaperConfiguration = function() {this.size = null;this.orientation = null;{} };var P = CapexPaperConfiguration.prototype;P.constructor = CapexPaperConfiguration;P._t = {}; P._t["CapexPaperConfiguration"] = true;CapexPaperConfiguration.createInstance = function() {var _v = new CapexPaperConfiguration();return(_v._construct());};P._construct = function() {(this.orientation) = (null);(this.size) = (null);return(this);};CapexPaperConfiguration.forDefault = function() {return(CapexPaperConfiguration.forA4Portrait());};CapexPaperConfiguration.forA4Portrait = function() {var v = CapexPaperConfiguration.createInstance();v.setSize(CapexPaperSize.forValue(CapexPaperSize.A4));v.setOrientation(CapexPaperOrientation.forValue(CapexPaperOrientation.PORTRAIT));return(v);};CapexPaperConfiguration.forA4Landscape = function() {var v = CapexPaperConfiguration.createInstance();v.setSize(CapexPaperSize.forValue(CapexPaperSize.A4));v.setOrientation(CapexPaperOrientation.forValue(CapexPaperOrientation.LANDSCAPE));return(v);};P.getSizeInches = function() {var sz = this.getRawSizeInches();if(CapexPaperOrientation.matches(this.orientation, CapexPaperOrientation.LANDSCAPE)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(sz.getHeight(), sz.getWidth()));}return(sz);};P.getRawSizeInches = function() {if(CapexPaperSize.matches(this.size, CapexPaperSize.LETTER)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(8.5, 11));}if(CapexPaperSize.matches(this.size, CapexPaperSize.LEGAL)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(8.5, 14));}if(CapexPaperSize.matches(this.size, CapexPaperSize.A3)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(11.7, 16.5));}if(CapexPaperSize.matches(this.size, CapexPaperSize.A4)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(8.27, 11.7));}if(CapexPaperSize.matches(this.size, CapexPaperSize.A5)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(5.8, 8.3));}if(CapexPaperSize.matches(this.size, CapexPaperSize.B4)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(9.8, 13.9));}if(CapexPaperSize.matches(this.size, CapexPaperSize.B5)) {return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(6.9, 9.8));}return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(8.27, 11.7));};P.getSizeDots = function(dpi) {var szi = this.getSizeInches();return(CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble(szi.getWidth() * (dpi), szi.getHeight() * (dpi)));};P.getSize = function() {return(this.size);};P.setSize = function(v) {(this.size) = (v);return(this);};P.getOrientation = function() {return(this.orientation);};P.setOrientation = function(v) {(this.orientation) = (v);return(this);};var P2 = P;CapexPaperConfiguration.Size = function() {this.width = null;this.height = null;{} };var P = CapexPaperConfiguration.Size.prototype;P.constructor = CapexPaperConfiguration.Size;P._t = {}; P._t["CapexPaperConfiguration.Size"] = true;CapexPaperConfiguration.Size.createInstance = function() {var _v = new CapexPaperConfiguration.Size();return(_v._construct());};P._construct = function() {(this.height) = (0.0);(this.width) = (0.0);(this.width) = (0.0);(this.height) = (0.0);return(this);};CapexPaperConfiguration.Size.createInstanceWithDoubleAndDouble = function(w, h) {var _v = new CapexPaperConfiguration.Size();return(_v._constructDoubleAndDouble(w, h));};P._constructDoubleAndDouble = function(w, h) {(this.height) = (0.0);(this.width) = (0.0);(this.width) = (w);(this.height) = (h);return(this);};P.getHeight = function() {return(this.height);};P.getWidth = function() {return(this.width);};P = P2;P2 = null;var CapexPaperOrientation = function() {this.value = null;{} };var P = CapexPaperOrientation.prototype;P.constructor = CapexPaperOrientation;CapexPaperOrientation.LANDSCAPE = 0;CapexPaperOrientation.PORTRAIT = 1;CapexPaperOrientation.COUNT = 2;P._t = {}; P._t["CapexPaperOrientation"] = true;P._t["CapeStringObject"] = true;CapexPaperOrientation.createInstance = function() {var _v = new CapexPaperOrientation();return(_v._construct());};P._construct = function() {(this.value) = (0);return(this);};CapexPaperOrientation.getAll = function() {var v = new Array();var n = 0;for((n) = (0) ; (n) < (CapexPaperOrientation.COUNT) ; (n)++) {CapeVector.append(v, CapexPaperOrientation.forValue(n));}return(v);};CapexPaperOrientation.matches = function(oo, value) {if((oo) !== (null) && oo.getValue() === (value)) {return(true);}return(false);};CapexPaperOrientation.forValue = function(value) {return(CapexPaperOrientation.createInstance().setValue(value));};P.toString = function() {if((this.value) === (CapexPaperOrientation.LANDSCAPE)) {return("Landscape");}if((this.value) === (CapexPaperOrientation.PORTRAIT)) {return("Portrait");}return("Unknown orientation");};P.getValue = function() {return(this.value);};P.setValue = function(v) {(this.value) = (v);return(this);};var CapexPaperSize = function() {this.value = null;{} };var P = CapexPaperSize.prototype;P.constructor = CapexPaperSize;CapexPaperSize.LETTER = 0;CapexPaperSize.LEGAL = 1;CapexPaperSize.A3 = 2;CapexPaperSize.A4 = 3;CapexPaperSize.A5 = 4;CapexPaperSize.B4 = 5;CapexPaperSize.B5 = 6;CapexPaperSize.COUNT = 7;P._t = {}; P._t["CapexPaperSize"] = true;P._t["CapeStringObject"] = true;CapexPaperSize.createInstance = function() {var _v = new CapexPaperSize();return(_v._construct());};P._construct = function() {(this.value) = (0);return(this);};CapexPaperSize.getAll = function() {var v = new Array();var n = 0;for((n) = (0) ; (n) < (CapexPaperSize.COUNT) ; (n)++) {CapeVector.append(v, CapexPaperSize.forValue(n));}return(v);};CapexPaperSize.matches = function(sz, value) {if((sz) !== (null) && sz.getValue() === (value)) {return(true);}return(false);};CapexPaperSize.forValue = function(value) {return(CapexPaperSize.createInstance().setValue(value));};P.toString = function() {if((this.value) === (CapexPaperSize.LETTER)) {return("US Letter");}if((this.value) === (CapexPaperSize.LEGAL)) {return("US Legal");}if((this.value) === (CapexPaperSize.A3)) {return("A3");}if((this.value) === (CapexPaperSize.A4)) {return("A4");}if((this.value) === (CapexPaperSize.A5)) {return("A5");}if((this.value) === (CapexPaperSize.B4)) {return("B4");}if((this.value) === (CapexPaperSize.B5)) {return("B5");}return("Unknown paper size");};P.getValue = function() {return(this.value);};P.setValue = function(v) {(this.value) = (v);return(this);};var CapexPhysicalAddress = function() {this.latitude = null;this.longitude = null;this.completeAddress = null;this.country = null;this.countryCode = null;this.administrativeArea = null;this.subAdministrativeArea = null;this.locality = null;this.subLocality = null;this.streetAddress = null;this.streetAddressDetail = null;this.postalCode = null;{} };var P = CapexPhysicalAddress.prototype;P.constructor = CapexPhysicalAddress;P._t = {}; P._t["CapexPhysicalAddress"] = true;P._t["CapeStringObject"] = true;CapexPhysicalAddress.createInstance = function() {var _v = new CapexPhysicalAddress();return(_v._construct());};P._construct = function() {(this.postalCode) = (null);(this.streetAddressDetail) = (null);(this.streetAddress) = (null);(this.subLocality) = (null);(this.locality) = (null);(this.subAdministrativeArea) = (null);(this.administrativeArea) = (null);(this.countryCode) = (null);(this.country) = (null);(this.completeAddress) = (null);(this.longitude) = (0.0);(this.latitude) = (0.0);return(this);};CapexPhysicalAddress.forString = function(str) {var v = CapexPhysicalAddress.createInstance();v.fromString(str);return(v);};CapexPhysicalAddress.objectAsCapeDynamicMap = function(o) {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeDynamicMap"))) {return(o);}return(null);};P.fromString = function(str) {var data = null;if(!((str) == (null))) {(data) = CapexPhysicalAddress.objectAsCapeDynamicMap(CapeJSONParser.parseString(str));}if((data) == (null)) {(data) = CapeDynamicMap.createInstance();}(this.latitude) = data.getDouble("latitude", 0.0);(this.longitude) = data.getDouble("longitude", 0.0);(this.completeAddress) = data.getString("completeAddress", null);(this.country) = data.getString("country", null);(this.countryCode) = data.getString("countryCode", null);(this.administrativeArea) = data.getString("administrativeArea", null);(this.subAdministrativeArea) = data.getString("subAdministrativeArea", null);(this.locality) = data.getString("locality", null);(this.subLocality) = data.getString("subLocality", null);(this.streetAddress) = data.getString("streetAddress", null);(this.streetAddressDetail) = data.getString("streetAddressDetail", null);(this.postalCode) = data.getString("postalCode", null);};P.toString = function() {var v = CapeDynamicMap.createInstance();v.setStringAndDouble("latitude", this.latitude);v.setStringAndDouble("longitude", this.longitude);v.setStringAndObject("completeAddress", this.completeAddress);v.setStringAndObject("country", this.country);v.setStringAndObject("countryCode", this.countryCode);v.setStringAndObject("administrativeArea", this.administrativeArea);v.setStringAndObject("subAdministrativeArea", this.subAdministrativeArea);v.setStringAndObject("locality", this.locality);v.setStringAndObject("subLocality", this.subLocality);v.setStringAndObject("streetAddress", this.streetAddress);v.setStringAndObject("streetAddressDetail", this.streetAddressDetail);v.setStringAndObject("postalCode", this.postalCode);return(CapeJSONEncoder.encode(v, false));};P.getLatitude = function() {return(this.latitude);};P.setLatitude = function(v) {(this.latitude) = (v);return(this);};P.getLongitude = function() {return(this.longitude);};P.setLongitude = function(v) {(this.longitude) = (v);return(this);};P.getCompleteAddress = function() {return(this.completeAddress);};P.setCompleteAddress = function(v) {(this.completeAddress) = (v);return(this);};P.getCountry = function() {return(this.country);};P.setCountry = function(v) {(this.country) = (v);return(this);};P.getCountryCode = function() {return(this.countryCode);};P.setCountryCode = function(v) {(this.countryCode) = (v);return(this);};P.getAdministrativeArea = function() {return(this.administrativeArea);};P.setAdministrativeArea = function(v) {(this.administrativeArea) = (v);return(this);};P.getSubAdministrativeArea = function() {return(this.subAdministrativeArea);};P.setSubAdministrativeArea = function(v) {(this.subAdministrativeArea) = (v);return(this);};P.getLocality = function() {return(this.locality);};P.setLocality = function(v) {(this.locality) = (v);return(this);};P.getSubLocality = function() {return(this.subLocality);};P.setSubLocality = function(v) {(this.subLocality) = (v);return(this);};P.getStreetAddress = function() {return(this.streetAddress);};P.setStreetAddress = function(v) {(this.streetAddress) = (v);return(this);};P.getStreetAddressDetail = function() {return(this.streetAddressDetail);};P.setStreetAddressDetail = function(v) {(this.streetAddressDetail) = (v);return(this);};P.getPostalCode = function() {return(this.postalCode);};P.setPostalCode = function(v) {(this.postalCode) = (v);return(this);};var CapexPixelRegionBuffer = function() {this.src = null;this.rangew = null;this.rangeh = null;this.cache = null;{} };var P = CapexPixelRegionBuffer.prototype;P.constructor = CapexPixelRegionBuffer;P._t = {}; P._t["CapexPixelRegionBuffer"] = true;CapexPixelRegionBuffer.createInstance = function() {var _v = new CapexPixelRegionBuffer();return(_v._construct());};P._construct = function() {(this.cache) = (null);(this.rangeh) = (0);(this.rangew) = (0);(this.src) = (null);return(this);};CapexPixelRegionBuffer.forRgbaPixels = function(src, w, h) {var v = CapexPixelRegionBuffer.createInstance();v.src = (src);v.rangew = (w);v.rangeh = (h);return(v);};P.getStride = function() {return((this.rangew) * (4));};P.getBufferRegion = function(x, y, newbuffer) {if((this.cache) == (null) && (newbuffer) === (false)) {(this.cache) = (new ArrayBuffer((this.rangew) * (this.rangeh) * (4)));}var v = this.cache;if(newbuffer) {(v) = (new ArrayBuffer((this.rangew) * (this.rangeh) * (4)));}var p = v;if((p) == (null)) {return(null);}var i = 0;var j = 0;for((i) = (0) ; (i) < (this.rangeh) ; (i)++) {for((j) = (0) ; (j) < (this.rangew) ; (j)++) {var pix = this.src.getRgbaPixel((x) + (j), (y) + (i), false);CapeBuffer.setByte(p, ((i) * (this.rangew) + (j)) * (4) + (0), pix[0]);CapeBuffer.setByte(p, ((i) * (this.rangew) + (j)) * (4) + (1), pix[1]);CapeBuffer.setByte(p, ((i) * (this.rangew) + (j)) * (4) + (2), pix[2]);CapeBuffer.setByte(p, ((i) * (this.rangew) + (j)) * (4) + (3), pix[3]);}}return(v);};var CapexQueryString = function() {{} };var P = CapexQueryString.prototype;P.constructor = CapexQueryString;P._t = {}; P._t["CapexQueryString"] = true;CapexQueryString.createInstance = function() {var _v = new CapexQueryString();return(_v._construct());};P._construct = function() {return(this);};CapexQueryString.parse = function(queryString) {var v = new Map();var array = CapeString.split(queryString, '&', 0);if((array) !== (null)) {var n = 0;var m = array.length;for((n) = (0) ; (n) < (m) ; (n)++) {var qs = array[n];if((qs) !== (null)) {if(CapeString.isEmpty(qs)) {continue;}if(CapeString.indexOfWithStringAndCharacterAndSignedInteger(qs, '=', 0) < (0)) {CapeMap.set(v, qs, null);continue;}var qsps = CapeString.split(qs, '=', 2);var key = qsps[0];var val = qsps[1];if((val) == (null)) {(val) = ("");}if(CapeString.isEmpty(key) === (false)) {CapeMap.set(v, key, CapexURLDecoder.decode(val));}}}}return(v);};var CapexRGBAPixelIntegerBuffer = function() {this.buffer = null;this.pointer = null;this.width = null;this.height = null;this.cache = null;{} };var P = CapexRGBAPixelIntegerBuffer.prototype;P.constructor = CapexRGBAPixelIntegerBuffer;P._t = {}; P._t["CapexRGBAPixelIntegerBuffer"] = true;CapexRGBAPixelIntegerBuffer.createInstance = function() {var _v = new CapexRGBAPixelIntegerBuffer();return(_v._construct());};P._construct = function() {(this.cache) = (null);(this.height) = (0);(this.width) = (0);(this.pointer) = (null);(this.buffer) = (null);return(this);};CapexRGBAPixelIntegerBuffer.create = function(b, w, h) {var v = CapexRGBAPixelIntegerBuffer.createInstance();v.buffer = (b);v.width = (w);v.height = (h);v.pointer = (b);return(v);};P.getWidth = function() {return(this.width);};P.getHeight = function() {return(this.height);};P.getRgbaPixel = function(x, y, newbuffer) {if((this.cache) == (null) && (newbuffer) === (false)) {(this.cache) = ([]);}var v = this.cache;if(newbuffer) {(v) = ([]);}var i = 0;if((x) < (0) || (x) >= (this.width) || (y) < (0) || (y) >= (this.height)) {return(v);}for((i) = (0) ; (i) < (4) ; (i)++) {(v[i]) = CapeBuffer.getByte(this.pointer, ((y) * (this.width) + (x)) * (4) + (i));}return(v);};var CapexRichTextParagraph = function() {{} };var P = CapexRichTextParagraph.prototype;P.constructor = CapexRichTextParagraph;P._t = {}; P._t["CapexRichTextParagraph"] = true;CapexRichTextParagraph.createInstance = function() {var _v = new CapexRichTextParagraph();return(_v._construct());};P._construct = function() {return(this);};P.toMarkup = function() {return(null);};P.toText = function() {return(null);};P.toJson = function() {return(null);};P.toHtml = function(refs) {return(null);};var CapexRichTextContentParagraph = function() {CapexRichTextParagraph.call(this);this.contentId = null;{} };var P = CapexRichTextContentParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextContentParagraph;P._t = {}; P._t["CapexRichTextContentParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextContentParagraph.createInstance = function() {var _v = new CapexRichTextContentParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}(this.contentId) = (null);return(this);};P.toMarkup = function() {return("@content " + this.contentId + "\n");};P.toText = function() {return("[content:" + this.contentId + "]\n");};P.toJson = function() {var map = CapeDynamicMap.createInstance();map.setStringAndObject("type", "content");map.setStringAndObject("id", this.contentId);return(map);};P.toHtml = function(refs) {var cc = null;if((refs) !== (null) && !((this.contentId) == (null))) {(cc) = refs.getContentString(this.contentId);}if((cc) == (null)) {(cc) = ("");}return(cc);};P.getContentId = function() {return(this.contentId);};P.setContentId = function(v) {(this.contentId) = (v);return(this);};var CapexRichTextDocument = function() {this.metadata = null;this.paragraphs = null;{} };var P = CapexRichTextDocument.prototype;P.constructor = CapexRichTextDocument;P._t = {}; P._t["CapexRichTextDocument"] = true;CapexRichTextDocument.forWikiMarkupFile = function(file) {return(CapexRichTextWikiMarkupParser.parseFile(file));};CapexRichTextDocument.forWikiMarkupString = function(str) {return(CapexRichTextWikiMarkupParser.parseString(str));};CapexRichTextDocument.createInstance = function() {var _v = new CapexRichTextDocument();return(_v._construct());};P._construct = function() {(this.paragraphs) = (null);(this.metadata) = (null);(this.metadata) = CapeDynamicMap.createInstance();return(this);};P.getTitle = function() {return(this.metadata.getString("title", null));};P.setTitle = function(v) {this.metadata.setStringAndObject("title", v);return(this);};P.getMetadata = function(k) {return(this.metadata.getString(k, null));};P.setMetadata = function(k, v) {this.metadata.setStringAndObject(k, v);return(this);};P.addParagraph = function(rtp) {if((rtp) == (null)) {return(this);}if((this.paragraphs) == (null)) {(this.paragraphs) = (new Array());}CapeVector.append(this.paragraphs, rtp);if(this.getTitle() == (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (rtp, "CapexRichTextStyledParagraph")) && (((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (rtp, "CapexRichTextStyledParagraph")) ? (rtp) : (null)).getHeading() === (1)) {this.setTitle((((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (rtp, "CapexRichTextStyledParagraph")) ? (rtp) : (null)).getTextContent());}return(this);};P.getAllReferences = function() {var v = new Array();if((this.paragraphs) !== (null)) {var n = 0;var m = this.paragraphs.length;for((n) = (0) ; (n) < (m) ; (n)++) {var paragraph = this.paragraphs[n];if((paragraph) !== (null)) {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (paragraph, "CapexRichTextReferenceParagraph"))) {var ref = paragraph.getReference();if(CapeString.isEmpty(ref) === (false)) {v.push(ref);}}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (paragraph, "CapexRichTextStyledParagraph"))) {var array = paragraph.getSegments();if((array) !== (null)) {var n2 = 0;var m2 = array.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var segment = array[n2];if((segment) !== (null)) {var ref = segment.getReference();if(CapeString.isEmpty(ref) === (false)) {v.push(ref);}}}}}}}}}return(v);};P.getAllLinks = function() {var v = new Array();if((this.paragraphs) !== (null)) {var n = 0;var m = this.paragraphs.length;for((n) = (0) ; (n) < (m) ; (n)++) {var paragraph = this.paragraphs[n];if((paragraph) !== (null)) {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (paragraph, "CapexRichTextLinkParagraph"))) {var link = paragraph.getLink();if(CapeString.isEmpty(link) === (false)) {v.push(link);}}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (paragraph, "CapexRichTextStyledParagraph"))) {var array = paragraph.getSegments();if((array) !== (null)) {var n2 = 0;var m2 = array.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var segment = array[n2];if((segment) !== (null)) {var link = segment.getLink();if(CapeString.isEmpty(link) === (false)) {v.push(link);}}}}}}}}}return(v);};P.toJson = function() {var v = CapeDynamicMap.createInstance();v.setStringAndObject("metadata", this.metadata);v.setStringAndObject("title", this.getTitle());var pp = new Array();if((this.paragraphs) !== (null)) {var n = 0;var m = this.paragraphs.length;for((n) = (0) ; (n) < (m) ; (n)++) {var par = this.paragraphs[n];if((par) !== (null)) {var pj = par.toJson();if((pj) !== (null)) {CapeVector.append(pp, pj);}}}}v.setStringAndObject("paragraphs", pp);return(v);};P.toHtml = function(refs) {var sb = CapeStringBuilder.createInstance();var array = this.getParagraphs();if((array) !== (null)) {var n = 0;var m = array.length;for((n) = (0) ; (n) < (m) ; (n)++) {var paragraph = array[n];if((paragraph) !== (null)) {var html = paragraph.toHtml(refs);if(CapeString.isEmpty(html) === (false)) {sb.appendString(html);sb.appendCharacter('\n');}}}}return(sb.toString());};P.getParagraphs = function() {return(this.paragraphs);};P.setParagraphs = function(v) {(this.paragraphs) = (v);return(this);};var CapexRichTextImageParagraph = function() {CapexRichTextParagraph.call(this);this.filename = null;this.width = null;{} };var P = CapexRichTextImageParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextImageParagraph;P._t = {}; P._t["CapexRichTextImageParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextImageParagraph.createInstance = function() {var _v = new CapexRichTextImageParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}(this.width) = (100);(this.filename) = (null);return(this);};P.toMarkup = function() {if((this.width) >= (100)) {return("@image " + this.filename + "\n");}if((this.width) >= (75)) {return("@image75 " + this.filename + "\n");}if((this.width) >= (50)) {return("@image50 " + this.filename + "\n");}return("@image25 " + this.filename + "\n");};P.toText = function() {return("[image:" + this.filename + "]\n");};P.toJson = function() {var v = CapeDynamicMap.createInstance();v.setStringAndObject("type", "image");v.setStringAndSignedInteger("width", this.width);v.setStringAndObject("filename", this.filename);return(v);};P.toHtml = function(refs) {var sb = CapeStringBuilder.createInstance();if((this.width) >= (100)) {sb.appendString("<div class=\"img100\">");}else {if((this.width) >= (75)) {sb.appendString("<div class=\"img75\">");}else {if((this.width) >= (50)) {sb.appendString("<div class=\"img50\">");}else {sb.appendString("<div class=\"img25\">");}}}sb.appendString("<img src=\"" + CapexHTMLString.sanitize(this.filename) + "\" />");sb.appendString("</div>\n");return(sb.toString());};P.getFilename = function() {return(this.filename);};P.setFilename = function(v) {(this.filename) = (v);return(this);};P.getWidth = function() {return(this.width);};P.setWidth = function(v) {(this.width) = (v);return(this);};var CapexRichTextLinkParagraph = function() {CapexRichTextParagraph.call(this);this.link = null;this.text = null;this.popup = null;{} };var P = CapexRichTextLinkParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextLinkParagraph;P._t = {}; P._t["CapexRichTextLinkParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextLinkParagraph.createInstance = function() {var _v = new CapexRichTextLinkParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}(this.popup) = (false);(this.text) = (null);(this.link) = (null);return(this);};P.toMarkup = function() {var sb = CapeStringBuilder.createInstance();sb.appendString("@link ");sb.appendString(this.link);sb.appendCharacter(' ');sb.appendCharacter('\"');if(CapeString.isEmpty(this.text) === (false)) {sb.appendString(this.text);}sb.appendCharacter('\"');if(this.popup) {sb.appendString(" popup");}return(sb.toString());};P.toText = function() {var v = this.text;if(CapeString.isEmpty(v)) {(v) = (this.link);}return(v);};P.toJson = function() {var v = CapeDynamicMap.createInstance();v.setStringAndObject("type", "link");v.setStringAndObject("link", this.link);v.setStringAndObject("text", this.text);return(v);};P.toHtml = function(refs) {var href = CapexHTMLString.sanitize(this.link);var tt = this.text;if(CapeString.isEmpty(tt)) {(tt) = (href);}if(CapeString.isEmpty(tt)) {(tt) = ("(empty link)");}var targetblank = "";if(this.popup) {(targetblank) = (" target=\"_blank\"");}return("<p class=\"link\"><a href=\"" + href + "\"" + targetblank + ">" + tt + "</a></p>\n");};P.getLink = function() {return(this.link);};P.setLink = function(v) {(this.link) = (v);return(this);};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};P.getPopup = function() {return(this.popup);};P.setPopup = function(v) {(this.popup) = (v);return(this);};var CapexRichTextBlockParagraph = function() {CapexRichTextParagraph.call(this);this.id = null;this.text = null;{} };var P = CapexRichTextBlockParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextBlockParagraph;P._t = {}; P._t["CapexRichTextBlockParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextBlockParagraph.createInstance = function() {var _v = new CapexRichTextBlockParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}(this.text) = (null);(this.id) = (null);return(this);};P.toMarkup = function() {var sb = CapeStringBuilder.createInstance();var delim = null;if(CapeString.isEmpty(this.id)) {(delim) = ("-- ");}else {(delim) = ("-- " + this.id + " --");}sb.appendString(delim);sb.appendCharacter('\n');if(!((this.text) == (null))) {sb.appendString(this.text);if(CapeString.endsWithWithStringAndString(this.text, "\n") === (false)) {sb.appendCharacter('\n');}}sb.appendString(delim);return(sb.toString());};P.toText = function() {return(this.text);};P.toJson = function() {var map = CapeDynamicMap.createInstance();map.setStringAndObject("type", "block");map.setStringAndObject("id", this.id);map.setStringAndObject("text", this.text);return(map);};P.toHtml = function(refs) {var ids = "";if(CapeString.isEmpty(this.id) === (false)) {(ids) = (" " + CapexHTMLString.sanitize(this.id));}var content = CapexRichTextStyledParagraph.forString(this.text);return("<div class=\"block" + ids + "\">" + content.toHtml(refs) + "</div>");};P.getId = function() {return(this.id);};P.setId = function(v) {(this.id) = (v);return(this);};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};var CapexRichTextPreformattedParagraph = function() {CapexRichTextParagraph.call(this);this.id = null;this.text = null;{} };var P = CapexRichTextPreformattedParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextPreformattedParagraph;P._t = {}; P._t["CapexRichTextPreformattedParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextPreformattedParagraph.createInstance = function() {var _v = new CapexRichTextPreformattedParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}(this.text) = (null);(this.id) = (null);return(this);};P.toMarkup = function() {var sb = CapeStringBuilder.createInstance();var delim = null;if(CapeString.isEmpty(this.id)) {(delim) = ("---");}else {(delim) = ("--- " + this.id + " ---");}sb.appendString(delim);sb.appendCharacter('\n');if(!((this.text) == (null))) {sb.appendString(this.text);if(CapeString.endsWithWithStringAndString(this.text, "\n") === (false)) {sb.appendCharacter('\n');}}sb.appendString(delim);return(sb.toString());};P.toText = function() {return(this.text);};P.toJson = function() {var v = CapeDynamicMap.createInstance();v.setStringAndObject("type", "preformatted");v.setStringAndObject("id", this.id);v.setStringAndObject("text", this.text);return(v);};P.toHtml = function(refs) {var ids = "";if(CapeString.isEmpty(this.id) === (false)) {(ids) = (" id=\"" + CapexHTMLString.sanitize(this.id) + "\"");}var codeo = "";var codec = "";if(CapeString.equals("code", this.id)) {(codeo) = ("<code>");(codec) = ("</code>");}return("<pre" + ids + ">" + codeo + CapexHTMLString.sanitize(this.text) + codec + "</pre>");};P.getId = function() {return(this.id);};P.setId = function(v) {(this.id) = (v);return(this);};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};var CapexRichTextReferenceParagraph = function() {CapexRichTextParagraph.call(this);this.reference = null;this.text = null;{} };var P = CapexRichTextReferenceParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextReferenceParagraph;P._t = {}; P._t["CapexRichTextReferenceParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextReferenceParagraph.createInstance = function() {var _v = new CapexRichTextReferenceParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}(this.text) = (null);(this.reference) = (null);return(this);};P.toMarkup = function() {var sb = CapeStringBuilder.createInstance();sb.appendString("@reference ");sb.appendString(this.reference);if(CapeString.isEmpty(this.text) === (false)) {sb.appendCharacter(' ');sb.appendCharacter('\"');sb.appendString(this.text);sb.appendCharacter('\"');}return(sb.toString());};P.toText = function() {var v = this.text;if(CapeString.isEmpty(this.text)) {(v) = (this.reference);}return(v);};P.toJson = function() {var v = CapeDynamicMap.createInstance();v.setStringAndObject("type", "reference");v.setStringAndObject("reference", this.reference);v.setStringAndObject("text", this.text);return(v);};P.toHtml = function(refs) {var reftitle = null;var href = null;if(CapeString.isEmpty(this.text) === (false)) {(reftitle) = (this.text);}if(CapeString.isEmpty(reftitle)) {if((refs) !== (null)) {(reftitle) = refs.getReferenceTitle(this.reference);}else {(reftitle) = (this.reference);}}if((refs) !== (null)) {(href) = refs.getReferenceHref(this.reference);}else {(href) = (this.reference);}if(CapeString.isEmpty(href)) {return("");}if(CapeString.isEmpty(reftitle)) {(reftitle) = (href);}return("<p class=\"reference\"><a href=\"" + CapexHTMLString.sanitize(href) + "\">" + CapexHTMLString.sanitize(reftitle) + "</a></p>\n");};P.getReference = function() {return(this.reference);};P.setReference = function(v) {(this.reference) = (v);return(this);};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};var CapexRichTextSegment = function() {this.text = null;this.bold = null;this.italic = null;this.underline = null;this.color = null;this.link = null;this.reference = null;this.isInline = null;this.linkPopup = null;{} };var P = CapexRichTextSegment.prototype;P.constructor = CapexRichTextSegment;P._t = {}; P._t["CapexRichTextSegment"] = true;CapexRichTextSegment.createInstance = function() {var _v = new CapexRichTextSegment();return(_v._construct());};P._construct = function() {(this.linkPopup) = (false);(this.isInline) = (false);(this.reference) = (null);(this.link) = (null);(this.color) = (null);(this.underline) = (false);(this.italic) = (false);(this.bold) = (false);(this.text) = (null);return(this);};P.addMarkupModifiers = function(sb) {if(this.bold) {sb.appendString("**");}if(this.italic) {sb.appendString("''");}if(this.underline) {sb.appendString("__");}};P.toMarkup = function() {var sb = CapeStringBuilder.createInstance();this.addMarkupModifiers(sb);if(CapeString.isEmpty(this.link) === (false)) {sb.appendCharacter('[');if(this.isInline) {sb.appendCharacter('>');}sb.appendString(this.link);if(CapeString.isEmpty(this.text) === (false)) {sb.appendCharacter('|');sb.appendString(this.text);}sb.appendCharacter(']');}else {if(CapeString.isEmpty(this.reference) === (false)) {sb.appendCharacter('{');if(this.isInline) {sb.appendCharacter('>');}sb.appendString(this.reference);if(CapeString.isEmpty(this.text) === (false)) {sb.appendCharacter('|');sb.appendString(this.text);}sb.appendCharacter('}');}else {sb.appendString(this.text);}}this.addMarkupModifiers(sb);return(sb.toString());};P.toJson = function() {var v = CapeDynamicMap.createInstance();v.setStringAndObject("text", this.text);if(this.isInline) {v.setStringAndBoolean("inline", this.isInline);}if(this.bold) {v.setStringAndBoolean("bold", this.bold);}if(this.italic) {v.setStringAndBoolean("italic", this.italic);}if(this.underline) {v.setStringAndBoolean("underline", this.underline);}if(CapeString.isEmpty(this.color) === (false)) {v.setStringAndObject("color", this.color);}if(CapeString.isEmpty(this.link) === (false)) {v.setStringAndObject("link", this.link);}if(CapeString.isEmpty(this.reference) === (false)) {v.setStringAndObject("reference", this.reference);}return(v);};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};P.getBold = function() {return(this.bold);};P.setBold = function(v) {(this.bold) = (v);return(this);};P.getItalic = function() {return(this.italic);};P.setItalic = function(v) {(this.italic) = (v);return(this);};P.getUnderline = function() {return(this.underline);};P.setUnderline = function(v) {(this.underline) = (v);return(this);};P.getColor = function() {return(this.color);};P.setColor = function(v) {(this.color) = (v);return(this);};P.getLink = function() {return(this.link);};P.setLink = function(v) {(this.link) = (v);return(this);};P.getReference = function() {return(this.reference);};P.setReference = function(v) {(this.reference) = (v);return(this);};P.getIsInline = function() {return(this.isInline);};P.setIsInline = function(v) {(this.isInline) = (v);return(this);};P.getLinkPopup = function() {return(this.linkPopup);};P.setLinkPopup = function(v) {(this.linkPopup) = (v);return(this);};var CapexRichTextSeparatorParagraph = function() {CapexRichTextParagraph.call(this);{} };var P = CapexRichTextSeparatorParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextSeparatorParagraph;P._t = {}; P._t["CapexRichTextSeparatorParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextSeparatorParagraph.createInstance = function() {var _v = new CapexRichTextSeparatorParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}return(this);};P.toMarkup = function() {return("-");};P.toText = function() {return("----------");};P.toJson = function() {var v = CapeDynamicMap.createInstance();v.setStringAndObject("type", "separator");return(v);};P.toHtml = function(refs) {return("<hr />\n");};var CapexRichTextStyledParagraph = function() {CapexRichTextParagraph.call(this);this.heading = null;this.segments = null;{} };var P = CapexRichTextStyledParagraph.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexRichTextParagraph.prototype);P.constructor = CapexRichTextStyledParagraph;P._t = {}; P._t["CapexRichTextStyledParagraph"] = true;P._t["CapexRichTextParagraph"] = true;CapexRichTextStyledParagraph.createInstance = function() {var _v = new CapexRichTextStyledParagraph();return(_v._construct());};P._construct = function() {if(CapexRichTextParagraph.prototype._construct.call(this) == (null)) {return(null);}(this.segments) = (null);(this.heading) = (0);return(this);};CapexRichTextStyledParagraph.forString = function(text) {var rtsp = CapexRichTextStyledParagraph.createInstance();return(rtsp.parse(text));};P.isHeading = function() {if((this.heading) > (0)) {return(true);}return(false);};P.getTextContent = function() {var sb = CapeStringBuilder.createInstance();if((this.segments) !== (null)) {var n = 0;var m = this.segments.length;for((n) = (0) ; (n) < (m) ; (n)++) {var segment = this.segments[n];if((segment) !== (null)) {sb.appendString(segment.getText());}}}return(sb.toString());};P.toJson = function() {var segs = new Array();if((this.segments) !== (null)) {var n = 0;var m = this.segments.length;for((n) = (0) ; (n) < (m) ; (n)++) {var segment = this.segments[n];if((segment) !== (null)) {var segj = segment.toJson();if((segj) !== (null)) {CapeVector.append(segs, segj);}}}}var v = CapeDynamicMap.createInstance();v.setStringAndObject("type", "styled");v.setStringAndSignedInteger("heading", this.heading);v.setStringAndObject("segments", segs);return(v);};P.toText = function() {var sb = CapeStringBuilder.createInstance();if((this.segments) !== (null)) {var n = 0;var m = this.segments.length;for((n) = (0) ; (n) < (m) ; (n)++) {var sg = this.segments[n];if((sg) !== (null)) {sb.appendString(sg.getText());var link = sg.getLink();if(CapeString.isEmpty(link) === (false)) {sb.appendString(" (" + link + ")");}var ref = sg.getReference();if(CapeString.isEmpty(ref) === (false)) {sb.appendString(" {" + ref + "}");}}}}return(sb.toString());};P.toHtml = function(refs) {var sb = CapeStringBuilder.createInstance();var tag = "p";if((this.heading) > (0)) {(tag) = ("h" + CapeString.forInteger(this.heading));}sb.appendString("<");sb.appendString(tag);sb.appendString(">");if((this.segments) !== (null)) {var n = 0;var m = this.segments.length;for((n) = (0) ; (n) < (m) ; (n)++) {var sg = this.segments[n];if((sg) !== (null)) {var aOpen = false;var text = sg.getText();var link = sg.getLink();if(CapeString.isEmpty(link) === (false)) {if(sg.getIsInline()) {sb.appendString("<img src=\"" + CapexHTMLString.sanitize(link) + "\" />");}else {var targetblank = "";if(sg.getLinkPopup()) {(targetblank) = (" target=\"_blank\"");}sb.appendString("<a" + targetblank + " class=\"urlLink\" href=\"" + CapexHTMLString.sanitize(link) + "\">");(aOpen) = (true);}}if(CapeString.isEmpty(sg.getReference()) === (false)) {var ref = sg.getReference();var href = null;if((refs) !== (null)) {(href) = refs.getReferenceHref(ref);if(CapeString.isEmpty(text)) {(text) = refs.getReferenceTitle(ref);}}if(CapeString.isEmpty(href) === (false)) {if(CapeString.isEmpty(text)) {(text) = (ref);}sb.appendString("<a class=\"referenceLink\" href=\"" + CapexHTMLString.sanitize(href) + "\">");(aOpen) = (true);}}var span = false;if(sg.getBold() || sg.getItalic() || sg.getUnderline() || CapeString.isEmpty(sg.getColor()) === (false)) {(span) = (true);sb.appendString("<span style=\"");if(sg.getBold()) {sb.appendString(" font-weight: bold;");}if(sg.getItalic()) {sb.appendString(" font-style: italic;");}if(sg.getUnderline()) {sb.appendString(" text-decoration: underline;");}if(CapeString.isEmpty(sg.getColor()) === (false)) {sb.appendString(" color: " + CapexHTMLString.sanitize(sg.getColor()) + "");}sb.appendString("\">");}if(sg.getIsInline() === (false)) {sb.appendString(CapexHTMLString.sanitize(text));}if(span) {sb.appendString("</span>");}if(aOpen) {sb.appendString("</a>");}}}}sb.appendString("</" + tag + ">");return(sb.toString());};P.addSegment = function(rts) {if((rts) == (null)) {return(this);}if((this.segments) == (null)) {(this.segments) = (new Array());}CapeVector.append(this.segments, rts);return(this);};P.setSegmentLink = function(seg, alink) {if((alink) == (null)) {seg.setLink(null);return;}var link = alink;if(CapeString.startsWithWithStringAndStringAndSignedInteger(link, ">", 0)) {seg.setIsInline(true);(link) = CapeString.subStringWithStringAndSignedInteger(link, 1);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(link, "!", 0)) {seg.setLinkPopup(false);(link) = CapeString.subStringWithStringAndSignedInteger(link, 1);}else {seg.setLinkPopup(true);}seg.setLink(link);};P.parseSegments = function(txt) {if((txt) == (null)) {return;}var segmentsb = null;var linksb = null;var sb = CapeStringBuilder.createInstance();var it = CapeString.iterate(txt);var c = ' ';var pc = String.fromCharCode(0);var seg = CapexRichTextSegment.createInstance();while(((c) = it.getNextChar()).charCodeAt() > (0)) {if((pc) === ('[')) {if((c) === ('[')) {sb.appendCharacter(c);(pc) = (String.fromCharCode(0));continue;}if(sb.count() > (0)) {seg.setText(sb.toString());sb.clear();this.addSegment(seg);}(seg) = CapexRichTextSegment.createInstance();(linksb) = CapeStringBuilder.createInstance();linksb.appendCharacter(c);(pc) = (c);continue;}if((linksb) !== (null)) {if((c) === ('|')) {this.setSegmentLink(seg, linksb.toString());linksb.clear();(pc) = (c);continue;}if((c) === (']')) {var xt = linksb.toString();if(seg.getLink() == (null)) {this.setSegmentLink(seg, xt);}else {seg.setText(xt);}if(CapeString.isEmpty(seg.getText())) {var ll = xt;if(CapeString.startsWithWithStringAndStringAndSignedInteger(ll, "http://", 0)) {(ll) = CapeString.subStringWithStringAndSignedInteger(ll, 7);}seg.setText(ll);}this.addSegment(seg);(seg) = CapexRichTextSegment.createInstance();(linksb) = (null);}else {linksb.appendCharacter(c);}(pc) = (c);continue;}if((pc) === ('{')) {if((c) === ('{')) {sb.appendCharacter(c);(pc) = (String.fromCharCode(0));continue;}if(sb.count() > (0)) {seg.setText(sb.toString());sb.clear();this.addSegment(seg);}(seg) = CapexRichTextSegment.createInstance();(segmentsb) = CapeStringBuilder.createInstance();segmentsb.appendCharacter(c);(pc) = (c);continue;}if((segmentsb) !== (null)) {if((c) === ('|')) {seg.setReference(segmentsb.toString());segmentsb.clear();(pc) = (c);continue;}if((c) === ('}')) {var xt = segmentsb.toString();if(seg.getReference() == (null)) {seg.setReference(xt);}else {seg.setText(xt);}this.addSegment(seg);(seg) = CapexRichTextSegment.createInstance();(segmentsb) = (null);}else {segmentsb.appendCharacter(c);}(pc) = (c);continue;}if((pc) === ('*')) {if((c) === ('*')) {if(sb.count() > (0)) {seg.setText(sb.toString());sb.clear();this.addSegment(seg);}if(seg.getBold()) {(seg) = CapexRichTextSegment.createInstance().setBold(false);}else {(seg) = CapexRichTextSegment.createInstance().setBold(true);}}else {sb.appendCharacter(pc);sb.appendCharacter(c);}(pc) = (String.fromCharCode(0));continue;}if((pc) === ('_')) {if((c) === ('_')) {if(sb.count() > (0)) {seg.setText(sb.toString());sb.clear();this.addSegment(seg);}if(seg.getUnderline()) {(seg) = CapexRichTextSegment.createInstance().setUnderline(false);}else {(seg) = CapexRichTextSegment.createInstance().setUnderline(true);}}else {sb.appendCharacter(pc);sb.appendCharacter(c);}(pc) = (String.fromCharCode(0));continue;}if((pc) === ('\'')) {if((c) === ('\'')) {if(sb.count() > (0)) {seg.setText(sb.toString());sb.clear();this.addSegment(seg);}if(seg.getItalic()) {(seg) = CapexRichTextSegment.createInstance().setItalic(false);}else {(seg) = CapexRichTextSegment.createInstance().setItalic(true);}}else {sb.appendCharacter(pc);sb.appendCharacter(c);}(pc) = (String.fromCharCode(0));continue;}if((c).charCodeAt() !== ('*').charCodeAt() && (c).charCodeAt() !== ('_').charCodeAt() && (c).charCodeAt() !== ('\'').charCodeAt() && (c).charCodeAt() !== ('{').charCodeAt() && (c).charCodeAt() !== ('[').charCodeAt()) {sb.appendCharacter(c);}(pc) = (c);}if(((pc) === ('*') || (pc) === ('_') || (pc) === ('\'')) && (pc).charCodeAt() !== ('{').charCodeAt() && (pc).charCodeAt() !== ('[').charCodeAt()) {sb.appendCharacter(pc);}if(sb.count() > (0)) {seg.setText(sb.toString());sb.clear();this.addSegment(seg);}};P.parse = function(text) {if((text) == (null)) {return(this);}var txt = text;var prefixes = ["=", "==", "===", "====", "====="];var n = 0;for((n) = (0) ; (n) < (prefixes.length) ; (n)++) {var key = prefixes[n];if(CapeString.startsWithWithStringAndStringAndSignedInteger(txt, key + " ", 0) && CapeString.endsWithWithStringAndString(txt, " " + key)) {this.setHeading((n) + (1));(txt) = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(txt, CapeString.getLength(key) + (1), CapeString.getLength(txt) - CapeString.getLength(key) * (2) - (2));if(!((txt) == (null))) {(txt) = CapeString.strip(txt);}break;}}this.parseSegments(txt);return(this);};P.toMarkup = function() {var ident = null;if((this.heading) === (1)) {(ident) = ("=");}else {if((this.heading) === (2)) {(ident) = ("==");}else {if((this.heading) === (3)) {(ident) = ("===");}else {if((this.heading) === (4)) {(ident) = ("====");}else {if((this.heading) === (5)) {(ident) = ("=====");}}}}}var sb = CapeStringBuilder.createInstance();if(CapeString.isEmpty(ident) === (false)) {sb.appendString(ident);sb.appendCharacter(' ');}if((this.segments) !== (null)) {var n = 0;var m = this.segments.length;for((n) = (0) ; (n) < (m) ; (n)++) {var segment = this.segments[n];if((segment) !== (null)) {sb.appendString(segment.toMarkup());}}}if(CapeString.isEmpty(ident) === (false)) {sb.appendCharacter(' ');sb.appendString(ident);}return(sb.toString());};P.getHeading = function() {return(this.heading);};P.setHeading = function(v) {(this.heading) = (v);return(this);};P.getSegments = function() {return(this.segments);};P.setSegments = function(v) {(this.segments) = (v);return(this);};var CapexRichTextWikiMarkupParser = function() {this.file = null;this.data = null;{} };var P = CapexRichTextWikiMarkupParser.prototype;P.constructor = CapexRichTextWikiMarkupParser;P._t = {}; P._t["CapexRichTextWikiMarkupParser"] = true;CapexRichTextWikiMarkupParser.createInstance = function() {var _v = new CapexRichTextWikiMarkupParser();return(_v._construct());};P._construct = function() {(this.data) = (null);(this.file) = (null);return(this);};CapexRichTextWikiMarkupParser.parseFile = function(file) {return(CapexRichTextWikiMarkupParser.createInstance().setFile(file).parse());};CapexRichTextWikiMarkupParser.parseString = function(data) {return(CapexRichTextWikiMarkupParser.createInstance().setData(data).parse());};P.skipEmptyLines = function(pr) {var line = null;while(!(((line) = pr.readLine()) == (null))) {(line) = CapeString.strip(line);if(!((line) == (null)) && CapeString.startsWithWithStringAndStringAndSignedInteger(line, "#", 0)) {continue;}if(CapeString.isEmpty(line) === (false)) {break;}}return(line);};P.readPreformattedParagraph = function(id, pr) {var sb = CapeStringBuilder.createInstance();var line = null;while(!(((line) = pr.readLine()) == (null))) {if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "---", 0) && CapeString.endsWithWithStringAndString(line, "---")) {var lid = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(line, 3, CapeString.getLength(line) - (6));if(!((lid) == (null))) {(lid) = CapeString.strip(lid);}if(CapeString.isEmpty(id)) {if(CapeString.isEmpty(lid)) {break;}}else {if(CapeString.equals(id, lid)) {break;}}}sb.appendString(line);sb.appendCharacter('\n');}return(CapexRichTextPreformattedParagraph.createInstance().setId(id).setText(sb.toString()));};P.readBlockParagraph = function(id, pr) {var sb = CapeStringBuilder.createInstance();var line = null;while(!(((line) = pr.readLine()) == (null))) {if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "--", 0) && CapeString.endsWithWithStringAndString(line, "--")) {var lid = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(line, 2, CapeString.getLength(line) - (4));if(!((lid) == (null))) {(lid) = CapeString.strip(lid);}if(CapeString.isEmpty(id)) {if(CapeString.isEmpty(lid)) {break;}}else {if(CapeString.equals(id, lid)) {break;}}}sb.appendString(line);sb.appendCharacter('\n');}return(CapexRichTextBlockParagraph.createInstance().setId(id).setText(sb.toString()));};P.processInput = function(pr, doc) {var line = this.skipEmptyLines(pr);if((line) == (null)) {return(false);}if((line) === ("-")) {doc.addParagraph(CapexRichTextSeparatorParagraph.createInstance());return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@content ", 0)) {var id = CapeString.subStringWithStringAndSignedInteger(line, 9);if(!((id) == (null))) {(id) = CapeString.strip(id);}doc.addParagraph(CapexRichTextContentParagraph.createInstance().setContentId(id));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@image ", 0)) {var ref = CapeString.subStringWithStringAndSignedInteger(line, 7);if(!((ref) == (null))) {(ref) = CapeString.strip(ref);}doc.addParagraph(CapexRichTextImageParagraph.createInstance().setFilename(ref));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@image100 ", 0)) {var ref = CapeString.subStringWithStringAndSignedInteger(line, 10);if(!((ref) == (null))) {(ref) = CapeString.strip(ref);}doc.addParagraph(CapexRichTextImageParagraph.createInstance().setFilename(ref));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@image75 ", 0)) {var ref = CapeString.subStringWithStringAndSignedInteger(line, 9);if(!((ref) == (null))) {(ref) = CapeString.strip(ref);}doc.addParagraph(CapexRichTextImageParagraph.createInstance().setFilename(ref).setWidth(75));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@image50 ", 0)) {var ref = CapeString.subStringWithStringAndSignedInteger(line, 9);if(!((ref) == (null))) {(ref) = CapeString.strip(ref);}doc.addParagraph(CapexRichTextImageParagraph.createInstance().setFilename(ref).setWidth(50));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@image25 ", 0)) {var ref = CapeString.subStringWithStringAndSignedInteger(line, 9);if(!((ref) == (null))) {(ref) = CapeString.strip(ref);}doc.addParagraph(CapexRichTextImageParagraph.createInstance().setFilename(ref).setWidth(25));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@reference ", 0)) {var ref = CapeString.subStringWithStringAndSignedInteger(line, 11);if(!((ref) == (null))) {(ref) = CapeString.strip(ref);}var sq = CapeString.quotedStringToVector(ref, ' ');var rrf = CapeVector.getAt(sq, 0);var txt = CapeVector.getAt(sq, 1);doc.addParagraph(CapexRichTextReferenceParagraph.createInstance().setReference(rrf).setText(txt));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@set ", 0)) {var link = CapeString.subStringWithStringAndSignedInteger(line, 5);if(!((link) == (null))) {(link) = CapeString.strip(link);}var sq = CapeString.quotedStringToVector(link, ' ');var key = CapeVector.getAt(sq, 0);var val = CapeVector.getAt(sq, 1);if(CapeString.isEmpty(key)) {return(true);}doc.setMetadata(key, val);return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "@link ", 0)) {var link = CapeString.subStringWithStringAndSignedInteger(line, 6);if(!((link) == (null))) {(link) = CapeString.strip(link);}var sq = CapeString.quotedStringToVector(link, ' ');var url = CapeVector.getAt(sq, 0);var txt = CapeVector.getAt(sq, 1);var flags = CapeVector.getAt(sq, 2);if(CapeString.isEmpty(txt)) {(txt) = (url);}var v = CapexRichTextLinkParagraph.createInstance();v.setLink(url);v.setText(txt);if(CapeString.equals("internal", flags)) {v.setPopup(false);}else {v.setPopup(true);}doc.addParagraph(v);return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "---", 0) && CapeString.endsWithWithStringAndString(line, "---")) {var id = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(line, 3, CapeString.getLength(line) - (6));if(!((id) == (null))) {(id) = CapeString.strip(id);}if(CapeString.isEmpty(id)) {(id) = (null);}doc.addParagraph(this.readPreformattedParagraph(id, pr));return(true);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "--", 0) && CapeString.endsWithWithStringAndString(line, "--")) {var id = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(line, 2, CapeString.getLength(line) - (4));if(!((id) == (null))) {(id) = CapeString.strip(id);}if(CapeString.isEmpty(id)) {(id) = (null);}doc.addParagraph(this.readBlockParagraph(id, pr));return(true);}var sb = CapeStringBuilder.createInstance();var pc = String.fromCharCode(0);do {(line) = CapeString.strip(line);if(CapeString.isEmpty(line)) {break;}if(CapeString.startsWithWithStringAndStringAndSignedInteger(line, "#", 0) === (false)) {var it = CapeString.iterate(line);var c = ' ';if(sb.count() > (0) && (pc).charCodeAt() !== (' ').charCodeAt()) {sb.appendCharacter(' ');(pc) = (' ');}while(((c) = it.getNextChar()).charCodeAt() > (0)) {if((c) === (' ') || (c) === ('\t') || (c) === ('\r') || (c) === ('\n')) {if((pc) === (' ')) {continue;}(c) = (' ');}sb.appendCharacter(c);(pc) = (c);}}}while(!(((line) = pr.readLine()) == (null)));var s = sb.toString();if(CapeString.isEmpty(s)) {return(false);}doc.addParagraph(CapexRichTextStyledParagraph.forString(s));return(true);};P.parse = function() {var pr = null;if((this.file) !== (null)) {(pr) = CapePrintReader.createInstanceWithReader(this.file.read());}else {if(!((this.data) == (null))) {(pr) = CapeStringLineReader.createInstanceWithString(this.data);}}if((pr) == (null)) {return(null);}var v = CapexRichTextDocument.createInstance();while(this.processInput(pr, v)) {;}return(v);};P.getFile = function() {return(this.file);};P.setFile = function(v) {(this.file) = (v);return(this);};P.getData = function() {return(this.data);};P.setData = function(v) {(this.data) = (v);return(this);};var CapexSHAEncoder = function() {{} };var P = CapexSHAEncoder.prototype;P.constructor = CapexSHAEncoder;CapexSHAEncoder.SHA1 = 1;CapexSHAEncoder.SHA224 = 2;CapexSHAEncoder.SHA256 = 3;CapexSHAEncoder.SHA384 = 4;CapexSHAEncoder.SHA512 = 5;P._t = {}; P._t["CapexSHAEncoder"] = true;CapexSHAEncoder.createInstance = function() {var _v = new CapexSHAEncoder();return(_v._construct());};P._construct = function() {return(this);};CapexSHAEncoder.create = function() {console.log("Not implemented.");return(null);};P.encode = function(data, version) {};var CapexSimpleConfigFile = function() {this.data = null;this.mapData = null;this.file = null;{} };var P = CapexSimpleConfigFile.prototype;P.constructor = CapexSimpleConfigFile;P._t = {}; P._t["CapexSimpleConfigFile"] = true;CapexSimpleConfigFile.forFile = function(file) {var v = CapexSimpleConfigFile.createInstance();if(v.read(file) === (false)) {(v) = (null);}return(v);};CapexSimpleConfigFile.forMap = function(map) {var v = CapexSimpleConfigFile.createInstance();v.setDataAsMap(map);return(v);};CapexSimpleConfigFile.readFileAsMap = function(file) {var cf = CapexSimpleConfigFile.forFile(file);if((cf) == (null)) {return(null);}return(cf.getDataAsMap());};CapexSimpleConfigFile.createInstance = function() {var _v = new CapexSimpleConfigFile();return(_v._construct());};P._construct = function() {(this.file) = (null);(this.mapData) = (null);(this.data) = (null);(this.data) = CapeKeyValueList.createInstance();return(this);};P.getFile = function() {return(this.file);};P.getRelativeFile = function(fileName) {if((this.file) == (null) || (fileName) == (null)) {return(null);}var p = this.file.getParent();if((p) == (null)) {return(null);}return(p.entry(fileName));};P.clear = function() {this.data.clear();(this.mapData) = (null);};P.setDataAsMap = function(map) {this.clear();var keys = map.iterateKeys();while((keys) !== (null)) {var key = keys.next();if((key) == (null)) {break;}this.data.addKAndV(key, map.getString(key, null));}return(this);};P.getDataAsMap = function() {if((this.mapData) == (null)) {(this.mapData) = CapeDynamicMap.createInstance();var it = this.data.iterate();while((it) !== (null)) {var kvp = it.next();if((kvp) == (null)) {break;}this.mapData.setStringAndObject(kvp.key, kvp.value);}}return(this.mapData);};P.getDynamicMapValue = function(key, defval) {var str = this.getStringValue(key, null);if((str) == (null)) {return(defval);}var tv = CapeJSONParser.parseString(str);var v = null;if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (tv, "CapeDynamicMap"))) {(v) = (tv);}if((v) == (null)) {return(defval);}return(v);};P.getDynamicVectorValue = function(key, defval) {var str = this.getStringValue(key, null);if((str) == (null)) {return(defval);}var tv = CapeJSONParser.parseString(str);var v = null;if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (tv, "CapeDynamicVector"))) {(v) = (tv);}if((v) == (null)) {return(defval);}return(v);};P.getStringValue = function(key, defval) {var map = this.getDataAsMap();if((map) == (null)) {return(defval);}var v = map.getString(key, null);if((v) == (null)) {return(defval);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(v, "\"\"\"\n", 0) && CapeString.endsWithWithStringAndString(v, "\n\"\"\"")) {(v) = CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(v, 4, CapeString.getLength(v) - (8));}return(v);};P.getIntegerValue = function(key, defval) {var map = this.getDataAsMap();if((map) == (null)) {return(defval);}return(map.getInteger(key, defval));};P.getDoubleValue = function(key, defval) {var map = this.getDataAsMap();if((map) == (null)) {return(defval);}return(map.getDouble(key, defval));};P.getBooleanValue = function(key, defval) {var map = this.getDataAsMap();if((map) == (null)) {return(defval);}return(map.getBoolean(key, defval));};P.getFileValue = function(key, defval) {var v = this.getRelativeFile(this.getStringValue(key, null));if((v) == (null)) {return(defval);}return(v);};P.iterate = function() {if((this.data) == (null)) {return(null);}return(this.data.iterate());};P.read = function(file) {if((file) == (null)) {return(false);}var reader = file.read();if((reader) == (null)) {return(false);}var ins = CapePrintReader.createInstanceWithReader(reader);var line = null;var tag = null;var lineBuffer = null;var terminator = null;while(!(((line) = ins.readLine()) == (null))) {if((lineBuffer) !== (null)) {lineBuffer.appendString(line);if((line) === (terminator)) {(line) = lineBuffer.toString();(lineBuffer) = (null);(terminator) = (null);}else {lineBuffer.appendCharacter('\n');continue;}}(line) = CapeString.strip(line);if(CapeString.isEmpty(line) || CapeString.startsWithWithStringAndStringAndSignedInteger(line, "#", 0)) {continue;}if(CapeString.endsWithWithStringAndString(line, "{")) {if(CapeString.indexOfWithStringAndCharacterAndSignedInteger(line, ':', 0) < (0)) {if((tag) == (null)) {(tag) = CapeString.strip(CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(line, 0, CapeString.getLength(line) - (1)));}continue;}else {(lineBuffer) = CapeStringBuilder.createInstance();lineBuffer.appendString(line);lineBuffer.appendCharacter('\n');(terminator) = ("}");continue;}}if(CapeString.endsWithWithStringAndString(line, "[")) {(lineBuffer) = CapeStringBuilder.createInstance();lineBuffer.appendString(line);lineBuffer.appendCharacter('\n');(terminator) = ("]");continue;}if(CapeString.endsWithWithStringAndString(line, "\"\"\"")) {(lineBuffer) = CapeStringBuilder.createInstance();lineBuffer.appendString(line);lineBuffer.appendCharacter('\n');(terminator) = ("\"\"\"");continue;}if(!((tag) == (null)) && (line) === ("}")) {(tag) = (null);continue;}var sp = CapeString.split(line, ':', 2);if((sp) == (null)) {continue;}var key = CapeString.strip(CapeVector.get(sp, 0));var val = CapeString.strip(CapeVector.get(sp, 1));if(CapeString.startsWithWithStringAndStringAndSignedInteger(val, "\"", 0) && CapeString.endsWithWithStringAndString(val, "\"")) {(val) = CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(val, 1, CapeString.getLength(val) - (2));}if(CapeString.isEmpty(key)) {continue;}if(!((tag) == (null))) {(key) = (key + "[" + tag + "]");}this.data.addKAndV(key, val);}this.file = (file);return(true);};P.write = function(outfile) {if((outfile) == (null) || (this.data) == (null)) {return(false);}var os = CapePrintWriterWrapper.forWriter(outfile.write());if((os) == (null)) {return(false);}var it = this.data.iterate();while((it) !== (null)) {var kvp = it.next();if((kvp) == (null)) {break;}os.println(kvp.key + ": " + kvp.value);}return(true);};var CapexSQLDatabase = function() {this.logger = null;{} };var P = CapexSQLDatabase.prototype;P.constructor = CapexSQLDatabase;P._t = {}; P._t["CapexSQLDatabase"] = true;CapexSQLDatabase.createInstance = function() {var _v = new CapexSQLDatabase();return(_v._construct());};P._construct = function() {(this.logger) = (null);return(this);};P.prepare = function(sql) {};P.getDatabaseTypeId = function() {};P.prepareCreateTableStatement = function(table, columns) {};P.prepareDeleteTableStatement = function(table) {};P.prepareCreateIndexStatement = function(table, column, unique) {};P.closeFunction = function(callback) {};P.executeSQLStatementAndFunction = function(stmt, callback) {};P.querySQLStatementAndFunction = function(stmt, callback) {};P.querySingleRowWithSQLStatementAndFunction = function(stmt, callback) {};P.tableExistsWithStringAndFunction = function(table, callback) {};P.queryAllTableNamesWithFunction = function(callback) {};P.close = function() {};P.executeSQLStatement = function(stmt) {};P.querySQLStatement = function(stmt) {};P.querySingleRowWithSQLStatement = function(stmt) {};P.tableExistsWithString = function(table) {};P.queryAllTableNames = function() {};P.ensureTableExistsWithSQLTableInfo = function(table) {if((table) == (null)) {return(false);}var name = table.getName();if(CapeString.isEmpty(name)) {return(false);}if(this.tableExistsWithString(name)) {return(true);}if(this.executeSQLStatement(this.prepareCreateTableStatement(name, table.getColumns())) === (false)) {return(false);}var array = table.getIndexes();if((array) !== (null)) {var n = 0;var m = array.length;for((n) = (0) ; (n) < (m) ; (n)++) {var cii = array[n];if((cii) !== (null)) {if(this.executeSQLStatement(this.prepareCreateIndexStatement(name, cii.getColumn(), cii.getUnique())) === (false)) {this.executeSQLStatement(this.prepareDeleteTableStatement(name));}}}}return(true);};P.ensureTableExistsWithSQLTableInfoAndFunction = function(table, callback) {var v = this.ensureTableExistsWithSQLTableInfo(table);if((callback) !== (null)) {callback(v);}};P.createColumnSelectionString = function(columns) {if((columns) == (null) || (columns.length) < (1)) {return("*");}var sb = CapeStringBuilder.createInstance();var first = true;if((columns) !== (null)) {var n = 0;var m = columns.length;for((n) = (0) ; (n) < (m) ; (n)++) {var column = columns[n];if((column) !== (null)) {if((first) === (false)) {sb.appendString(", ");}sb.appendString(column);(first) = (false);}}}return(sb.toString());};P.createOrderByString = function(order) {if((order) == (null) || (order.length) < (1)) {return(null);}var sb = CapeStringBuilder.createInstance();sb.appendString(" ORDER BY ");var first = true;if((order) !== (null)) {var n = 0;var m = order.length;for((n) = (0) ; (n) < (m) ; (n)++) {var rule = order[n];if((rule) !== (null)) {if((first) === (false)) {sb.appendString(", ");}sb.appendString(rule.getColumn());sb.appendCharacter(' ');if(rule.getDescending()) {sb.appendString("DESC");}else {sb.appendString("ASC");}(first) = (false);}}}return(sb.toString());};P.prepareQueryAllStatementWithString = function(table) {return(this.prepareQueryAllStatementWithStringAndArrayOfStringAndArrayOfCapexSQLOrderingRule(table, null, null));};P.prepareQueryAllStatementWithStringAndArrayOfString = function(table, columns) {return(this.prepareQueryAllStatementWithStringAndArrayOfStringAndArrayOfCapexSQLOrderingRule(table, columns, null));};P.prepareQueryAllStatementWithStringAndArrayOfStringAndArrayOfCapexSQLOrderingRule = function(table, columns, order) {var sb = CapeStringBuilder.createInstance();sb.appendString("SELECT ");sb.appendString(this.createColumnSelectionString(columns));sb.appendString(" FROM ");sb.appendString(table);sb.appendString(this.createOrderByString(order));sb.appendString(";");return(this.prepare(sb.toString()));};CapexSQLDatabase.objectAsNativecwg = function(o) {if(o instanceof Array) {return(o);}return(null);};P.prepareCountRecordsStatement = function(table, criteria) {var sb = CapeStringBuilder.createInstance();sb.appendString("SELECT COUNT(*) AS count FROM ");sb.appendString(table);var first = true;var keys = null;if((criteria) !== (null)) {(keys) = CapexSQLDatabase.objectAsNativecwg(CapeMap.getKeys(criteria));if((keys) !== (null)) {var n = 0;var m = keys.length;for((n) = (0) ; (n) < (m) ; (n)++) {var key = keys[n];if((key) !== (null)) {if(first) {sb.appendString(" WHERE ");(first) = (false);}else {sb.appendString(" AND ");}sb.appendString((typeof(key) === 'string' ? (key) : (null)));sb.appendString(" = ?");}}}}sb.appendCharacter(';');var sql = sb.toString();var stmt = this.prepare(sql);if((stmt) == (null)) {return(null);}if((keys) !== (null)) {if((keys) !== (null)) {var n2 = 0;var m2 = keys.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var key = keys[n2];if((key) !== (null)) {var val = CapeMap.getMapAndK(criteria, key);if((val) == (null)) {(val) = (null);}stmt.addParamString((typeof(val) === 'string' ? (val) : (null)));}}}}return(stmt);};P.prepareQueryWithCriteriaStatementWithStringAndMap = function(table, criteria) {return(this.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedIntegerAndSignedIntegerAndArrayOfStringAndArrayOfCapexSQLOrderingRule(table, criteria, 0, 0, null, null));};P.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedInteger = function(table, criteria, limit) {return(this.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedIntegerAndSignedIntegerAndArrayOfStringAndArrayOfCapexSQLOrderingRule(table, criteria, limit, 0, null, null));};P.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedIntegerAndSignedInteger = function(table, criteria, limit, offset) {return(this.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedIntegerAndSignedIntegerAndArrayOfStringAndArrayOfCapexSQLOrderingRule(table, criteria, limit, offset, null, null));};P.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedIntegerAndSignedIntegerAndArrayOfString = function(table, criteria, limit, offset, columns) {return(this.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedIntegerAndSignedIntegerAndArrayOfStringAndArrayOfCapexSQLOrderingRule(table, criteria, limit, offset, columns, null));};P.prepareQueryWithCriteriaStatementWithStringAndMapAndSignedIntegerAndSignedIntegerAndArrayOfStringAndArrayOfCapexSQLOrderingRule = function(table, criteria, limit, offset, columns, order) {var sb = CapeStringBuilder.createInstance();sb.appendString("SELECT ");sb.appendString(this.createColumnSelectionString(columns));sb.appendString(" FROM ");sb.appendString(table);var first = true;var keys = null;if((criteria) !== (null)) {(keys) = CapexSQLDatabase.objectAsNativecwg(CapeMap.getKeys(criteria));if((keys) !== (null)) {var n = 0;var m = keys.length;for((n) = (0) ; (n) < (m) ; (n)++) {var key = keys[n];if((key) !== (null)) {if(first) {sb.appendString(" WHERE ");(first) = (false);}else {sb.appendString(" AND ");}sb.appendString((typeof(key) === 'string' ? (key) : (null)));sb.appendString(" = ?");}}}}sb.appendString(this.createOrderByString(order));if((limit) > (0)) {sb.appendString(" LIMIT ");sb.appendString(CapeString.forInteger(limit));}if((offset) > (0)) {sb.appendString(" OFFSET ");sb.appendString(CapeString.forInteger(offset));}sb.appendCharacter(';');var sql = sb.toString();var stmt = this.prepare(sql);if((stmt) == (null)) {return(null);}if((keys) !== (null)) {if((keys) !== (null)) {var n2 = 0;var m2 = keys.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var key = keys[n2];if((key) !== (null)) {var val = CapeMap.getMapAndK(criteria, key);if((val) == (null)) {(val) = (null);}stmt.addParamString((typeof(val) === 'string' ? (val) : (null)));}}}}return(stmt);};P.prepareQueryDistinctValuesStatement = function(table, column) {if(CapeString.isEmpty(table) || CapeString.isEmpty(column)) {return(null);}var sb = CapeStringBuilder.createInstance();sb.appendString("SELECT DISTINCT ");sb.appendString(column);sb.appendString(" FROM ");sb.appendString(table);sb.appendString(";");return(this.prepare(sb.toString()));};P.prepareInsertStatement = function(table, data) {if(CapeString.isEmpty(table) || (data) == (null) || data.getCount() < (1)) {return(null);}var sb = CapeStringBuilder.createInstance();sb.appendString("INSERT INTO ");sb.appendString(table);sb.appendString(" ( ");var first = true;var keys = data.getKeys();if((keys) !== (null)) {var n = 0;var m = keys.length;for((n) = (0) ; (n) < (m) ; (n)++) {var key = keys[n];if((key) !== (null)) {if((first) === (false)) {sb.appendCharacter(',');}sb.appendString((typeof(key) === 'string' ? (key) : (null)));(first) = (false);}}}sb.appendString(" ) VALUES ( ");(first) = (true);if((keys) !== (null)) {var n2 = 0;var m2 = keys.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var key = keys[n2];if((key) !== (null)) {if((first) === (false)) {sb.appendCharacter(',');}sb.appendCharacter('?');(first) = (false);}}}sb.appendString(" );");var stmt = this.prepare(sb.toString());if((stmt) == (null)) {return(null);}if((keys) !== (null)) {var n3 = 0;var m3 = keys.length;for((n3) = (0) ; (n3) < (m3) ; (n3)++) {var key = keys[n3];if((key) !== (null)) {var o = data.get(key);if(typeof(o) === 'string' || ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeStringObject"))) {stmt.addParamString(CapeString.asStringWithObject(o));}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeIntegerObject"))) {stmt.addParamInteger(CapeInteger.asIntegerWithObject(o));}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeDoubleObject"))) {stmt.addParamDouble(CapeDouble.asDouble(o));}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeBufferObject"))) {stmt.addParamBlob(o.toBuffer());}else {if(o instanceof ArrayBuffer) {stmt.addParamBlob((o instanceof ArrayBuffer ? (o) : (null)));}else {var s = (typeof(o) === 'string' ? (o) : (null));if((s) == (null)) {(s) = ("");}stmt.addParamString(s);}}}}}}}}return(stmt);};P.prepareUpdateStatement = function(table, criteria, data) {if(CapeString.isEmpty(table) || (data) == (null) || data.getCount() < (1)) {return(null);}var sb = CapeStringBuilder.createInstance();sb.appendString("UPDATE ");sb.appendString(table);sb.appendString(" SET ");var params = new Array();var first = true;var keys = data.iterateKeys();while((keys) !== (null)) {var key = keys.next();if((key) == (null)) {break;}if((first) === (false)) {sb.appendString(", ");}sb.appendString(key);sb.appendString(" = ?");(first) = (false);params.push(data.get(key));}if((criteria) !== (null) && criteria.getCount() > (0)) {sb.appendString(" WHERE ");(first) = (true);var criterias = criteria.iterateKeys();while((criterias) !== (null)) {var criterium = criterias.next();if((criterium) == (null)) {break;}if((first) === (false)) {sb.appendString(" AND ");}sb.appendString(criterium);sb.appendString(" = ?");(first) = (false);params.push(criteria.get(criterium));}}sb.appendCharacter(';');var stmt = this.prepare(sb.toString());if((stmt) == (null)) {return(null);}if((params) !== (null)) {var n = 0;var m = params.length;for((n) = (0) ; (n) < (m) ; (n)++) {var o = params[n];if((o) !== (null)) {if(o instanceof ArrayBuffer) {stmt.addParamBlob(CapeBuffer.asBuffer(o));}else {var s = CapeString.asStringWithObject(o);if((s) == (null)) {(s) = ("");}stmt.addParamString(s);}}}}return(stmt);};P.prepareDeleteStatement = function(table, criteria) {if(CapeString.isEmpty(table)) {return(null);}var sb = CapeStringBuilder.createInstance();sb.appendString("DELETE FROM ");sb.appendString(table);var params = new Array();if((criteria) !== (null) && criteria.getCount() > (0)) {sb.appendString(" WHERE ");var first = true;var criterias = criteria.iterateKeys();while((criterias) !== (null)) {var criterium = criterias.next();if((criterium) == (null)) {break;}if((first) === (false)) {sb.appendString(" AND ");}sb.appendString(criterium);sb.appendString(" = ?");(first) = (false);params.push(criteria.get(criterium));}}sb.appendCharacter(';');var stmt = this.prepare(sb.toString());if((stmt) == (null)) {return(null);}if((params) !== (null)) {var n = 0;var m = params.length;for((n) = (0) ; (n) < (m) ; (n)++) {var o = params[n];if((o) !== (null)) {if(o instanceof ArrayBuffer) {stmt.addParamBlob(CapeBuffer.asBuffer(o));}else {var s = CapeString.asStringWithObject(o);if((s) == (null)) {(s) = ("");}stmt.addParamString(s);}}}}return(stmt);};P.getLogger = function() {return(this.logger);};P.setLogger = function(v) {(this.logger) = (v);return(this);};var CapexSQLiteDatabase = function() {CapexSQLDatabase.call(this);{} };var P = CapexSQLiteDatabase.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexSQLDatabase.prototype);P.constructor = CapexSQLiteDatabase;P._t = {}; P._t["CapexSQLiteDatabase"] = true;P._t["CapexSQLDatabase"] = true;CapexSQLiteDatabase.createInstance = function() {var _v = new CapexSQLiteDatabase();return(_v._construct());};P._construct = function() {if(CapexSQLDatabase.prototype._construct.call(this) == (null)) {return(null);}return(this);};CapexSQLiteDatabase.instance = function() {console.log("[capex.SQLiteDatabase.instance] (SQLiteDatabase.sling:40:2): Not implemented");return(null);};CapexSQLiteDatabase.objectAsCapeLoggingContext = function(o) {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeLoggingContext"))) {return(o);}return(null);};CapexSQLiteDatabase.forFile = function(file, allowCreate, logger) {if((file) == (null)) {return(null);}var v = CapexSQLiteDatabase.instance();if((v) == (null)) {return(null);}if((logger) !== (null)) {v.setLogger(logger);}if(file.isFile() === (false)) {if((allowCreate) === (false)) {return(null);}var pp = file.getParent();if(pp.isDirectory() === (false)) {if(pp.createDirectoryRecursive() === (false)) {CapeLog.error(CapexSQLiteDatabase.objectAsCapeLoggingContext(v.getLogger()), "Failed to create directory: " + pp.getPath());}}if(v.initialize(file, true) === (false)) {(v) = (null);}}else {if(v.initialize(file, false) === (false)) {(v) = (null);}}return(v);};P.getDatabaseTypeId = function() {return("sqlite");};P.initialize = function(file, create) {return(true);};P.querySingleRow = function(stmt) {var it = this.querySQLStatement(stmt);if((it) == (null)) {return(null);}var v = it.next();return(v);};P.tableExists = function(table) {if((table) == (null)) {return(false);}var stmt = this.prepare("SELECT name FROM sqlite_master WHERE type='table' AND name=?;");if((stmt) == (null)) {return(false);}stmt.addParamString(table);var sr = this.querySingleRow(stmt);if((sr) == (null)) {return(false);}if(CapeString.equals(table, sr.getString("name", null)) === (false)) {return(false);}return(true);};P.queryAllTableNamesWithFunction = function(callback) {var v = this.queryAllTableNames();if((callback) !== (null)) {callback(v);}};P.queryAllTableNames = function() {var stmt = this.prepare("SELECT name FROM sqlite_master WHERE type='table';");if((stmt) == (null)) {return(null);}var it = this.querySQLStatement(stmt);if((it) == (null)) {return(null);}var v = new Array();while(true) {var o = it.next();if((o) == (null)) {break;}var name = o.getString("name", null);if(CapeString.isEmpty(name) === (false)) {v.push(name);}}return(v);};P.columnToCreateString = function(cc) {var sb = CapeStringBuilder.createInstance();sb.appendString(cc.getName());sb.appendCharacter(' ');var tt = cc.getType();if((tt) === (CapexSQLTableColumnInfo.TYPE_INTEGER_KEY)) {sb.appendString("INTEGER PRIMARY KEY AUTOINCREMENT");}else {if((tt) === (CapexSQLTableColumnInfo.TYPE_STRING_KEY)) {sb.appendString("TEXT PRIMARY KEY");}else {if((tt) === (CapexSQLTableColumnInfo.TYPE_INTEGER)) {sb.appendString("INTEGER");}else {if((tt) === (CapexSQLTableColumnInfo.TYPE_STRING)) {sb.appendString("VARCHAR(255)");}else {if((tt) === (CapexSQLTableColumnInfo.TYPE_TEXT)) {sb.appendString("TEXT");}else {if((tt) === (CapexSQLTableColumnInfo.TYPE_BLOB)) {sb.appendString("BLOB");}else {if((tt) === (CapexSQLTableColumnInfo.TYPE_DOUBLE)) {sb.appendString("REAL");}else {CapeLog.error(this.getLogger(), "Unknown column type: " + CapeString.forInteger(tt));sb.appendString("UNKNOWN");}}}}}}}return(sb.toString());};P.prepareCreateTableStatement = function(table, columns) {if((table) == (null) || (columns) == (null)) {return(null);}var sb = CapeStringBuilder.createInstance();sb.appendString("CREATE TABLE ");sb.appendString(table);sb.appendString(" (");var first = true;if((columns) !== (null)) {var n = 0;var m = columns.length;for((n) = (0) ; (n) < (m) ; (n)++) {var column = columns[n];if((column) !== (null)) {if((first) === (false)) {sb.appendCharacter(',');}sb.appendCharacter(' ');sb.appendString(this.columnToCreateString(column));(first) = (false);}}}sb.appendString(" );");return(this.prepare(sb.toString()));};P.prepareDeleteTableStatement = function(table) {if((table) == (null)) {return(null);}var sb = CapeStringBuilder.createInstance();sb.appendString("DROP TABLE ");sb.appendString(table);sb.appendString(";");return(this.prepare(sb.toString()));};P.prepareCreateIndexStatement = function(table, column, unique) {if((table) == (null) || (column) == (null)) {return(null);}var unq = "";if(unique) {(unq) = ("UNIQUE ");}var sql = "CREATE " + unq + "INDEX " + table + "_" + column + " ON " + table + " (" + column + ")";return(this.prepare(sql));};var CapexSQLOrderingRule = function() {this.column = null;this.descending = null;{} };var P = CapexSQLOrderingRule.prototype;P.constructor = CapexSQLOrderingRule;P._t = {}; P._t["CapexSQLOrderingRule"] = true;CapexSQLOrderingRule.createInstance = function() {var _v = new CapexSQLOrderingRule();return(_v._construct());};P._construct = function() {(this.descending) = (false);(this.column) = (null);return(this);};CapexSQLOrderingRule.forDescending = function(column) {var v = CapexSQLOrderingRule.createInstance();v.setColumn(column);v.setDescending(true);return(v);};CapexSQLOrderingRule.forAscending = function(column) {var v = CapexSQLOrderingRule.createInstance();v.setColumn(column);v.setDescending(false);return(v);};P.getColumn = function() {return(this.column);};P.setColumn = function(v) {(this.column) = (v);return(this);};P.getDescending = function() {return(this.descending);};P.setDescending = function(v) {(this.descending) = (v);return(this);};var CapexSQLResultSetIterator = function() {{} };var P = CapexSQLResultSetIterator.prototype;P.constructor = CapexSQLResultSetIterator;P._t = {}; P._t["CapexSQLResultSetIterator"] = true;P._t["CapeIterator"] = true;CapexSQLResultSetIterator.createInstance = function() {var _v = new CapexSQLResultSetIterator();return(_v._construct());};P._construct = function() {return(this);};P.next = function() {};P.nextValues = function(values) {};P.step = function() {};P.getColumnCount = function() {};P.getColumnName = function(n) {};P.getColumnNames = function() {};P.getColumnObject = function(n) {};P.getColumnInt = function(n) {};P.getColumnDouble = function(n) {};P.getColumnBuffer = function(n) {};P.close = function() {};P.toVector = function() {var v = CapeDynamicVector.createInstance();while(true) {var o = this.next();if((o) == (null)) {break;}v.appendObject(o);}return(v);};var CapexSQLResultSetSingleColumnIterator = function() {this.iterator = null;this.columnName = null;{} };var P = CapexSQLResultSetSingleColumnIterator.prototype;P.constructor = CapexSQLResultSetSingleColumnIterator;P._t = {}; P._t["CapexSQLResultSetSingleColumnIterator"] = true;P._t["CapeDynamicIterator"] = true;P._t["CapeStringIterator"] = true;P._t["CapeIntegerIterator"] = true;P._t["CapeDoubleIterator"] = true;P._t["CapeIterator"] = true;P._t["CapeStringIterator"] = true;P._t["CapeIntegerIterator"] = true;P._t["CapeDoubleIterator"] = true;P._t["CapeBooleanIterator"] = true;P._t["CapeIterator"] = true;CapexSQLResultSetSingleColumnIterator.createInstance = function() {var _v = new CapexSQLResultSetSingleColumnIterator();return(_v._construct());};P._construct = function() {(this.columnName) = (null);(this.iterator) = (null);return(this);};P.nextMap = function() {if((this.iterator) == (null)) {return(null);}var r = this.iterator.next();if((r) == (null)) {return(null);}return(r);};P.next = function() {var m = this.nextMap();if((m) == (null)) {return(null);}return(m.get(this.columnName));};P.nextString = function() {var m = this.nextMap();if((m) == (null)) {return(null);}return(m.getString(this.columnName, null));};P.nextInteger = function() {var m = this.nextMap();if((m) == (null)) {return(0);}return(m.getInteger(this.columnName, 0));};P.nextDouble = function() {var m = this.nextMap();if((m) == (null)) {return(0.0);}return(m.getDouble(this.columnName, 0.0));};P.nextBoolean = function() {var m = this.nextMap();if((m) == (null)) {return(false);}return(m.getBoolean(this.columnName, false));};P.getIterator = function() {return(this.iterator);};P.setIterator = function(v) {(this.iterator) = (v);return(this);};P.getColumnName = function() {return(this.columnName);};P.setColumnName = function(v) {(this.columnName) = (v);return(this);};var CapexSQLTableColumnIndexInfo = function() {this.column = null;this.unique = null;{} };var P = CapexSQLTableColumnIndexInfo.prototype;P.constructor = CapexSQLTableColumnIndexInfo;P._t = {}; P._t["CapexSQLTableColumnIndexInfo"] = true;CapexSQLTableColumnIndexInfo.createInstance = function() {var _v = new CapexSQLTableColumnIndexInfo();return(_v._construct());};P._construct = function() {(this.unique) = (false);(this.column) = (null);return(this);};P.getColumn = function() {return(this.column);};P.setColumn = function(v) {(this.column) = (v);return(this);};P.getUnique = function() {return(this.unique);};P.setUnique = function(v) {(this.unique) = (v);return(this);};var CapexSQLTableColumnInfo = function() {this.name = null;this.type = null;{} };var P = CapexSQLTableColumnInfo.prototype;P.constructor = CapexSQLTableColumnInfo;CapexSQLTableColumnInfo.TYPE_INTEGER = 0;CapexSQLTableColumnInfo.TYPE_STRING = 1;CapexSQLTableColumnInfo.TYPE_TEXT = 2;CapexSQLTableColumnInfo.TYPE_INTEGER_KEY = 3;CapexSQLTableColumnInfo.TYPE_DOUBLE = 4;CapexSQLTableColumnInfo.TYPE_BLOB = 5;CapexSQLTableColumnInfo.TYPE_STRING_KEY = 6;P._t = {}; P._t["CapexSQLTableColumnInfo"] = true;CapexSQLTableColumnInfo.createInstance = function() {var _v = new CapexSQLTableColumnInfo();return(_v._construct());};P._construct = function() {(this.type) = (0);(this.name) = (null);return(this);};CapexSQLTableColumnInfo.instance = function(name, type) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(type));};CapexSQLTableColumnInfo.forInteger = function(name) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(CapexSQLTableColumnInfo.TYPE_INTEGER));};CapexSQLTableColumnInfo.forString = function(name) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(CapexSQLTableColumnInfo.TYPE_STRING));};CapexSQLTableColumnInfo.forStringKey = function(name) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(CapexSQLTableColumnInfo.TYPE_STRING_KEY));};CapexSQLTableColumnInfo.forText = function(name) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(CapexSQLTableColumnInfo.TYPE_TEXT));};CapexSQLTableColumnInfo.forIntegerKey = function(name) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(CapexSQLTableColumnInfo.TYPE_INTEGER_KEY));};CapexSQLTableColumnInfo.forDouble = function(name) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(CapexSQLTableColumnInfo.TYPE_DOUBLE));};CapexSQLTableColumnInfo.forBlob = function(name) {return(CapexSQLTableColumnInfo.createInstance().setName(name).setType(CapexSQLTableColumnInfo.TYPE_BLOB));};P.getName = function() {return(this.name);};P.setName = function(v) {(this.name) = (v);return(this);};P.getType = function() {return(this.type);};P.setType = function(v) {(this.type) = (v);return(this);};var CapexSQLTableInfo = function() {this.name = null;this.columns = null;this.indexes = null;{} };var P = CapexSQLTableInfo.prototype;P.constructor = CapexSQLTableInfo;P._t = {}; P._t["CapexSQLTableInfo"] = true;CapexSQLTableInfo.createInstance = function() {var _v = new CapexSQLTableInfo();return(_v._construct());};P._construct = function() {(this.indexes) = (null);(this.columns) = (null);(this.name) = (null);return(this);};CapexSQLTableInfo.forName = function(name) {return(CapexSQLTableInfo.createInstance().setName(name));};CapexSQLTableInfo.forDetails = function(name, columns, indexes, uniqueIndexes) {var v = CapexSQLTableInfo.createInstance();v.setName(name);if((columns) !== (null)) {var n = 0;var m = columns.length;for((n) = (0) ; (n) < (m) ; (n)++) {var column = columns[n];if((column) !== (null)) {v.addColumn(column);}}}if((indexes) !== (null)) {var n2 = 0;var m2 = indexes.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var index = indexes[n2];if((index) !== (null)) {v.addIndex(index);}}}if((uniqueIndexes) !== (null)) {var n3 = 0;var m3 = uniqueIndexes.length;for((n3) = (0) ; (n3) < (m3) ; (n3)++) {var uniqueIndex = uniqueIndexes[n3];if((uniqueIndex) !== (null)) {v.addUniqueIndex(uniqueIndex);}}}return(v);};P.addColumn = function(info) {if((info) == (null)) {return(this);}if((this.columns) == (null)) {(this.columns) = (new Array());}this.columns.push(info);return(this);};P.addIntegerColumn = function(name) {return(this.addColumn(CapexSQLTableColumnInfo.forInteger(name)));};P.addStringColumn = function(name) {return(this.addColumn(CapexSQLTableColumnInfo.forString(name)));};P.addStringKeyColumn = function(name) {return(this.addColumn(CapexSQLTableColumnInfo.forStringKey(name)));};P.addTextColumn = function(name) {return(this.addColumn(CapexSQLTableColumnInfo.forText(name)));};P.addIntegerKeyColumn = function(name) {return(this.addColumn(CapexSQLTableColumnInfo.forIntegerKey(name)));};P.addDoubleColumn = function(name) {return(this.addColumn(CapexSQLTableColumnInfo.forDouble(name)));};P.addBlobColumn = function(name) {return(this.addColumn(CapexSQLTableColumnInfo.forBlob(name)));};P.addIndex = function(column) {if(CapeString.isEmpty(column) === (false)) {if((this.indexes) == (null)) {(this.indexes) = (new Array());}this.indexes.push(CapexSQLTableColumnIndexInfo.createInstance().setColumn(column).setUnique(false));}return(this);};P.addUniqueIndex = function(column) {if(CapeString.isEmpty(column) === (false)) {if((this.indexes) == (null)) {(this.indexes) = (new Array());}this.indexes.push(CapexSQLTableColumnIndexInfo.createInstance().setColumn(column).setUnique(true));}return(this);};P.getName = function() {return(this.name);};P.setName = function(v) {(this.name) = (v);return(this);};P.getColumns = function() {return(this.columns);};P.setColumns = function(v) {(this.columns) = (v);return(this);};P.getIndexes = function() {return(this.indexes);};P.setIndexes = function(v) {(this.indexes) = (v);return(this);};var CapexTemplateStorageUsingFiles = function() {this.directory = null;this.suffix = null;{} };var P = CapexTemplateStorageUsingFiles.prototype;P.constructor = CapexTemplateStorageUsingFiles;P._t = {}; P._t["CapexTemplateStorageUsingFiles"] = true;P._t["CapexTemplateStorage"] = true;CapexTemplateStorageUsingFiles.forDirectory = function(dir) {var v = CapexTemplateStorageUsingFiles.createInstance();v.setDirectory(dir);return(v);};CapexTemplateStorageUsingFiles.forHTMLTemplateDirectory = function(dir) {var v = CapexTemplateStorageUsingFiles.createInstance();v.setDirectory(dir);v.setSuffix(".html.t");return(v);};CapexTemplateStorageUsingFiles.createInstance = function() {var _v = new CapexTemplateStorageUsingFiles();return(_v._construct());};P._construct = function() {(this.suffix) = (null);(this.directory) = (null);(this.suffix) = (".txt");return(this);};P.getTemplate = function(id, callback) {if((callback) == (null)) {return;}if((this.directory) == (null) || CapeString.isEmpty(id) || CapeString.indexOfWithStringAndCharacterAndSignedInteger(id, '/', 0) >= (0) || CapeString.indexOfWithStringAndCharacterAndSignedInteger(id, '\\', 0) >= (0)) {callback(null);return;}var ff = this.directory.entry(id + this.suffix);if(ff.isFile() === (false)) {callback(null);return;}callback(ff.getContentsString("UTF-8"));};P.getDirectory = function() {return(this.directory);};P.setDirectory = function(v) {(this.directory) = (v);return(this);};P.getSuffix = function() {return(this.suffix);};P.setSuffix = function(v) {(this.suffix) = (v);return(this);};var CapexTemplateStorageUsingSQLDatabase = function() {this.database = null;this.table = null;this.idColumn = null;this.contentColumn = null;{} };var P = CapexTemplateStorageUsingSQLDatabase.prototype;P.constructor = CapexTemplateStorageUsingSQLDatabase;P._t = {}; P._t["CapexTemplateStorageUsingSQLDatabase"] = true;P._t["CapexTemplateStorage"] = true;CapexTemplateStorageUsingSQLDatabase.forDatabase = function(db, table, idColumn, contentColumn) {var v = CapexTemplateStorageUsingSQLDatabase.createInstance();v.setDatabase(db);if(!((table) == (null))) {v.setTable(table);}if(!((idColumn) == (null))) {v.setIdColumn(idColumn);}if(!((contentColumn) == (null))) {v.setContentColumn(contentColumn);}return(v);};CapexTemplateStorageUsingSQLDatabase.createInstance = function() {var _v = new CapexTemplateStorageUsingSQLDatabase();return(_v._construct());};P._construct = function() {(this.contentColumn) = (null);(this.idColumn) = (null);(this.table) = (null);(this.database) = (null);(this.table) = ("templates");(this.idColumn) = ("id");(this.contentColumn) = ("content");return(this);};P.getTemplate = function(id, callback) {if((callback) == (null)) {return;}if((this.database) == (null) || CapeString.isEmpty(this.table) || CapeString.isEmpty(id)) {callback(null);return;}var stmt = this.database.prepare("SELECT content FROM " + this.table + " WHERE " + this.idColumn + " = ?;");if((stmt) == (null)) {callback(null);return;}stmt.addParamString(id);var cb = callback;this.database.querySingleRowWithSQLStatementAndFunction(stmt, function(data){if((data) == (null)) {cb(null);return;}cb(data.getString("content", null));}.bind(this));};P.getDatabase = function() {return(this.database);};P.setDatabase = function(v) {(this.database) = (v);return(this);};P.getTable = function() {return(this.table);};P.setTable = function(v) {(this.table) = (v);return(this);};P.getIdColumn = function() {return(this.idColumn);};P.setIdColumn = function(v) {(this.idColumn) = (v);return(this);};P.getContentColumn = function() {return(this.contentColumn);};P.setContentColumn = function(v) {(this.contentColumn) = (v);return(this);};var CapexTextTemplate = function() {this.tokens = null;this.text = null;this.markerBegin = null;this.markerEnd = null;this.logContext = null;this.type = null;this.languagePreferences = null;{} };var P = CapexTextTemplate.prototype;P.constructor = CapexTextTemplate;CapexTextTemplate.TYPE_GENERIC = 0;CapexTextTemplate.TYPE_HTML = 1;CapexTextTemplate.TYPE_JSON = 2;P._t = {}; P._t["CapexTextTemplate"] = true;CapexTextTemplate.createInstance = function() {var _v = new CapexTextTemplate();return(_v._construct());};P._construct = function() {(this.languagePreferences) = (null);(this.type) = (CapexTextTemplate.TYPE_GENERIC);(this.logContext) = (null);(this.markerEnd) = (null);(this.markerBegin) = (null);(this.text) = (null);(this.tokens) = (null);return(this);};CapexTextTemplate.forFile = function(file, markerBegin, markerEnd, type, includeDirs, logContext) {if((file) == (null)) {return(null);}var text = file.getContentsString("UTF-8");if((text) == (null)) {return(null);}var ids = includeDirs;if((ids) == (null)) {(ids) = (new Array());ids.push(file.getParent());}return(CapexTextTemplate.forString(text, markerBegin, markerEnd, type, ids, logContext));};CapexTextTemplate.forString = function(text, markerBegin, markerEnd, type, includeDirs, logContext) {var v = CapexTextTemplate.createInstance();v.setLogContext(logContext);v.setText(text);v.setType(type);v.setMarkerBegin(markerBegin);v.setMarkerEnd(markerEnd);if(v.prepare(includeDirs) === (false)) {(v) = (null);}return(v);};CapexTextTemplate.forHTMLString = function(text, includeDirs, logContext) {var v = CapexTextTemplate.createInstance();v.setLogContext(logContext);v.setText(text);v.setType(CapexTextTemplate.TYPE_HTML);v.setMarkerBegin("<%");v.setMarkerEnd("%>");if(v.prepare(includeDirs) === (false)) {(v) = (null);}return(v);};CapexTextTemplate.forJSONString = function(text, includeDirs, logContext) {var v = CapexTextTemplate.createInstance();v.setLogContext(logContext);v.setText(text);v.setType(CapexTextTemplate.TYPE_JSON);v.setMarkerBegin("{{");v.setMarkerEnd("}}");if(v.prepare(includeDirs) === (false)) {(v) = (null);}return(v);};P.setLanguagePreference = function(language) {(this.languagePreferences) = (new Array());if(!((language) == (null))) {this.languagePreferences.push(language);}};P.tokenizeString = function(inputdata, includeDirs) {if((this.markerBegin) == (null) || (this.markerEnd) == (null)) {CapeLog.error(this.logContext, "No template markers were given");return(null);}if(CapeString.getLength(this.markerBegin) !== (2) || CapeString.getLength(this.markerEnd) !== (2)) {CapeLog.error(this.logContext, "Invalid template markers: `" + this.markerBegin + "' and `" + this.markerEnd + "'");return(null);}var mb1 = CapeString.charAt(this.markerBegin, 0);var mb2 = CapeString.charAt(this.markerBegin, 1);var me1 = CapeString.charAt(this.markerEnd, 0);var me2 = CapeString.charAt(this.markerEnd, 1);var pc = ' ';var tag = null;var data = null;var it = CapeString.iterate(inputdata);var v = new Array();while((it) !== (null)) {var c = it.getNextChar();if((c).charCodeAt() <= (0)) {break;}if((tag) !== (null)) {if((pc) === (me1) && tag.count() > (2)) {tag.appendCharacter(pc);tag.appendCharacter(c);if((c) === (me2)) {var tt = tag.toString();var tts = CapeString.strip(CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(tt, 2, CapeString.getLength(tt) - (4)));var words = CapeString.quotedStringToVector(tts, ' ');if(CapeVector.get(words, 0) === ("include")) {var fileName = CapeVector.get(words, 1);if(CapeString.isEmpty(fileName)) {CapeLog.warning(this.logContext, "Include tag with empty filename. Ignoring it.");}else {var ff = null;if(CapeEnvironment.isAbsolutePath(fileName)) {(ff) = CapeFileInstance.forPath(fileName);}else {if((includeDirs) !== (null)) {var n = 0;var m = includeDirs.length;for((n) = (0) ; (n) < (m) ; (n)++) {var includeDir = includeDirs[n];if((includeDir) !== (null)) {var x = CapeFileInstance.forRelativePath(fileName, includeDir, false);if(x.isFile()) {(ff) = (x);break;}}}}}if((ff) == (null) || ff.isFile() === (false)) {CapeLog.warning(this.logContext, "Included file was not found: `" + fileName + "'");}else {var cc = ff.getContentsString("UTF-8");if((cc) == (null)) {CapeLog.warning(this.logContext, "Failed to read included file: `" + ff.getPath() + "'");}else {var nt = CapexTextTemplate.forString(cc, this.markerBegin, this.markerEnd, this.type, includeDirs, null);if((nt) == (null)) {CapeLog.warning(this.logContext, "Failed to read included template file: `" + ff.getPath() + "'");}else {var array = nt.getTokens();if((array) !== (null)) {var n2 = 0;var m2 = array.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var token = array[n2];if((token) !== (null)) {v.push(token);}}}}}}}}else {v.push(CapexTextTemplate.TagData.createInstanceWithVector(words));}(tag) = (null);}}else {if((c).charCodeAt() !== (me1).charCodeAt()) {tag.appendCharacter(c);}}}else {if((pc) === (mb1)) {if((c) === (mb2)) {if((data) !== (null)) {v.push(data);(data) = (null);}(tag) = CapeStringBuilder.createInstance();tag.appendCharacter(pc);tag.appendCharacter(c);}else {if((data) == (null)) {(data) = CapeStringBuilder.createInstance();}data.appendCharacter(pc);data.appendCharacter(c);}}else {if((c).charCodeAt() !== (mb1).charCodeAt()) {if((data) == (null)) {(data) = CapeStringBuilder.createInstance();}data.appendCharacter(c);}}}(pc) = (c);}if((pc) === (mb1)) {if((data) == (null)) {(data) = CapeStringBuilder.createInstance();}data.appendCharacter(pc);}if((data) !== (null)) {v.push(data);(data) = (null);}if((tag) !== (null)) {CapeLog.error(this.logContext, "Unfinished tag: `" + tag.toString() + "'");return(null);}return(v);};P.prepare = function(includeDirs) {var str = this.text;if((str) == (null)) {CapeLog.error(this.logContext, "No input string was specified.");return(false);}(this.tokens) = this.tokenizeString(str, includeDirs);if((this.tokens) == (null)) {return(false);}return(true);};P.execute = function(vars, includeDirs) {if((this.tokens) == (null)) {CapeLog.error(this.logContext, "TextTemplate has not been prepared");return(null);}var result = CapeStringBuilder.createInstance();if(this.doExecute(this.tokens, vars, result, includeDirs) === (false)) {return(null);}return(result.toString());};P.substituteVariables = function(orig, vars) {if((orig) == (null)) {return(orig);}if(CapeString.indexOfWithStringAndStringAndSignedInteger(orig, "${", 0) < (0)) {return(orig);}var sb = CapeStringBuilder.createInstance();var varbuf = null;var flag = false;var it = CapeString.iterate(orig);while((it) !== (null)) {var c = it.getNextChar();if((c).charCodeAt() <= (0)) {break;}if((varbuf) !== (null)) {if((c) === ('}')) {var varname = varbuf.toString();if((vars) !== (null)) {var varcut = null;if(CapeString.indexOfWithStringAndCharacterAndSignedInteger(varname, '!', 0) > (0)) {var sp = CapeVector.iterate(CapeString.split(varname, '!', 2));(varname) = sp.next();(varcut) = sp.next();}var r = this.getVariableValueString(vars, varname);if(CapeString.isEmpty(varcut) === (false)) {var itc = CapeString.iterate(varcut);var cx = ' ';while(((cx) = itc.getNextChar()).charCodeAt() > (0)) {var n = CapeString.lastIndexOfWithStringAndCharacterAndSignedInteger(r, cx, -(1));if((n) < (0)) {break;}(r) = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(r, 0, n);}}sb.appendString(r);}(varbuf) = (null);}else {varbuf.appendCharacter(c);}continue;}if((flag) === (true)) {(flag) = (false);if((c) === ('{')) {(varbuf) = CapeStringBuilder.createInstance();}else {sb.appendCharacter('$');sb.appendCharacter(c);}continue;}if((c) === ('$')) {(flag) = (true);continue;}sb.appendCharacter(c);}return(sb.toString());};CapexTextTemplate.objectAsCapeDynamicMap = function(o) {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeDynamicMap"))) {return(o);}return(null);};P.getVariableValue = function(vars, varname) {if((vars) == (null) || (varname) == (null)) {return(null);}var vv = vars.get(varname);if((vv) !== (null)) {return(vv);}var ll = CapeString.split(varname, '.', 0);if(CapeVector.getSize(ll) < (2)) {return(null);}var tnvar = CapeVector.get(ll, CapeVector.getSize(ll) - (1));var nvar = null;if(typeof(tnvar) === 'string') {(nvar) = (tnvar);}CapeVector.removeLast(ll);var cc = vars;if((ll) !== (null)) {var n = 0;var m = ll.length;for((n) = (0) ; (n) < (m) ; (n)++) {var vv2 = ll[n];if((vv2) !== (null)) {if((cc) == (null)) {return(null);}var vv2o = cc.get(vv2);(cc) = ((((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (vv2o, "CapeDynamicMap")) ? (vv2o) : (null)));if((cc) == (null) && (vv2o) !== (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (vv2o, "CapeJSONObject"))) {(cc) = CapexTextTemplate.objectAsCapeDynamicMap(vv2o.toJsonObject());}}}}if((cc) !== (null)) {return(cc.get(nvar));}return(null);};P.getVariableValueString = function(vars, varname) {var v = this.getVariableValue(vars, varname);if((v) == (null)) {return(null);}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (v, "CapeDynamicMap"))) {if((this.languagePreferences) !== (null)) {if((this.languagePreferences) !== (null)) {var n = 0;var m = this.languagePreferences.length;for((n) = (0) ; (n) < (m) ; (n)++) {var language = this.languagePreferences[n];if((language) !== (null)) {var s = v.getString(language, null);if(!((s) == (null))) {return(s);}}}}}else {var s = v.getString("en", null);if(!((s) == (null))) {return(s);}}return(null);}return(CapeString.asStringWithObject(v));};P.getVariableValueVector = function(vars, varname) {var v = this.getVariableValue(vars, varname);if((v) == (null)) {return(null);}if(v instanceof Array) {return(v);}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (v, "CapeVectorObject"))) {var vo = v;var vv = vo.toVector();return(vv);}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (v, "CapeArrayObject"))) {var vo = (((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (v, "CapeArrayObject")) ? (v) : (null));var vv = vo.toArray();var vvx = CapeVector.forArray(vv);return(vvx);}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (v, "CapeDynamicVector"))) {return(v.toVector());}return(null);};P.handleBlock = function(vars, tag, data, result, includeDirs) {if((tag) == (null)) {return(false);}var tagname = CapeVector.get(tag, 0);if(CapeString.isEmpty(tagname)) {return(false);}if((tagname) === ("for")) {var varname = CapeVector.get(tag, 1);var inword = CapeVector.get(tag, 2);var origvar = this.substituteVariables(CapeVector.get(tag, 3), vars);if(CapeString.isEmpty(varname) || CapeString.isEmpty(origvar) || !((inword) === ("in"))) {CapeLog.error(this.logContext, "Invalid for tag: `" + CapeString.combine(tag, ' ', false) + "'");return(false);}var index = 0;vars.setStringAndObject("__for_first", "true");var vv = this.getVariableValueVector(vars, origvar);if((vv) !== (null)) {var n = 0;var m = vv.length;for((n) = (0) ; (n) < (m) ; (n)++) {var o = vv[n];if((o) !== (null)) {if((index) % (2) === (0)) {vars.setStringAndObject("__for_parity", "even");}else {vars.setStringAndObject("__for_parity", "odd");}vars.setStringAndObject(varname, o);if(this.doExecute(data, vars, result, includeDirs) === (false)) {return(false);}if((index) === (0)) {vars.setStringAndObject("__for_first", "false");}(index)++;}}}vars.remove("__for_first");vars.remove("__for_parity");return(true);}if((tagname) === ("if")) {var lvalue = CapeVector.get(tag, 1);if((lvalue) == (null)) {return(true);}var operator = CapeVector.get(tag, 2);if((operator) == (null)) {var varval = this.getVariableValue(vars, lvalue);if((varval) == (null)) {return(true);}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (varval, "CapeVectorObject"))) {if(CapeVector.isEmpty(varval.toVector())) {return(true);}}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (varval, "CapeDynamicMap"))) {var value = varval;if(value.getCount() < (1)) {return(true);}}if(typeof(varval) === 'string') {if(CapeString.isEmpty(varval)) {return(true);}}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (varval, "CapeStringObject"))) {if(CapeString.isEmpty(varval.toString())) {return(true);}}if(this.doExecute(data, vars, result, includeDirs) === (false)) {return(false);}return(true);}(lvalue) = this.substituteVariables(lvalue, vars);var rvalue = CapeVector.get(tag, 3);if(!((rvalue) == (null))) {(rvalue) = this.substituteVariables(rvalue, vars);}if((lvalue) == (null) || CapeString.isEmpty(operator) || (rvalue) == (null)) {CapeLog.error(this.logContext, "Invalid if tag: `" + CapeString.combine(tag, ' ', false) + "'");return(false);}if((operator) === ("==") || (operator) === ("=") || (operator) === ("is")) {if(!((rvalue) === (lvalue))) {return(true);}if(this.doExecute(data, vars, result, includeDirs) === (false)) {return(false);}return(true);}if((operator) === ("!=") || (operator) === ("not")) {if((rvalue) === (lvalue)) {return(true);}if(this.doExecute(data, vars, result, includeDirs) === (false)) {return(false);}return(true);}CapeLog.error(this.logContext, "Unknown operator `" + operator + "' in if tag: `" + CapeString.combine(tag, ' ', false) + "'");return(false);}return(false);};P.doExecute = function(data, avars, result, includeDirs) {if((data) == (null)) {return(true);}var blockctr = 0;var blockdata = null;var blocktag = null;var vars = avars;if((vars) == (null)) {(vars) = CapeDynamicMap.createInstance();}if((data) !== (null)) {var n2 = 0;var m = data.length;for((n2) = (0) ; (n2) < (m) ; (n2)++) {var o = data[n2];if((o) !== (null)) {var tagname = null;var words = null;var tagData = (((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexTextTemplate.TagData")) ? (o) : (null));if((tagData) !== (null)) {(words) = tagData.words;if((words) !== (null)) {(tagname) = CapeVector.get(words, 0);if(CapeString.isEmpty(tagname)) {CapeLog.warning(this.logContext, "Empty tag encountered. Ignoring it.");continue;}}}if((tagname) === ("end")) {(blockctr)--;if((blockctr) === (0) && (blockdata) !== (null)) {if(this.handleBlock(vars, blocktag, blockdata, result, includeDirs) === (false)) {CapeLog.error(this.logContext, "Handling of a block failed");continue;}(blockdata) = (null);(blocktag) = (null);}}if((blockctr) > (0)) {if((tagname) === ("for") || (tagname) === ("if")) {(blockctr)++;}if((blockdata) == (null)) {(blockdata) = (new Array());}blockdata.push(o);continue;}if(typeof(o) === 'string' || ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapeStringObject"))) {result.appendString(CapeString.asStringWithObject(o));continue;}if((tagname) === ("=") || (tagname) === ("printstring")) {var varname = this.substituteVariables(CapeVector.get(words, 1), vars);if(CapeString.isEmpty(varname) === (false)) {var vv = this.getVariableValueString(vars, varname);if(CapeString.isEmpty(vv) === (false)) {if(this.type === (CapexTextTemplate.TYPE_HTML)) {(vv) = CapexHTMLString.sanitize(vv);}result.appendString(vv);}else {var defaultvalue = this.substituteVariables(CapeVector.get(words, 2), vars);if(CapeString.isEmpty(defaultvalue) === (false)) {if(this.type === (CapexTextTemplate.TYPE_HTML)) {(defaultvalue) = CapexHTMLString.sanitize(defaultvalue);}result.appendString(defaultvalue);}}}}else {if((tagname) === ("printRaw")) {var varname = this.substituteVariables(CapeVector.get(words, 1), vars);if(CapeString.isEmpty(varname) === (false)) {var vv = this.getVariableValueString(vars, varname);if(CapeString.isEmpty(vv) === (false)) {result.appendString(vv);}else {var defaultvalue = this.substituteVariables(CapeVector.get(words, 2), vars);if(CapeString.isEmpty(defaultvalue) === (false)) {result.appendString(defaultvalue);}}}}else {if((tagname) === ("catPath")) {var hasSlash = false;var n = 0;if((words) !== (null)) {var n3 = 0;var m2 = words.length;for((n3) = (0) ; (n3) < (m2) ; (n3)++) {var word = words[n3];if((word) !== (null)) {(n)++;if((n) === (1)) {continue;}(word) = this.substituteVariables(word, vars);var it = CapeString.iterate(word);if((it) == (null)) {continue;}if((n) > (2) && (hasSlash) === (false)) {result.appendCharacter('/');(hasSlash) = (true);}while(true) {var c = it.getNextChar();if((c).charCodeAt() < (1)) {break;}if((c) === ('/')) {if((hasSlash) === (false)) {result.appendCharacter(c);(hasSlash) = (true);}}else {result.appendCharacter(c);(hasSlash) = (false);}}}}}}else {if((tagname) === ("printJson")) {var varname = this.substituteVariables(CapeVector.get(words, 1), vars);if(CapeString.isEmpty(varname) === (false)) {var vv = this.getVariableValue(vars, varname);if((vv) !== (null)) {result.appendString(CapeJSONEncoder.encode(vv, true));}}}else {if((tagname) === ("printRichText")) {var markup = this.substituteVariables(CapeVector.get(words, 1), vars);if(CapeString.isEmpty(markup) === (false)) {var doc = CapexRichTextDocument.forWikiMarkupString(markup);if((doc) !== (null)) {result.appendString(doc.toHtml(null));}}}else {if((tagname) === ("printDate")) {var timestamp = this.substituteVariables(CapeVector.get(words, 1), vars);var aslong = CapeString.toLong(timestamp);var asstring = CapeDateTime.forTimeSeconds(aslong).toStringDate('/');result.appendString(asstring);}else {if((tagname) === ("printTime")) {var timestamp = this.substituteVariables(CapeVector.get(words, 1), vars);var aslong = CapeString.toLong(timestamp);var asstring = CapeDateTime.forTimeSeconds(aslong).toStringTime(':');result.appendString(asstring);}else {if((tagname) === ("printDateTime")) {var timestamp = this.substituteVariables(CapeVector.get(words, 1), vars);var aslong = CapeString.toLong(timestamp);var dt = CapeDateTime.forTimeSeconds(aslong);result.appendString(dt.toStringDate('/'));result.appendCharacter(' ');result.appendString(dt.toStringTime(':'));}else {if((tagname) === ("import")) {var type = CapeVector.get(words, 1);var filename = this.substituteVariables(CapeVector.get(words, 2), vars);if(CapeString.isEmpty(filename)) {CapeLog.warning(this.logContext, "Invalid import tag with empty filename");continue;}var ff = null;if((includeDirs) !== (null)) {var n4 = 0;var m3 = includeDirs.length;for((n4) = (0) ; (n4) < (m3) ; (n4)++) {var dir = includeDirs[n4];if((dir) !== (null)) {(ff) = CapeFileInstance.forRelativePath(filename, dir, false);if((ff) !== (null) && ff.isFile()) {break;}}}}if((ff) == (null) || ff.isFile() === (false)) {CapeLog.error(this.logContext, "Unable to find file to import: `" + filename + "'");continue;}CapeLog.debug(this.logContext, "Attempting to import file: `" + ff.getPath() + "'");var content = ff.getContentsString("UTF-8");if(CapeString.isEmpty(content)) {CapeLog.error(this.logContext, "Unable to read import file: `" + ff.getPath() + "'");continue;}if((type) === ("html")) {(content) = CapexHTMLString.sanitize(content);}else {if((type) === ("template")) {var t = CapexTextTemplate.forString(content, this.markerBegin, this.markerEnd, this.type, includeDirs, null);if((t) == (null)) {CapeLog.error(this.logContext, "Failed to parse imported template file: `" + ff.getPath() + "'");continue;}if(this.doExecute(t.getTokens(), vars, result, includeDirs) === (false)) {CapeLog.error(this.logContext, "Failed to process imported template file: `" + ff.getPath() + "'");continue;}(content) = (null);}else {if((type) === ("raw")) {;}else {CapeLog.error(this.logContext, "Unknown type for import: `" + type + "'. Ignoring the import.");continue;}}}if(CapeString.isEmpty(content) === (false)) {result.appendString(content);}}else {if((tagname) === ("escapeHtml")) {var content = this.substituteVariables(CapeVector.get(words, 1), vars);if(CapeString.isEmpty(content) === (false)) {(content) = CapexHTMLString.sanitize(content);if(CapeString.isEmpty(content) === (false)) {result.appendString(content);}}}else {if((tagname) === ("set")) {if(CapeVector.getSize(words) !== (3)) {CapeLog.warning(this.logContext, "Invalid number of parameters for set tag encountered: " + CapeString.forInteger(CapeVector.getSize(words)));continue;}var varname = this.substituteVariables(CapeVector.get(words, 1), vars);if(CapeString.isEmpty(varname)) {CapeLog.warning(this.logContext, "Empty variable name in set tag encountered.");continue;}var newValue = this.substituteVariables(CapeVector.get(words, 2), vars);vars.setStringAndObject(varname, newValue);}else {if((tagname) === ("assign")) {if(CapeVector.getSize(words) !== (3)) {CapeLog.warning(this.logContext, "Invalid number of parameters for assign tag encountered: " + CapeString.forInteger(CapeVector.getSize(words)));continue;}var varname = this.substituteVariables(CapeVector.get(words, 1), vars);if(CapeString.isEmpty(varname)) {CapeLog.warning(this.logContext, "Empty variable name in assign tag encountered.");continue;}var vv = CapeVector.get(words, 2);if((vv) === ("none")) {vars.remove(varname);}else {vars.setStringAndObject(varname, this.getVariableValue(vars, vv));}}else {if((tagname) === ("for") || (tagname) === ("if")) {if((blockctr) === (0)) {(blocktag) = (words);}(blockctr)++;}else {if((tagname) === ("end")) {;}else {if((this.type) === (CapexTextTemplate.TYPE_HTML)) {this.onHTMLTag(vars, result, includeDirs, tagname, words);}else {if((this.type) === (CapexTextTemplate.TYPE_JSON)) {this.onJSONTag(vars, result, includeDirs, tagname, words);}else {;}}}}}}}}}}}}}}}}}}}return(true);};P.basename = function(path) {if((path) == (null)) {return(null);}var v = "";var comps = CapeVector.iterate(CapeString.split(path, '/', 0));if((comps) !== (null)) {var comp = comps.next();while(!((comp) == (null))) {if(CapeString.getLength(comp) > (0)) {(v) = (comp);}(comp) = comps.next();}}return(v);};P.onHTMLTag = function(vars, result, includeDirs, tagname, words) {if((tagname) === ("link")) {var path = this.substituteVariables(CapeVector.get(words, 1), vars);var text = this.substituteVariables(CapeVector.get(words, 2), vars);if(CapeString.isEmpty(text)) {(text) = this.basename(path);}if(CapeString.isEmpty(text)) {return;}result.appendString("<a href=\"" + path + "\"><span>" + text + "</span></a>");return;}};P.encodeJSONString = function(s, sb) {if((s) == (null)) {return;}var it = CapeString.iterate(s);if((it) == (null)) {return;}var c = ' ';while(((c) = it.getNextChar()).charCodeAt() > (0)) {if((c) === ('\"')) {sb.appendCharacter('\\');}else {if((c) === ('\\')) {sb.appendCharacter('\\');}}sb.appendCharacter(c);}};P.onJSONTag = function(vars, result, includeDirs, tagname, words) {if((tagname) === ("quotedstring")) {var string = this.substituteVariables(CapeVector.get(words, 1), vars);this.encodeJSONString(string, result);}};P.getTokens = function() {return(this.tokens);};P.setTokens = function(v) {(this.tokens) = (v);return(this);};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};P.getMarkerBegin = function() {return(this.markerBegin);};P.setMarkerBegin = function(v) {(this.markerBegin) = (v);return(this);};P.getMarkerEnd = function() {return(this.markerEnd);};P.setMarkerEnd = function(v) {(this.markerEnd) = (v);return(this);};P.getLogContext = function() {return(this.logContext);};P.setLogContext = function(v) {(this.logContext) = (v);return(this);};P.getType = function() {return(this.type);};P.setType = function(v) {(this.type) = (v);return(this);};P.getLanguagePreferences = function() {return(this.languagePreferences);};P.setLanguagePreferences = function(v) {(this.languagePreferences) = (v);return(this);};var P2 = P;CapexTextTemplate.TagData = function() {this.words = null;{} };var P = CapexTextTemplate.TagData.prototype;P.constructor = CapexTextTemplate.TagData;P._t = {}; P._t["CapexTextTemplate.TagData"] = true;CapexTextTemplate.TagData.createInstance = function() {var _v = new CapexTextTemplate.TagData();return(_v._construct());};P._construct = function() {return(this);};CapexTextTemplate.TagData.createInstanceWithVector = function(words) {var _v = new CapexTextTemplate.TagData();return(_v._constructVector(words));};P._constructVector = function(words) {(this.words) = (null);this.words = (words);return(this);};P = P2;P2 = null;var CapexURLDecoder = function() {{} };var P = CapexURLDecoder.prototype;P.constructor = CapexURLDecoder;P._t = {}; P._t["CapexURLDecoder"] = true;CapexURLDecoder.createInstance = function() {var _v = new CapexURLDecoder();return(_v._construct());};P._construct = function() {return(this);};CapexURLDecoder.xcharToInteger = function(c) {if((c).charCodeAt() >= ('0').charCodeAt() && (c).charCodeAt() <= ('9').charCodeAt()) {return((c.charCodeAt()) - ('0').charCodeAt());}else {if((c).charCodeAt() >= ('a').charCodeAt() && (c).charCodeAt() <= ('f').charCodeAt()) {return((10) + (c).charCodeAt() - ('a').charCodeAt());}else {if((c).charCodeAt() >= ('A').charCodeAt() && (c).charCodeAt() <= ('F').charCodeAt()) {return((10) + (c).charCodeAt() - ('A').charCodeAt());}}}return(0);};CapexURLDecoder.decode = function(astr) {if((astr) == (null)) {return(null);}var sb = CapeStringBuilder.createInstance();var str = CapeString.strip(astr);var it = CapeString.iterate(str);while((it) !== (null)) {var x = it.getNextChar();if((x).charCodeAt() < (1)) {break;}if((x) === ('%')) {var x1 = it.getNextChar();var x2 = it.getNextChar();if((x1).charCodeAt() > (0) && (x2).charCodeAt() > (0)) {sb.appendCharacter(String.fromCharCode(CapexURLDecoder.xcharToInteger(x1) * (16) + CapexURLDecoder.xcharToInteger(x2)));}else {break;}}else {if((x) === ('+')) {sb.appendCharacter(' ');}else {sb.appendCharacter(x);}}}return(sb.toString());};var CapexURLEncoder = function() {{} };var P = CapexURLEncoder.prototype;P.constructor = CapexURLEncoder;P._t = {}; P._t["CapexURLEncoder"] = true;CapexURLEncoder.createInstance = function() {var _v = new CapexURLEncoder();return(_v._construct());};P._construct = function() {return(this);};CapexURLEncoder.encode = function(str, percentOnly, encodeUnreservedChars) {if((str) == (null)) {return(null);}var sb = CapeStringBuilder.createInstance();var it = CapeString.iterate(str);while((it) !== (null)) {var c = it.getNextChar();if((c).charCodeAt() < (1)) {break;}if((c).charCodeAt() >= ('a').charCodeAt() && (c).charCodeAt() <= ('z').charCodeAt() || (c).charCodeAt() >= ('A').charCodeAt() && (c).charCodeAt() <= ('Z').charCodeAt() || (c).charCodeAt() >= ('0').charCodeAt() && (c).charCodeAt() <= ('9').charCodeAt()) {sb.appendCharacter(c);}else {if(((c) === ('-') || (c) === ('.') || (c) === ('_') || (c) === ('~')) && (encodeUnreservedChars) === (false)) {sb.appendCharacter(c);}else {if((c) === (' ') && (percentOnly) === (false)) {sb.appendCharacter('+');}else {sb.appendCharacter('%');sb.appendString(CapeString.forIntegerHex(c.charCodeAt()));}}}}return(sb.toString());};var CapexVector2 = function() {this.x = null;this.y = null;{} };var P = CapexVector2.prototype;P.constructor = CapexVector2;P._t = {}; P._t["CapexVector2"] = true;CapexVector2.createInstance = function() {var _v = new CapexVector2();return(_v._construct());};P._construct = function() {(this.y) = (0.0);(this.x) = (0.0);return(this);};CapexVector2.create = function(x, y) {var v = CapexVector2.createInstance();v.x = (x);v.y = (y);return(v);};P.add = function(b) {(this.x) += b.x;(this.y) += b.y;return(this);};P.subtract = function(b) {(this.x) -= b.x;(this.y) -= b.y;return(this);};P.multiply = function(b) {(this.x) *= b.x;(this.y) *= b.y;return(this);};P.multiplyScalar = function(a) {(this.x) += (a);(this.y) += (a);return(this);};P.distance = function(b) {var dist = ((this.y) - b.y) * ((this.y) - b.y) + ((this.x) - b.x) * ((this.x) - b.x);return(CapeMath.sqrt(dist));};P.getLength = function() {return(CapeMath.sqrt((this.x) * (this.x) + (this.y) * (this.y)));};var CapexVector3 = function() {this.x = null;this.y = null;this.z = null;{} };var P = CapexVector3.prototype;P.constructor = CapexVector3;P._t = {}; P._t["CapexVector3"] = true;CapexVector3.createInstance = function() {var _v = new CapexVector3();return(_v._construct());};P._construct = function() {(this.z) = (0.0);(this.y) = (0.0);(this.x) = (0.0);return(this);};CapexVector3.create = function(x, y, z) {var v = CapexVector3.createInstance();v.x = (x);v.y = (y);v.z = (z);return(v);};P.add = function(b) {(this.x) += b.x;(this.y) += b.y;(this.z) += b.z;return(this);};P.subtract = function(b) {(this.x) -= b.x;(this.y) -= b.y;(this.z) -= b.z;return(this);};P.multiply = function(b) {(this.x) *= b.x;(this.y) *= b.y;(this.z) *= b.z;return(this);};P.multiplyScalar = function(a) {(this.x) *= (a);(this.y) *= (a);(this.z) *= (a);return(this);};P.distance = function(b) {var dist = ((this.y) - b.y) * ((this.y) - b.y) + ((this.x) - b.x) * ((this.x) - b.x) + ((this.z) - b.z) * ((this.z) - b.z);return(CapeMath.sqrt(dist));};P.getLength = function() {return(CapeMath.sqrt((this.x) * (this.x) + (this.y) * (this.y) + (this.z) * (this.z)));};var CapexVerboseDateTimeString = function() {{} };var P = CapexVerboseDateTimeString.prototype;P.constructor = CapexVerboseDateTimeString;P._t = {}; P._t["CapexVerboseDateTimeString"] = true;CapexVerboseDateTimeString.createInstance = function() {var _v = new CapexVerboseDateTimeString();return(_v._construct());};P._construct = function() {return(this);};CapexVerboseDateTimeString.forNow = function() {return(CapexVerboseDateTimeString.forDateTime(CapeDateTime.forNow()));};CapexVerboseDateTimeString.forDateTime = function(dd) {if((dd) == (null)) {return("NODATE");}var sb = CapeStringBuilder.createInstance();sb.appendString(CapexVerboseDateTimeString.getShortDayName(dd.getWeekDay()));sb.appendString(", ");sb.appendString(CapeString.forIntegerWithPadding(dd.getDayOfMonth(), 2, "0"));sb.appendCharacter(' ');sb.appendString(CapexVerboseDateTimeString.getShortMonthName(dd.getMonth()));sb.appendCharacter(' ');sb.appendString(CapeString.forInteger(dd.getYear()));sb.appendCharacter(' ');sb.appendString(CapeString.forIntegerWithPadding(dd.getHours(), 2, "0"));sb.appendCharacter(':');sb.appendString(CapeString.forIntegerWithPadding(dd.getMinutes(), 2, "0"));sb.appendCharacter(':');sb.appendString(CapeString.forIntegerWithPadding(dd.getSeconds(), 2, "0"));sb.appendString(" GMT");return(sb.toString());};CapexVerboseDateTimeString.getTimeStringForDateTime = function(dd, includeTimeZone) {if((dd) == (null)) {return("NOTIME");}var sb = CapeStringBuilder.createInstance();sb.appendString(CapeString.forIntegerWithPadding(dd.getHours(), 2, "0"));sb.appendCharacter(':');sb.appendString(CapeString.forIntegerWithPadding(dd.getMinutes(), 2, "0"));sb.appendCharacter(':');sb.appendString(CapeString.forIntegerWithPadding(dd.getSeconds(), 2, "0"));if(includeTimeZone) {sb.appendString(" GMT");}return(sb.toString());};CapexVerboseDateTimeString.getDateStringForDateTime = function(dd) {if((dd) == (null)) {return("NODATE");}var sb = CapeStringBuilder.createInstance();sb.appendString(CapexVerboseDateTimeString.getLongMonthName(dd.getMonth()));sb.appendCharacter(' ');sb.appendString(CapeString.forInteger(dd.getDayOfMonth()));sb.appendString(", ");sb.appendString(CapeString.forInteger(dd.getYear()));return(sb.toString());};CapexVerboseDateTimeString.getShortDayName = function(n) {switch(n) {case 1: {return("Sun");break;}case 2: {return("Mon");break;}case 3: {return("Tue");break;}case 4: {return("Wed");break;}case 5: {return("Thu");break;}case 6: {return("Fri");break;}case 7: {return("Sat");break;}}return(null);};CapexVerboseDateTimeString.getShortMonthName = function(n) {switch(n) {case 1: {return("Jan");break;}case 2: {return("Feb");break;}case 3: {return("Mar");break;}case 4: {return("Apr");break;}case 5: {return("May");break;}case 6: {return("Jun");break;}case 7: {return("Jul");break;}case 8: {return("Aug");break;}case 9: {return("Sep");break;}case 10: {return("Oct");break;}case 11: {return("Nov");break;}case 12: {return("Dec");break;}}return(null);};CapexVerboseDateTimeString.getLongMonthName = function(n) {switch(n) {case 1: {return("January");break;}case 2: {return("February");break;}case 3: {return("March");break;}case 4: {return("April");break;}case 5: {return("May");break;}case 6: {return("June");break;}case 7: {return("July");break;}case 8: {return("August");break;}case 9: {return("September");break;}case 10: {return("October");break;}case 11: {return("November");break;}case 12: {return("December");break;}}return(null);};var CapexWebClientForJavaScript = function() {{} };var P = CapexWebClientForJavaScript.prototype;P.constructor = CapexWebClientForJavaScript;P._t = {}; P._t["CapexWebClientForJavaScript"] = true;P._t["CapexWebClient"] = true;CapexWebClientForJavaScript.createInstance = function() {var _v = new CapexWebClientForJavaScript();return(_v._construct());};P._construct = function() {return(this);};P.query = function(method, url, requestHeaders, body, callback) {if(CapeString.isEmpty(method) || CapeString.isEmpty(url)) {callback(null, null, null);return;}if(CapeString.startsWithWithStringAndStringAndSignedInteger(url, "http://", 0) === (false) && CapeString.startsWithWithStringAndStringAndSignedInteger(url, "https://", 0) === (false)) {callback(null, null, null);return;}this.send(method, url, requestHeaders, body, callback);};P.getXMLHttpRequestObject = function() {var xhr = null;if(typeof XMLHttpRequest === "undefined") {XMLHttpRequest = function() {try {return new ActiveXObject('Msxml2.XMLHTTP.6.0');}catch(e) {}try {return new ActiveXObject('Msxml2.XMLHTTP.3.0');}catch(e) {}try {return new ActiveXObject('Microsoft.XMLHTTP');}catch(e) {}throw new Error('This browser does not support XMLHttpRequest.');}}xhr = new XMLHttpRequest();return(xhr);};P.onResponseReceived = function(status, responseHeaders, body, callback) {var nhdrs = CapeKeyValueList.createInstance();var hdrs = CapeString.split(responseHeaders, ';', 0);if((hdrs) !== (null)) {var i = 0;for((i) = (0) ; (i) < CapeVector.getSize(hdrs) ; (i)++) {var ts = CapeVector.get(hdrs, i);var s = null;if(typeof(ts) === 'string') {(s) = (ts);}if(CapeString.isEmpty(s) === (false)) {var ss = CapeString.split(s, ':', 0);if((ss) !== (null)) {var tk = CapeVector.get(ss, 0);var k = null;if(typeof(tk) === 'string') {(k) = (tk);}var tv = CapeVector.get(ss, 1);var v = null;if(typeof(tv) === 'string') {(v) = (tv);}if(CapeString.isEmpty(k) || CapeString.isEmpty(v)) {continue;}nhdrs.addKAndV(k, v);}}}}callback(status, nhdrs, body);};P.send = function(method, url, requestHeaders, body, callback) {var xhr = this.getXMLHttpRequestObject();xhr.open(method, url, true);xhr.responseType = "arraybuffer";xhr.onreadystatechange = function() {if(xhr.readyState == 4) {this.onResponseReceived(""+xhr.status, xhr.getAllResponseHeaders(), xhr.response, callback);}}.bind(this);if((requestHeaders) !== (null)) {var iter = requestHeaders.iterate();while(true) {var tkv = iter.next();var kv = null;if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (tkv, "CapeKeyValuePair"))) {(kv) = (tkv);}if((kv) == (null)) {break;}var k = kv.key;var v = kv.value;xhr.setRequestHeader(k, v);}}if((body) !== (null)) {xhr.send(new Uint8Array(body));}else {xhr.send();}};var CapexWordWrap = function() {{} };var P = CapexWordWrap.prototype;P.constructor = CapexWordWrap;P._t = {}; P._t["CapexWordWrap"] = true;CapexWordWrap.createInstance = function() {var _v = new CapexWordWrap();return(_v._construct());};P._construct = function() {return(this);};CapexWordWrap.wrapToLines = function(text, charactersPerLine) {if((text) == (null)) {return(null);}var v = new Array();var it = CapeString.iterate(text);var lineBuilder = null;var wordBuilder = null;while((it) !== (null)) {var c = it.getNextChar();if((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c).charCodeAt() < (1)) {if((wordBuilder) !== (null)) {var word = wordBuilder.toString();(wordBuilder) = (null);if((lineBuilder) == (null)) {(lineBuilder) = CapeStringBuilder.createInstance();}var cc = lineBuilder.count();if((cc) > (0)) {(cc)++;}(cc) += CapeString.getLength(word);if((cc) > (charactersPerLine)) {v.push(lineBuilder.toString());(lineBuilder) = CapeStringBuilder.createInstance();}if(lineBuilder.count() > (0)) {lineBuilder.appendCharacter(' ');}lineBuilder.appendString(word);}if((c).charCodeAt() < (1)) {break;}continue;}if((wordBuilder) == (null)) {(wordBuilder) = CapeStringBuilder.createInstance();}wordBuilder.appendCharacter(c);}if((lineBuilder) !== (null)) {v.push(lineBuilder.toString());}return(v);};var CapexXMLMaker = function() {this.elements = null;this.customHeader = null;this.singleLine = null;this.header = null;{} };var P = CapexXMLMaker.prototype;P.constructor = CapexXMLMaker;P._t = {}; P._t["CapexXMLMaker"] = true;P._t["CapeStringObject"] = true;CapexXMLMaker.createInstance = function() {var _v = new CapexXMLMaker();return(_v._construct());};P._construct = function() {(this.header) = (null);(this.singleLine) = (false);(this.customHeader) = (null);(this.elements) = (null);(this.elements) = (new Array());(this.header) = ("<?xml version=\"1.0\" encoding=\"utf-8\"?>");return(this);};P.startStringAndBoolean = function(element, singleLine) {this.add(CapexXMLMaker.StartElement.createInstanceWithString(element).setSingleLine(singleLine));return(this);};P.startStringAndStringAndStringAndBoolean = function(element, k1, v1, singleLine) {var v = CapexXMLMaker.StartElement.createInstanceWithString(element);v.setSingleLine(singleLine);if(!((k1) == (null))) {v.attribute(k1, v1);}this.add(v);return(this);};P.startStringAndMapAndBoolean = function(element, attrs, singleLine) {var v = CapexXMLMaker.StartElement.createInstanceWithString(element);v.setSingleLine(singleLine);if((attrs) !== (null)) {var keys = CapeMap.getKeys(attrs);if((keys) !== (null)) {var n = 0;var m = keys.length;for((n) = (0) ; (n) < (m) ; (n)++) {var key = keys[n];if((key) !== (null)) {var val = attrs.get(key);v.attribute(key, val);}}}}this.add(v);return(this);};P.element = function(element, attrs) {var v = CapexXMLMaker.Element.createInstanceWithString(element);if((attrs) !== (null)) {var keys = CapeMap.getKeys(attrs);if((keys) !== (null)) {var n = 0;var m = keys.length;for((n) = (0) ; (n) < (m) ; (n)++) {var key = keys[n];if((key) !== (null)) {var val = attrs.get(key);v.attribute(key, val);}}}}this.add(v);return(this);};P.end = function(element) {this.add(CapexXMLMaker.EndElement.createInstanceWithString(element));return(this);};P.text = function(element) {this.add(element);return(this);};P.cdata = function(element) {this.add(CapexXMLMaker.CData.createInstanceWithString(element));return(this);};P.textElement = function(element, text) {this.add(CapexXMLMaker.StartElement.createInstanceWithString(element).setSingleLine(true));this.add(text);this.add(CapexXMLMaker.EndElement.createInstanceWithString(element));return(this);};P.add = function(o) {if((o) !== (null)) {CapeVector.append(this.elements, o);}return(this);};P.append = function(sb, level, str, noIndent, noNewLine) {var n = 0;if((this.singleLine) === (false) && (noIndent) === (false)) {for((n) = (0) ; (n) < (level) ; (n)++) {sb.appendCharacter(' ');sb.appendCharacter(' ');}}sb.appendString(str);if((this.singleLine) === (false) && (noNewLine) === (false)) {sb.appendCharacter('\n');}};P.escapeString = function(str) {var sb = CapeStringBuilder.createInstance();if(!((str) == (null))) {var array = CapeString.toCharArray(str);if((array) !== (null)) {var n = 0;var m = array.length;for((n) = (0) ; (n) < (m) ; (n)++) {var c = array[n];if((c) === ('\"')) {sb.appendString("&quot;");}else {if((c) === ('\'')) {sb.appendString("&apos;");}else {if((c) === ('<')) {sb.appendString("&lt;");}else {if((c) === ('>')) {sb.appendString("&gt;");}else {if((c) === ('&')) {sb.appendString("&amp;");}else {sb.appendCharacter(c);}}}}}}}}return(sb.toString());};P.toString = function() {var sb = CapeStringBuilder.createInstance();var level = 0;if(!((this.header) == (null))) {this.append(sb, level, this.header, false, false);}if(!((this.customHeader) == (null))) {sb.appendString(this.customHeader);}var singleLine = false;if((this.elements) !== (null)) {var n = 0;var m = this.elements.length;for((n) = (0) ; (n) < (m) ; (n)++) {var o = this.elements[n];if((o) !== (null)) {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLMaker.Element"))) {this.append(sb, level, o.toString(), singleLine, singleLine);}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLMaker.StartElement"))) {(singleLine) = o.getSingleLine();this.append(sb, level, o.toString(), false, singleLine);(level)++;}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLMaker.EndElement"))) {(level)--;this.append(sb, level, o.toString(), singleLine, false);(singleLine) = (false);}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLMaker.CustomXML"))) {this.append(sb, level, o.getString(), singleLine, singleLine);}else {if(typeof(o) === 'string') {this.append(sb, level, this.escapeString(o), singleLine, singleLine);}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLMaker.CData"))) {this.append(sb, level, o.toString(), singleLine, o.getSingleLine());}}}}}}}}}return(sb.toString());};P.getElements = function() {return(this.elements);};P.setElements = function(v) {(this.elements) = (v);return(this);};P.getCustomHeader = function() {return(this.customHeader);};P.setCustomHeader = function(v) {(this.customHeader) = (v);return(this);};P.getSingleLine = function() {return(this.singleLine);};P.setSingleLine = function(v) {(this.singleLine) = (v);return(this);};P.getHeader = function() {return(this.header);};P.setHeader = function(v) {(this.header) = (v);return(this);};var P2 = P;CapexXMLMaker.CData = function() {this.text = null;this.simple = null;this.singleLine = null;{} };var P = CapexXMLMaker.CData.prototype;P.constructor = CapexXMLMaker.CData;P._t = {}; P._t["CapexXMLMaker.CData"] = true;P._t["CapeStringObject"] = true;CapexXMLMaker.CData.createInstance = function() {var _v = new CapexXMLMaker.CData();return(_v._construct());};P._construct = function() {return(this);};CapexXMLMaker.CData.createInstanceWithString = function(t) {var _v = new CapexXMLMaker.CData();return(_v._constructString(t));};P._constructString = function(t) {(this.singleLine) = (false);(this.simple) = (false);(this.text) = (null);(this.text) = (t);return(this);};P.toString = function() {var sb = CapeStringBuilder.createInstance();if(this.simple) {sb.appendString(this.text);}else {sb.appendString("<![CDATA[");sb.appendString(this.text);sb.appendString("]]>");}return(sb.toString());};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};P.getSimple = function() {return(this.simple);};P.setSimple = function(v) {(this.simple) = (v);return(this);};P.getSingleLine = function() {return(this.singleLine);};P.setSingleLine = function(v) {(this.singleLine) = (v);return(this);};P = P2;P2 = null;var P2 = P;CapexXMLMaker.StartElement = function() {this.name = null;this.attributes = null;this.single = null;this.singleLine = null;{} };var P = CapexXMLMaker.StartElement.prototype;P.constructor = CapexXMLMaker.StartElement;P._t = {}; P._t["CapexXMLMaker.StartElement"] = true;P._t["CapeStringObject"] = true;CapexXMLMaker.StartElement.createInstance = function() {var _v = new CapexXMLMaker.StartElement();return(_v._construct());};P._construct = function() {return(this);};CapexXMLMaker.StartElement.createInstanceWithString = function(n) {var _v = new CapexXMLMaker.StartElement();return(_v._constructString(n));};P._constructString = function(n) {(this.singleLine) = (false);(this.single) = (false);(this.attributes) = (null);(this.name) = (null);(this.name) = (n);(this.attributes) = (new Map());return(this);};P.attribute = function(key, value) {CapeMap.setValue(this.attributes, key, value);return(this);};P.toString = function() {var sb = CapeStringBuilder.createInstance();sb.appendCharacter('<');sb.appendString(this.name);var keys = CapeMap.getKeys(this.attributes);if((keys) !== (null)) {var n = 0;var m = keys.length;for((n) = (0) ; (n) < (m) ; (n)++) {var key = keys[n];if((key) !== (null)) {sb.appendCharacter(' ');sb.appendString(key);sb.appendCharacter('=');sb.appendCharacter('\"');var val = CapeMap.getValue(this.attributes, key);sb.appendString(val);sb.appendCharacter('\"');}}}if(this.single) {sb.appendCharacter(' ');sb.appendCharacter('/');}sb.appendCharacter('>');return(sb.toString());};P.getName = function() {return(this.name);};P.setName = function(v) {(this.name) = (v);return(this);};P.getAttributes = function() {return(this.attributes);};P.setAttributes = function(v) {(this.attributes) = (v);return(this);};P.getSingle = function() {return(this.single);};P.setSingle = function(v) {(this.single) = (v);return(this);};P.getSingleLine = function() {return(this.singleLine);};P.setSingleLine = function(v) {(this.singleLine) = (v);return(this);};P = P2;P2 = null;var P2 = P;CapexXMLMaker.EndElement = function() {this.name = null;{} };var P = CapexXMLMaker.EndElement.prototype;P.constructor = CapexXMLMaker.EndElement;P._t = {}; P._t["CapexXMLMaker.EndElement"] = true;P._t["CapeStringObject"] = true;CapexXMLMaker.EndElement.createInstance = function() {var _v = new CapexXMLMaker.EndElement();return(_v._construct());};P._construct = function() {return(this);};CapexXMLMaker.EndElement.createInstanceWithString = function(n) {var _v = new CapexXMLMaker.EndElement();return(_v._constructString(n));};P._constructString = function(n) {(this.name) = (null);(this.name) = (n);return(this);};P.toString = function() {return("</" + this.getName() + ">");};P.getName = function() {return(this.name);};P.setName = function(v) {(this.name) = (v);return(this);};P = P2;P2 = null;var P2 = P;CapexXMLMaker.Element = function() {CapexXMLMaker.StartElement.call(this);{} };var P = CapexXMLMaker.Element.prototype = (function(o) {function F() {} F.prototype = o;return(new F());}) (CapexXMLMaker.StartElement.prototype);P.constructor = CapexXMLMaker.Element;P._t = {}; P._t["CapexXMLMaker.Element"] = true;P._t["CapexXMLMaker.StartElement"] = true;P._t["CapeStringObject"] = true;CapexXMLMaker.Element.createInstance = function() {var _v = new CapexXMLMaker.Element();return(_v._construct());};P._construct = function() {if(CapexXMLMaker.StartElement.prototype._construct.call(this) == (null)) {return(null);}return(this);};CapexXMLMaker.Element.createInstanceWithString = function(name) {var _v = new CapexXMLMaker.Element();return(_v._constructString(name));};P._constructString = function(name) {if(CapexXMLMaker.StartElement.prototype._constructString.call(this, name) == (null)) {return(null);}this.setSingle(true);return(this);};P = P2;P2 = null;var P2 = P;CapexXMLMaker.CustomXML = function() {this.string = null;{} };var P = CapexXMLMaker.CustomXML.prototype;P.constructor = CapexXMLMaker.CustomXML;P._t = {}; P._t["CapexXMLMaker.CustomXML"] = true;CapexXMLMaker.CustomXML.createInstance = function() {var _v = new CapexXMLMaker.CustomXML();return(_v._construct());};P._construct = function() {return(this);};CapexXMLMaker.CustomXML.createInstanceWithString = function(s) {var _v = new CapexXMLMaker.CustomXML();return(_v._constructString(s));};P._constructString = function(s) {(this.string) = (null);(this.string) = (s);return(this);};P.getString = function() {return(this.string);};P.setString = function(v) {(this.string) = (v);return(this);};P = P2;P2 = null;var CapexXMLParser = function() {this.it = null;this.nextQueue = null;this.cdataStart = null;this.commentStart = null;this.tag = null;this.def = null;this.cdata = null;this.comment = null;this.ignoreWhiteSpace = null;{} };var P = CapexXMLParser.prototype;P.constructor = CapexXMLParser;P._t = {}; P._t["CapexXMLParser"] = true;CapexXMLParser.createInstance = function() {var _v = new CapexXMLParser();return(_v._construct());};P._construct = function() {(this.ignoreWhiteSpace) = (false);(this.comment) = (null);(this.cdata) = (null);(this.def) = (null);(this.tag) = (null);(this.commentStart) = ("!--");(this.cdataStart) = ("![CDATA[");(this.nextQueue) = (null);(this.it) = (null);return(this);};CapexXMLParser.parseAsTreeObject = function(xml, ignoreWhiteSpace) {var root = null;var stack = CapeStack.createInstance();var pp = CapexXMLParser.forString(xml);pp.setIgnoreWhiteSpace(ignoreWhiteSpace);while(true) {var o = pp.next();if((o) == (null)) {break;}if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLParser.StartElement"))) {var nn = CapeDynamicMap.createInstance();nn.setStringAndObject("name", o.getName());nn.setStringAndObject("attributes", o.getParams());if((root) == (null)) {(root) = (nn);stack.push(nn);}else {var current = stack.peek();if((current) == (null)) {(current) = (root);}var children = current.getDynamicVector("children");if((children) == (null)) {(children) = CapeDynamicVector.createInstance();current.setStringAndObject("children", children);}children.appendObject(nn);stack.push(nn);}}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLParser.EndElement"))) {stack.pop();}else {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (o, "CapexXMLParser.CharacterData"))) {var current = stack.peek();if((current) !== (null)) {var children = current.getDynamicVector("children");if((children) == (null)) {(children) = CapeDynamicVector.createInstance();current.setStringAndObject("children", children);}children.appendObject(o.getData());}}}}}return(root);};CapexXMLParser.forFile = function(file) {if((file) == (null)) {return(null);}var reader = file.read();if((reader) == (null)) {return(null);}var v = CapexXMLParser.createInstance();v.it = CapeCharacterIteratorForReader.createInstanceWithReader(reader);return(v);};CapexXMLParser.forString = function(string) {if((string) == (null)) {return(null);}var v = CapexXMLParser.createInstance();v.it = CapeCharacterIteratorForString.createInstanceWithString(string);return(v);};CapexXMLParser.forIterator = function(it) {if((it) == (null)) {return(null);}var v = CapexXMLParser.createInstance();v.it = (it);return(v);};P.onTagString = function(tagstring) {if(CapeString.charAt(tagstring, 0) === ('/')) {return(CapexXMLParser.EndElement.createInstance().setName(CapeString.subStringWithStringAndSignedInteger(tagstring, 1)));}var element = CapeStringBuilder.createInstance();var params = CapeDynamicMap.createInstance();var it = CapeCharacterIteratorForString.createInstanceWithString(tagstring);var c = ' ';while(((c) = it.getNextChar()).charCodeAt() > (0)) {if((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c) === ('\r') || (c) === ('/')) {if(element.count() > (0)) {break;}}else {element.appendCharacter(c);}}while((c).charCodeAt() > (0) && (c).charCodeAt() !== ('/').charCodeAt()) {var pname = CapeStringBuilder.createInstance();var pval = CapeStringBuilder.createInstance();while((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c) === ('\r')) {(c) = it.getNextChar();}while((c).charCodeAt() > (0) && (c).charCodeAt() !== (' ').charCodeAt() && (c).charCodeAt() !== ('\t').charCodeAt() && (c).charCodeAt() !== ('\n').charCodeAt() && (c).charCodeAt() !== ('\r').charCodeAt() && (c).charCodeAt() !== ('=').charCodeAt()) {pname.appendCharacter(c);(c) = it.getNextChar();}while((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c) === ('\r')) {(c) = it.getNextChar();}if((c).charCodeAt() !== ('=').charCodeAt()) {;}else {(c) = it.getNextChar();while((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c) === ('\r')) {(c) = it.getNextChar();}if((c).charCodeAt() !== ('\"').charCodeAt()) {;while((c).charCodeAt() > (0) && (c).charCodeAt() !== (' ').charCodeAt() && (c).charCodeAt() !== ('\t').charCodeAt() && (c).charCodeAt() !== ('\n').charCodeAt() && (c).charCodeAt() !== ('\r').charCodeAt()) {pval.appendCharacter(c);(c) = it.getNextChar();}while((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c) === ('\r')) {(c) = it.getNextChar();}}else {(c) = it.getNextChar();while((c).charCodeAt() > (0) && (c).charCodeAt() !== ('\"').charCodeAt()) {pval.appendCharacter(c);(c) = it.getNextChar();}if((c).charCodeAt() !== ('\"').charCodeAt()) {;}else {(c) = it.getNextChar();}while((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c) === ('\r')) {(c) = it.getNextChar();}}}var pnamestr = pname.toString();var pvalstr = pval.toString();params.setStringAndObject(pnamestr, pvalstr);}var els = element.toString();if((c) === ('/')) {(this.nextQueue) = CapexXMLParser.EndElement.createInstance().setName(els);}return(CapexXMLParser.StartElement.createInstance().setName(els).setParams(params));};P.isOnlyWhiteSpace = function(str) {if((str) == (null)) {return(true);}var array = CapeString.toCharArray(str);if((array) !== (null)) {var n = 0;var m = array.length;for((n) = (0) ; (n) < (m) ; (n)++) {var c = array[n];if((c) === (' ') || (c) === ('\t') || (c) === ('\n') || (c) === ('\r')) {;}else {return(false);}}}return(true);};P.next = function() {if((this.nextQueue) !== (null)) {var v = this.nextQueue;(this.nextQueue) = (null);return(v);}while(this.it.hasEnded() === (false)) {var nxb = this.it.getNextChar();if((nxb).charCodeAt() < (1)) {continue;}if((this.tag) !== (null)) {if((nxb) === ('>')) {var ts = this.tag.toString();(this.tag) = (null);return(this.onTagString(ts));}this.tag.appendCharacter(nxb);if((nxb) === ('[') && this.tag.count() === CapeString.getLength(this.cdataStart) && CapeString.equals(this.cdataStart, this.tag.toString())) {(this.tag) = (null);(this.cdata) = CapeStringBuilder.createInstance();}else {if((nxb) === ('-') && this.tag.count() === CapeString.getLength(this.commentStart) && CapeString.equals(this.commentStart, this.tag.toString())) {(this.tag) = (null);(this.comment) = CapeStringBuilder.createInstance();}}}else {if((this.cdata) !== (null)) {var c0 = nxb;var c1 = ' ';var c2 = ' ';if((c0) === (']')) {(c1) = this.it.getNextChar();if((c1) === (']')) {(c2) = this.it.getNextChar();if((c2) === ('>')) {var dd = this.cdata.toString();(this.cdata) = (null);return(CapexXMLParser.CharacterData.createInstance().setData(dd));}else {this.it.moveToPreviousChar();this.it.moveToPreviousChar();this.cdata.appendCharacter(c0);}}else {this.it.moveToPreviousChar();this.cdata.appendCharacter(c0);}}else {this.cdata.appendCharacter(c0);}}else {if((this.comment) !== (null)) {var c0 = nxb;var c1 = ' ';var c2 = ' ';if((c0) === ('-')) {(c1) = this.it.getNextChar();if((c1) === ('-')) {(c2) = this.it.getNextChar();if((c2) === ('>')) {var ct = this.comment.toString();(this.comment) = (null);return(CapexXMLParser.Comment.createInstance().setText(ct));}else {this.it.moveToPreviousChar();this.it.moveToPreviousChar();this.comment.appendCharacter(c0);}}else {this.it.moveToPreviousChar();this.comment.appendCharacter(c0);}}else {this.comment.appendCharacter(c0);}}else {if((nxb) === ('<')) {if((this.def) !== (null)) {var cd = this.def.toString();(this.def) = (null);if((this.ignoreWhiteSpace) && !((cd) == (null))) {if(this.isOnlyWhiteSpace(cd)) {(cd) = (null);}}if(!((cd) == (null))) {this.it.moveToPreviousChar();return(CapexXMLParser.CharacterData.createInstance().setData(cd));}}(this.tag) = CapeStringBuilder.createInstance();}else {if((this.def) == (null)) {(this.def) = CapeStringBuilder.createInstance();}this.def.appendCharacter(nxb);}}}}}return(null);};P.getIgnoreWhiteSpace = function() {return(this.ignoreWhiteSpace);};P.setIgnoreWhiteSpace = function(v) {(this.ignoreWhiteSpace) = (v);return(this);};var P2 = P;CapexXMLParser.StartElement = function() {this.name = null;this.params = null;{} };var P = CapexXMLParser.StartElement.prototype;P.constructor = CapexXMLParser.StartElement;P._t = {}; P._t["CapexXMLParser.StartElement"] = true;CapexXMLParser.StartElement.createInstance = function() {var _v = new CapexXMLParser.StartElement();return(_v._construct());};P._construct = function() {(this.params) = (null);(this.name) = (null);return(this);};P.getParam = function(pname) {if((this.params) == (null)) {return(null);}return(this.params.getString(pname, null));};P.getName = function() {return(this.name);};P.setName = function(v) {(this.name) = (v);return(this);};P.getParams = function() {return(this.params);};P.setParams = function(v) {(this.params) = (v);return(this);};P = P2;P2 = null;var P2 = P;CapexXMLParser.EndElement = function() {this.name = null;{} };var P = CapexXMLParser.EndElement.prototype;P.constructor = CapexXMLParser.EndElement;P._t = {}; P._t["CapexXMLParser.EndElement"] = true;CapexXMLParser.EndElement.createInstance = function() {var _v = new CapexXMLParser.EndElement();return(_v._construct());};P._construct = function() {(this.name) = (null);return(this);};P.getName = function() {return(this.name);};P.setName = function(v) {(this.name) = (v);return(this);};P = P2;P2 = null;var P2 = P;CapexXMLParser.CharacterData = function() {this.data = null;{} };var P = CapexXMLParser.CharacterData.prototype;P.constructor = CapexXMLParser.CharacterData;P._t = {}; P._t["CapexXMLParser.CharacterData"] = true;CapexXMLParser.CharacterData.createInstance = function() {var _v = new CapexXMLParser.CharacterData();return(_v._construct());};P._construct = function() {(this.data) = (null);return(this);};P.getData = function() {return(this.data);};P.setData = function(v) {(this.data) = (v);return(this);};P = P2;P2 = null;var P2 = P;CapexXMLParser.Comment = function() {this.text = null;{} };var P = CapexXMLParser.Comment.prototype;P.constructor = CapexXMLParser.Comment;P._t = {}; P._t["CapexXMLParser.Comment"] = true;CapexXMLParser.Comment.createInstance = function() {var _v = new CapexXMLParser.Comment();return(_v._construct());};P._construct = function() {(this.text) = (null);return(this);};P.getText = function() {return(this.text);};P.setText = function(v) {(this.text) = (v);return(this);};P = P2;P2 = null;var CapexZipReader = function() {{} };var P = CapexZipReader.prototype;P.constructor = CapexZipReader;P._t = {}; P._t["CapexZipReader"] = true;CapexZipReader.createInstance = function() {var _v = new CapexZipReader();return(_v._construct());};P._construct = function() {return(this);};CapexZipReader.forFile = function(file) {return(null);};CapexZipReader.extractZipFileToDirectory = function(zipFile, destDir, listener) {if((zipFile) == (null) || (destDir) == (null)) {return(false);}var zf = CapexZipReader.forFile(zipFile);if((zf) == (null)) {return(false);}if(destDir.isDirectory() === (false)) {destDir.createDirectoryRecursive();}if(destDir.isDirectory() === (false)) {return(false);}var array = zf.getEntries();if((array) !== (null)) {var n = 0;var m = array.length;for((n) = (0) ; (n) < (m) ; (n)++) {var entry = array[n];if((entry) !== (null)) {var ename = entry.getName();if(CapeString.isEmpty(ename)) {continue;}var dd = destDir;(ename) = CapeString.replaceStringAndCharacterAndCharacter(ename, '\\', '/');var array2 = CapeString.split(ename, '/', 0);if((array2) !== (null)) {var n2 = 0;var m2 = array2.length;for((n2) = (0) ; (n2) < (m2) ; (n2)++) {var comp = array2[n2];if((comp) !== (null)) {if((comp) === (".") || (comp) === ("..")) {continue;}(dd) = dd.entry(comp);}}}if((listener) !== (null)) {listener(dd);}if(entry.writeToFile(dd) === (false)) {return(false);}}}}return(true);};P.getEntries = function() {};var CapexZipReaderEntry = function() {this.name = null;this.compressedSize = null;this.uncompressedSize = null;this.isDirectory = null;{} };var P = CapexZipReaderEntry.prototype;P.constructor = CapexZipReaderEntry;P._t = {}; P._t["CapexZipReaderEntry"] = true;CapexZipReaderEntry.createInstance = function() {var _v = new CapexZipReaderEntry();return(_v._construct());};P._construct = function() {(this.isDirectory) = (false);(this.uncompressedSize) = (0);(this.compressedSize) = (0);(this.name) = (null);return(this);};P.getName = function() {return(this.name);};P.setName = function(newName) {(this.name) = CapeString.replaceStringAndCharacterAndCharacter(newName, '\\', '/');if(CapeString.endsWithWithStringAndString(this.name, "/")) {(this.isDirectory) = (true);(this.name) = CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(this.name, 0, CapeString.getLength(this.name) - (1));}return(this);};P.getContentReader = function() {return(null);};P.writeToFile = function(file) {if((file) == (null)) {return(false);}if(this.getIsDirectory()) {return(file.createDirectoryRecursive());}var reader = this.getContentReader();if((reader) == (null)) {return(false);}var fp = file.getParent();if((fp) !== (null)) {fp.createDirectoryRecursive();}var writer = file.write();if((writer) == (null)) {if(((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (reader, "CapeClosable"))) {reader.close();}return(false);}var buf = new ArrayBuffer((4096) * (4));var v = true;var n = 0;while(((n) = reader.read(buf)) > (0)) {var nr = writer.write(buf, n);if((nr) !== (n)) {(v) = (false);break;}}if((v) === (false)) {file.remove();}if((reader) !== (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (reader, "CapeClosable"))) {reader.close();}if((writer) !== (null) && ((function(o, t) {return(o != null && o._t != null && o._t[t] === true);}) (writer, "CapeClosable"))) {writer.close();}return(v);};P.writeToDir = function(dir, fullPath, overwrite) {if((dir) == (null) || (this.name) == (null)) {return(null);}var path = null;if((fullPath) === (false)) {var nn = null;var r = CapeString.lastIndexOfWithStringAndCharacterAndSignedInteger(this.name, '/', -(1));if((r) < (1)) {(nn) = (this.name);}else {(nn) = CapeString.subStringWithStringAndSignedInteger(this.name, (r) + (1));}if((nn) == (null) || CapeString.getLength(nn) < (1)) {return(null);}(path) = dir.entry(nn);}else {(path) = (dir);var array = CapeString.split(this.name, '/', 0);if((array) !== (null)) {var n = 0;var m = array.length;for((n) = (0) ; (n) < (m) ; (n)++) {var x = array[n];if((x) !== (null)) {if(!((x) == (null)) && CapeString.getLength(x) > (0)) {(path) = path.entry(x);}}}}var dd = path.getParent();if(dd.isDirectory() === (false)) {dd.createDirectoryRecursive();}if(dd.isDirectory() === (false)) {return(null);}}if((overwrite) === (false)) {if(path.exists()) {return(null);}}if(this.writeToFile(path) === (false)) {return(null);}return(path);};P.getCompressedSize = function() {return(this.compressedSize);};P.setCompressedSize = function(v) {(this.compressedSize) = (v);return(this);};P.getUncompressedSize = function() {return(this.uncompressedSize);};P.setUncompressedSize = function(v) {(this.uncompressedSize) = (v);return(this);};P.getIsDirectory = function() {return(this.isDirectory);};P.setIsDirectory = function(v) {(this.isDirectory) = (v);return(this);};var CapexZipWriter = function() {{} };var P = CapexZipWriter.prototype;P.constructor = CapexZipWriter;P._t = {}; P._t["CapexZipWriter"] = true;CapexZipWriter.createInstance = function() {var _v = new CapexZipWriter();return(_v._construct());};P._construct = function() {return(this);};CapexZipWriter.forOutputFile = function(file) {return(null);};P.addFile = function(file, filename) {};P.close = function() {};